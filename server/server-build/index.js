/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./Controllers/WebHooks/stripeWebhooks.js":
/*!************************************************!*\
  !*** ./Controllers/WebHooks/stripeWebhooks.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../middleware/checkAuthenticated.js */ \"./middleware/checkAuthenticated.js\");\n/* harmony import */ var _Models_product_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../Models/product.js */ \"./Models/product.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _Models_order_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../Models/order.js */ \"./Models/order.js\");\n/* harmony import */ var _Models_user_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../Models/user.js */ \"./Models/user.js\");\n/* harmony import */ var _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/nodemailer.js */ \"./utils/nodemailer.js\");\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @react-email/render */ \"@react-email/render\");\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_react_email_render__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _React_Email_emails_orderSuccess_jsx__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../React Email/emails/orderSuccess.jsx */ \"./React Email/emails/orderSuccess.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _React_Email_emails_orderReceived_jsx__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../React Email/emails/orderReceived.jsx */ \"./React Email/emails/orderReceived.jsx\");\n\n\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_4___default()(process.env.STRIPE_KEY);\nvar CLIENT_URL = process.env.CLIENT_URL;\nvar stripeWebHooks = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(req, res, next) {\n    var event, _paymentIntent$metada, payment_intent, paymentIntent, order_id, order, _paymentIntent$metada2, _getPaymentMethod$car, _updateOrder$customer, _event$data$object, _payment_intent, charge_id, _paymentIntent, _order_id, userId, _order, cartObj, productsArray, foundProducts, getPaymentMethod, updateOrder, emailHtml, object, customer, paymentMethod, newPaymentMethodId, newPaymentMethodFingerPrint, allPaymentMethods, data, fingerPrintArray;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          event = req.body; // if (event.type == 'setup_intent.requires_action') {\n          //   const result = await stripe.handleNextAction({\n          //     clientSecret: event?.data?.object?.client_secret,\n          //   });\n          //   console.log('secret: ', event?.data?.object?.client_secret )\n          // }\n          if (!(event.type === 'charge.failed')) {\n            _context.next = 12;\n            break;\n          }\n          console.log({\n            process: 'failed'\n          });\n          payment_intent = event.data.object.payment_intent;\n          _context.next = 7;\n          return stripe.paymentIntents.retrieve(payment_intent);\n        case 7:\n          paymentIntent = _context.sent;\n          order_id = (_paymentIntent$metada = paymentIntent.metadata) === null || _paymentIntent$metada === void 0 ? void 0 : _paymentIntent$metada.order_id;\n          _context.next = 11;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"].findByIdAndUpdate(order_id, {\n            status: 'failed'\n          });\n        case 11:\n          order = _context.sent;\n        case 12:\n          if (!(event.type === 'charge.succeeded')) {\n            _context.next = 40;\n            break;\n          }\n          _event$data$object = event.data.object, _payment_intent = _event$data$object.payment_intent, charge_id = _event$data$object.id;\n          _context.next = 16;\n          return stripe.paymentIntents.retrieve(_payment_intent);\n        case 16:\n          _paymentIntent = _context.sent;\n          _order_id = (_paymentIntent$metada2 = _paymentIntent.metadata) === null || _paymentIntent$metada2 === void 0 ? void 0 : _paymentIntent$metada2.order_id;\n          userId = _paymentIntent === null || _paymentIntent === void 0 ? void 0 : _paymentIntent.customer;\n          _context.next = 21;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"].findByIdAndUpdate(_order_id, {\n            charge_id: charge_id,\n            payment_intent_id: _payment_intent\n          }, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 21:\n          _order = _context.sent;\n          // const order = await Order.findById(order_id, null, {\n          //   lean: { toObject: true },\n          // });\n          cartObj = {};\n          _order.items.forEach(function (item) {\n            if (lodash__WEBPACK_IMPORTED_MODULE_8___default().has(cartObj, item.product)) {\n              cartObj[item.product].push(item);\n            } else {\n              cartObj[item.product] = [item];\n            }\n          });\n          productsArray = Object.keys(cartObj);\n          _context.next = 27;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].find({\n            _id: {\n              $in: productsArray\n            }\n          });\n        case 27:\n          foundProducts = _context.sent;\n          foundProducts.forEach(function (productObject) {\n            var ItemsArray = cartObj[productObject.id];\n            ItemsArray.forEach(function (variationDetail) {\n              var _$get, _$get2;\n              if (((_$get = lodash__WEBPACK_IMPORTED_MODULE_8___default().get(productObject, 'variations')) === null || _$get === void 0 ? void 0 : _$get.length) < 3) {\n                var findQuantityVariation = {};\n                for (var i = 0; i < productObject.variations.length; i++) {\n                  if (lodash__WEBPACK_IMPORTED_MODULE_8___default().get(productObject, ['variations', i, 'quantityHeader', 'on']) == true) {\n                    lodash__WEBPACK_IMPORTED_MODULE_8___default().assign(findQuantityVariation, lodash__WEBPACK_IMPORTED_MODULE_8___default().merge(productObject.variations[i].toObject(), {\n                      variationIndex: i + 1\n                    }));\n                    break;\n                  }\n                }\n                if (!lodash__WEBPACK_IMPORTED_MODULE_8___default().isEmpty(findQuantityVariation)) {\n                  var variationOptions = findQuantityVariation.options;\n                  var foundVariationId = lodash__WEBPACK_IMPORTED_MODULE_8___default().get(variationDetail, [\"variation\".concat(findQuantityVariation.variationIndex), 'id']);\n                  var foundVariation = variationOptions === null || variationOptions === void 0 ? void 0 : variationOptions.get(foundVariationId);\n                  variationOptions.set(foundVariationId, _objectSpread(_objectSpread({}, foundVariation), {}, {\n                    stock: foundVariation.stock -= variationDetail.quantity\n                  }));\n                } else {\n                  productObject.stock = productObject.stock - variationDetail.quantity || 0;\n                }\n              } else if (((_$get2 = lodash__WEBPACK_IMPORTED_MODULE_8___default().get(productObject, 'variations')) === null || _$get2 === void 0 ? void 0 : _$get2.length) >= 3) {\n                var variationCombineOption = productObject.variations[2].options;\n                if (variationCombineOption) {\n                  var _variationDetail$vari;\n                  var foundOptionVariation = variationCombineOption.get(variationDetail === null || variationDetail === void 0 || (_variationDetail$vari = variationDetail.variation2) === null || _variationDetail$vari === void 0 ? void 0 : _variationDetail$vari.id);\n                  if (foundOptionVariation) {\n                    variationCombineOption.set(foundOptionVariation.id, _objectSpread(_objectSpread({}, foundOptionVariation), {}, {\n                      stock: foundOptionVariation.stock -= variationDetail.quantity\n                    }));\n                  } else {\n                    console.log('didnt find variation, may have been deleted');\n                  }\n                }\n              } else {\n                console.log('reach else block');\n              }\n            });\n            return productObject.save();\n          });\n          _context.next = 31;\n          return stripe.paymentMethods.retrieve(_paymentIntent === null || _paymentIntent === void 0 ? void 0 : _paymentIntent.payment_method);\n        case 31:\n          getPaymentMethod = _context.sent;\n          _context.next = 34;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"].findOneAndUpdate({\n            _id: _order_id\n          }, {\n            $set: {\n              status: 'received',\n              payment_type: (getPaymentMethod === null || getPaymentMethod === void 0 || (_getPaymentMethod$car = getPaymentMethod.card) === null || _getPaymentMethod$car === void 0 ? void 0 : _getPaymentMethod$car.brand) || (getPaymentMethod === null || getPaymentMethod === void 0 ? void 0 : getPaymentMethod.type)\n              // payment_intent_id: paymentIntent?.id,\n            }\n          }, {\n            populate: {\n              path: 'items.product customer itemsByProfile.items.product'\n            },\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          }).exec();\n        case 34:\n          updateOrder = _context.sent;\n          // const updateUser = await User.findByIdAndUpdate(\n          //   userId,\n          //   {\n          //     $push: { orders: order_id },\n          //   },\n          //   {\n          //     upsert: true,\n          //     new: true,\n          //   },\n          // );\n          emailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_12__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14__.createElement(_React_Email_emails_orderReceived_jsx__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n            order: updateOrder\n          }));\n          _context.next = 38;\n          return _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"].sendMail({\n            from: 'kevinjean321@gmail.com',\n            to: updateOrder === null || updateOrder === void 0 || (_updateOrder$customer = updateOrder.customer) === null || _updateOrder$customer === void 0 ? void 0 : _updateOrder$customer.email,\n            subject: 'Thanks for your order!',\n            html: emailHtml\n          });\n        case 38:\n          res.status(200).send({\n            success: true\n          });\n          return _context.abrupt(\"return\");\n        case 40:\n          if (!(event.type == 'setup_intent.succeeded')) {\n            _context.next = 60;\n            break;\n          }\n          object = event.data.object;\n          customer = object.customer;\n          _context.next = 45;\n          return stripe.paymentMethods.retrieve(object.payment_method);\n        case 45:\n          paymentMethod = _context.sent;\n          if (!(paymentMethod.type === 'card')) {\n            _context.next = 57;\n            break;\n          }\n          newPaymentMethodId = paymentMethod.id;\n          newPaymentMethodFingerPrint = paymentMethod.card.fingerprint;\n          _context.next = 51;\n          return stripe.customers.listPaymentMethods(customer, {\n            type: 'card'\n          });\n        case 51:\n          allPaymentMethods = _context.sent;\n          data = allPaymentMethods.data;\n          fingerPrintArray = [];\n          data.forEach(function (item) {\n            var fingerPrint = item.card.fingerprint;\n            if (fingerPrint == newPaymentMethodFingerPrint && item.id != newPaymentMethodId) {\n              fingerPrintArray.push({\n                fingerPrint: fingerPrint,\n                id: item.id\n              });\n            }\n          });\n          _context.next = 57;\n          return Promise.all([].concat(fingerPrintArray).map(function (_ref2) {\n            var id = _ref2.id;\n            return stripe.paymentMethods.detach(id);\n          }));\n        case 57:\n          return _context.abrupt(\"return\", res.send({\n            success: true\n          }));\n        case 60:\n          res.status(200).send({\n            success: true\n          });\n        case 61:\n          _context.next = 67;\n          break;\n        case 63:\n          _context.prev = 63;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(_context.t0);\n          res.status(500).send({\n            error: _context.t0\n          });\n        case 67:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 63]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stripeWebHooks);\n\n//# sourceURL=webpack://server/./Controllers/WebHooks/stripeWebhooks.js?");

/***/ }),

/***/ "./Controllers/adminController.js":
/*!****************************************!*\
  !*** ./Controllers/adminController.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminLogin: () => (/* binding */ adminLogin),\n/* harmony export */   ai_word_suggestion: () => (/* binding */ ai_word_suggestion),\n/* harmony export */   cancelOrder: () => (/* binding */ cancelOrder),\n/* harmony export */   count_all: () => (/* binding */ count_all),\n/* harmony export */   editPrice: () => (/* binding */ editPrice),\n/* harmony export */   editTitle: () => (/* binding */ editTitle),\n/* harmony export */   exportPdf: () => (/* binding */ exportPdf),\n/* harmony export */   generatePresignUrl: () => (/* binding */ generatePresignUrl),\n/* harmony export */   getAllProducts: () => (/* binding */ getAllProducts),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getProductFiles: () => (/* binding */ getProductFiles),\n/* harmony export */   getSingleOrder: () => (/* binding */ getSingleOrder),\n/* harmony export */   mark_as_gift: () => (/* binding */ mark_as_gift),\n/* harmony export */   searchOrder: () => (/* binding */ searchOrder),\n/* harmony export */   searchProducts: () => (/* binding */ searchProducts),\n/* harmony export */   searchUser: () => (/* binding */ searchUser),\n/* harmony export */   shipOrder: () => (/* binding */ shipOrder),\n/* harmony export */   testPdf: () => (/* binding */ testPdf),\n/* harmony export */   updateOrder: () => (/* binding */ updateOrder),\n/* harmony export */   updateProductFeature: () => (/* binding */ updateProductFeature),\n/* harmony export */   updateStatus: () => (/* binding */ updateStatus),\n/* harmony export */   updateUserStatus: () => (/* binding */ updateUserStatus)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"@babel/runtime/helpers/typeof\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _Models_user_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Models/user.js */ \"./Models/user.js\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _Models_order_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Models/order.js */ \"./Models/order.js\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! passport */ \"passport\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(passport__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(dotenv_config_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var dayjs_plugin_minMax__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! dayjs/plugin/minMax */ \"dayjs/plugin/minMax\");\n/* harmony import */ var dayjs_plugin_minMax__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_minMax__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _React_Email_emails_orderShipped_jsx__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../React Email/emails/orderShipped.jsx */ \"./React Email/emails/orderShipped.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @react-email/render */ \"@react-email/render\");\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_react_email_render__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../utils/nodemailer.js */ \"./utils/nodemailer.js\");\n/* harmony import */ var _React_Email_emails_orderCancelled_jsx__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../React Email/emails/orderCancelled.jsx */ \"./React Email/emails/orderCancelled.jsx\");\n/* harmony import */ var _React_Email_emails_returnOrder_jsx__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../React Email/emails/returnOrder.jsx */ \"./React Email/emails/returnOrder.jsx\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @react-pdf/renderer */ \"@react-pdf/renderer\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var _pdf_pdf_jsx__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../pdf/pdf.jsx */ \"./pdf/pdf.jsx\");\n/* harmony import */ var _utils_s3Service_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../utils/s3Service.js */ \"./utils/s3Service.js\");\n/* harmony import */ var randomstring__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! randomstring */ \"randomstring\");\n/* harmony import */ var randomstring__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(randomstring__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var _Models_coupon_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../Models/coupon.js */ \"./Models/coupon.js\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../utils/logger.js */ \"./utils/logger.js\");\n/* harmony import */ var _Models_product_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../Models/product.js */ \"./Models/product.js\");\n/* harmony import */ var _utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../utils/productAggregateStage.js */ \"./utils/productAggregateStage.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_31__);\n/* harmony import */ var _utils_productSearchStage_jsx__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../utils/productSearchStage.jsx */ \"./utils/productSearchStage.jsx\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(openai__WEBPACK_IMPORTED_MODULE_33__);\n\n\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n/* eslint-disable import/prefer-default-export */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndayjs__WEBPACK_IMPORTED_MODULE_14___default().extend((dayjs_plugin_minMax__WEBPACK_IMPORTED_MODULE_15___default()));\nvar _process$env = process.env,\n  SENDER = _process$env.SENDER,\n  OPENAI_KEY = _process$env.OPENAI_KEY,\n  STRIPE_KEY = _process$env.STRIPE_KEY,\n  OPENAI_ORGANIZATION = _process$env.OPENAI_ORGANIZATION,\n  OPENAI_PROJECT = _process$env.OPENAI_PROJECT;\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_13___default()(STRIPE_KEY);\nvar openai = new (openai__WEBPACK_IMPORTED_MODULE_33___default())({\n  organization: OPENAI_ORGANIZATION,\n  project: OPENAI_PROJECT\n});\nvar updateUserStatus = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('id').trim().escape(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('status').trim().escape().customSanitizer(function (value) {\n  console.log({\n    value: value\n  });\n  if (value == 'active') {\n    return 'inactive';\n  } else {\n    return 'active';\n  }\n}), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee(req, res, next) {\n    var _req$body, id, status, users;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _req$body = req.body, id = _req$body.id, status = _req$body.status;\n          console.log({\n            status: status\n          });\n          _context.next = 4;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].updateMany({\n            _id: id\n          }, {\n            status: status\n          }, {\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          });\n        case 4:\n          users = _context.sent;\n          res.send({\n            success: true,\n            users: users\n          });\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}())];\nvar searchUser = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('searchText').escape().trim().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee2(req, res, next) {\n    var searchText, errors, projectionFields, _users, shouldArray, objectId, users;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          searchText = req.query.searchText;\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req);\n          projectionFields = {\n            firstName: 1,\n            lastName: 1,\n            email: 1,\n            dob: 1,\n            _id: 1,\n            status: 1,\n            interest: 1\n          };\n          if (errors.isEmpty()) {\n            _context2.next = 8;\n            break;\n          }\n          _context2.next = 6;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find({}, projectionFields);\n        case 6:\n          _users = _context2.sent;\n          return _context2.abrupt(\"return\", res.send({\n            result: _users,\n            searchText: searchText\n          }));\n        case 8:\n          console.log({\n            searchText: searchText\n          });\n          shouldArray = ['email', 'lastName', 'firstName', 'interest', 'status'].map(function (field) {\n            return {\n              text: {\n                query: searchText,\n                path: field\n              }\n            };\n          });\n          try {\n            objectId = new (mongoose__WEBPACK_IMPORTED_MODULE_27___default().Types).ObjectId(searchText);\n            shouldArray.push({\n              equals: {\n                value: objectId,\n                path: '_id'\n              }\n            });\n          } catch (error) {\n            console.error('parse string to objectId failed: ', error === null || error === void 0 ? void 0 : error.message);\n          }\n          _context2.next = 13;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].aggregate([{\n            $search: {\n              index: 'user_search_index',\n              compound: {\n                should: shouldArray\n              }\n            }\n          }, {\n            $project: _objectSpread(_objectSpread({}, projectionFields), {}, {\n              score: {\n                $meta: 'searchScore'\n              }\n            })\n          }]);\n        case 13:\n          users = _context2.sent;\n          res.send({\n            result: users,\n            searchText: searchText\n          });\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}())];\nvar ai_word_suggestion = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('searchText', 'Provide a text to search').escape().trim().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee3(req, res, next) {\n    var searchText, errors, completion;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          searchText = req.query.searchText;\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(function (_ref4) {\n            var msg = _ref4.msg;\n            return msg;\n          });\n          if (errors.isEmpty()) {\n            _context3.next = 4;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.send({\n            result: [],\n            searchText: searchText,\n            errors: errors.mapped()\n          }));\n        case 4:\n          _context3.next = 6;\n          return openai.chat.completions.create({\n            messages: [{\n              role: 'user',\n              content: \"give me product word suggestion for the word \\\"\".concat(searchText, \"\\\" in a JSON array\")\n            }],\n            model: 'gpt-3.5-turbo'\n          });\n        case 6:\n          completion = _context3.sent;\n          console.log(completion.choices[0]);\n          res.send({\n            result: completion.choices[0],\n            searchText: searchText\n          });\n        case 9:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}())];\nvar count_all = express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee4(req, res, next) {\n    var _charges$data, _balance$available, _findGBPBalance$amoun;\n    var todayDate, sixMonthsFromToday, _yield$Promise$all, _yield$Promise$all2, charges, userCount, orderCount, balance, orders, getOrdersByMonth, todayAmount, findGBPBalance, amount;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          todayDate = dayjs__WEBPACK_IMPORTED_MODULE_14___default()().endOf('day').unix();\n          sixMonthsFromToday = dayjs__WEBPACK_IMPORTED_MODULE_14___default()().subtract(6, 'month').startOf('day').toDate();\n          _context4.next = 4;\n          return Promise.all([stripe.charges.search({\n            query: \"created>\".concat(todayDate)\n          }), _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].countDocuments(), _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].countDocuments(), stripe.balance.retrieve(), _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].find().populate('items.product').sort({\n            createdAt: -1,\n            _id: 1\n          }).limit(5).exec(), _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].aggregate([{\n            $match: {\n              // status: {\n              //   $in: ['received', 'shipped', 'delivered'],\n              // },\n              createdAt: {\n                $gte: sixMonthsFromToday\n              }\n            }\n          }, {\n            $group: {\n              _id: {\n                $month: '$createdAt'\n              },\n              total: {\n                $sum: '$transaction_cost.total'\n              },\n              numOfOrders: {\n                $sum: 1\n              }\n            }\n          }, {\n            $sort: {\n              _id: 1\n            }\n          }]).exec()]);\n        case 4:\n          _yield$Promise$all = _context4.sent;\n          _yield$Promise$all2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_yield$Promise$all, 6);\n          charges = _yield$Promise$all2[0];\n          userCount = _yield$Promise$all2[1];\n          orderCount = _yield$Promise$all2[2];\n          balance = _yield$Promise$all2[3];\n          orders = _yield$Promise$all2[4];\n          getOrdersByMonth = _yield$Promise$all2[5];\n          todayAmount = charges === null || charges === void 0 || (_charges$data = charges.data) === null || _charges$data === void 0 ? void 0 : _charges$data.reduce(function (accumulater, charge) {\n            return accumulater += charge === null || charge === void 0 ? void 0 : charge.amount;\n          }, 0);\n          findGBPBalance = balance === null || balance === void 0 || (_balance$available = balance.available) === null || _balance$available === void 0 ? void 0 : _balance$available.find(function (item) {\n            return item.currency == 'gbp';\n          });\n          amount = findGBPBalance === null || findGBPBalance === void 0 || (_findGBPBalance$amoun = findGBPBalance.amount) === null || _findGBPBalance$amoun === void 0 ? void 0 : _findGBPBalance$amoun.toString();\n          res.status(200).json({\n            userCount: userCount,\n            orderCount: orderCount,\n            todayAmount: (todayAmount / 100).toFixed(2),\n            balance: (amount / 100).toFixed(2),\n            orders: orders,\n            getOrdersByMonth: getOrdersByMonth\n          });\n        case 16:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x10, _x11, _x12) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nvar adminLogin = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('email').custom( /*#__PURE__*/function () {\n  var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee5(email, _ref6) {\n    var req, findUser;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          req = _ref6.req;\n          _context5.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            email: email\n          });\n        case 3:\n          findUser = _context5.sent;\n          if (findUser) {\n            _context5.next = 6;\n            break;\n          }\n          throw new Error(\"User doesn't exists.\");\n        case 6:\n          if (!((findUser === null || findUser === void 0 ? void 0 : findUser.adminAccess) != true)) {\n            _context5.next = 8;\n            break;\n          }\n          throw new Error('User does not have admin access.');\n        case 8:\n          req.password = findUser.password;\n          return _context5.abrupt(\"return\", true);\n        case 10:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function (_x13, _x14) {\n    return _ref7.apply(this, arguments);\n  };\n}()), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('password').trim().escape().custom( /*#__PURE__*/function () {\n  var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee6(value, _ref8) {\n    var req, match;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          req = _ref8.req;\n          if (!req.password) {\n            _context6.next = 7;\n            break;\n          }\n          _context6.next = 4;\n          return bcryptjs__WEBPACK_IMPORTED_MODULE_8___default().compare(value, req.password);\n        case 4:\n          match = _context6.sent;\n          if (match) {\n            _context6.next = 7;\n            break;\n          }\n          throw new Error('password doesnt match.');\n        case 7:\n          return _context6.abrupt(\"return\", true);\n        case 8:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function (_x15, _x16) {\n    return _ref9.apply(this, arguments);\n  };\n}()), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref10 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee7(req, res, next) {\n    var _req$body2, email, password, result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _req$body2 = req.body, email = _req$body2.email, password = _req$body2.password;\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(function (_ref11) {\n            var msg = _ref11.msg;\n            return msg;\n          });\n          if (result.isEmpty()) {\n            _context7.next = 4;\n            break;\n          }\n          return _context7.abrupt(\"return\", res.status(404).send({\n            success: false,\n            error: result.mapped()\n          }));\n        case 4:\n          passport__WEBPACK_IMPORTED_MODULE_11___default().authenticate('local', function (err, user, info) {\n            if (err) {\n              next(err);\n            }\n            if (!user) {\n              return res.status(400).send({\n                password: 'The password is invalid. Please try again.'\n              });\n            }\n            if ((user === null || user === void 0 ? void 0 : user.adminAccess) != true) {\n              return res.status(400).send({\n                email: 'User does not have admin access.'\n              });\n            }\n            req.logIn(user, function (error) {\n              if (error) {\n                return next(err);\n              }\n              _utils_logger_js__WEBPACK_IMPORTED_MODULE_28__[\"default\"].info(\"admin User \".concat(user._id, \" logged in successfully\"));\n              return res.redirect(303, '/api/user/check');\n            });\n          })(req, res, next);\n          // res.status(200).send({ success: true, msg: 'login in successfully' });\n        case 5:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref10.apply(this, arguments);\n  };\n}())];\nvar getAllUsers = express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref12 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee8(req, res, next) {\n    var users;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find({});\n        case 2:\n          users = _context8.sent;\n          res.status(200).send(users);\n        case 4:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return function (_x20, _x21, _x22) {\n    return _ref12.apply(this, arguments);\n  };\n}());\nvar getSingleOrder = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('id').escape().trim().toUpperCase(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref13 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee9(req, res, next) {\n    var id, order, charge;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          id = req.params.id;\n          _context9.next = 3;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findOne({\n            _id: id\n          }, null, {\n            populate: {\n              path: 'items.product customer',\n              select: 'tittle _id images firstName lastName email title'\n            },\n            lean: {\n              toObject: true\n            }\n          });\n        case 3:\n          order = _context9.sent;\n          if (order) {\n            _context9.next = 6;\n            break;\n          }\n          return _context9.abrupt(\"return\", res.status(404).send({\n            msg: 'Order not found.',\n            success: false\n          }));\n        case 6:\n          if (!lodash__WEBPACK_IMPORTED_MODULE_31___default().get(order, 'charge_id')) {\n            _context9.next = 11;\n            break;\n          }\n          _context9.next = 9;\n          return stripe.charges.retrieve(order.charge_id);\n        case 9:\n          charge = _context9.sent;\n          lodash__WEBPACK_IMPORTED_MODULE_31___default().set(order, 'refund.amount', charge.amount_refunded / 100);\n          // _.set(order, 'refund.data', charge);\n        case 11:\n          res.status(200).send({\n            order: order,\n            success: true\n          });\n        case 12:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return function (_x23, _x24, _x25) {\n    return _ref13.apply(this, arguments);\n  };\n}())];\nvar shipOrder = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('courier', 'Select a courier').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('tracking_number', 'Invalid Tracking Number').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('dispatch_date', 'Select a Dispatch Date').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('note').escape().trim(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref14 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee10(req, res, next) {\n    var _order$customer;\n    var id, _req$body3, preview, dispatch_date, errors, orderInfo, arrays, findMinStartDate, findMaxEndDate, shippedObj, order, emailHtml, mailOptions, sendEmail, responseObject;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          id = req.params.id;\n          _req$body3 = req.body, preview = _req$body3.preview, dispatch_date = _req$body3.dispatch_date;\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(function (_ref15) {\n            var msg = _ref15.msg;\n            return msg;\n          });\n          if (!(!errors.isEmpty() && !preview)) {\n            _context10.next = 5;\n            break;\n          }\n          return _context10.abrupt(\"return\", res.status(400).send(errors.mapped()));\n        case 5:\n          _context10.next = 7;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findById(id, null, {\n            populate: 'customer',\n            lean: {\n              toObject: true\n            },\n            \"new\": true\n          });\n        case 7:\n          orderInfo = _context10.sent;\n          arrays = {\n            start: [],\n            end: []\n          };\n          orderInfo.itemsByProfile.forEach(function (_ref16) {\n            var shippingInfo = _ref16.shippingInfo;\n            var _$get = lodash__WEBPACK_IMPORTED_MODULE_31___default().get(shippingInfo, 'processing_time'),\n              start = _$get.start,\n              end = _$get.end,\n              type = _$get.type;\n            var startDate = dayjs__WEBPACK_IMPORTED_MODULE_14___default()(dispatch_date).add(start, type.slice(0, -1));\n            var endDate = dayjs__WEBPACK_IMPORTED_MODULE_14___default()(dispatch_date).add(end, type.slice(0, -1));\n            arrays.start.push(startDate);\n            arrays.end.push(endDate);\n          });\n          findMinStartDate = dayjs__WEBPACK_IMPORTED_MODULE_14___default().min(arrays.start).endOf('day').toISOString();\n          findMaxEndDate = dayjs__WEBPACK_IMPORTED_MODULE_14___default().max(arrays.end).endOf('day').toISOString();\n          console.log({\n            findMinStartDate: findMinStartDate,\n            findMaxEndDate: findMaxEndDate\n          });\n          shippedObj = _objectSpread(_objectSpread({}, req.body), {}, {\n            max_delivery_date: findMaxEndDate,\n            min_delivery_date: findMinStartDate\n          });\n          if (!preview) {\n            _context10.next = 17;\n            break;\n          }\n          res.status(200).send({\n            success: true,\n            html: (0,_react_email_render__WEBPACK_IMPORTED_MODULE_18__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17__.createElement(_React_Email_emails_orderShipped_jsx__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n              order: _objectSpread(_objectSpread({}, orderInfo), {}, {\n                shipped: shippedObj\n              }),\n              preview: true\n            }))\n          });\n          return _context10.abrupt(\"return\");\n        case 17:\n          _context10.next = 19;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findOneAndUpdate({\n            _id: id\n          }, {\n            shipped: shippedObj,\n            status: 'shipped'\n            // ...req.body,\n            // ship_date: new Date(),\n            // 'shipping_option.delivery_date': newDeliveryDate,\n          }, {\n            populate: {\n              path: 'items.product customer'\n            },\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          }).exec();\n        case 19:\n          order = _context10.sent;\n          emailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_18__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17__.createElement(_React_Email_emails_orderShipped_jsx__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n            order: order\n          }));\n          mailOptions = {\n            from: SENDER,\n            to: order === null || order === void 0 || (_order$customer = order.customer) === null || _order$customer === void 0 ? void 0 : _order$customer.email,\n            subject: 'Your order’s on its way!',\n            html: emailHtml\n          };\n          _context10.next = 24;\n          return _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"].sendMail(mailOptions);\n        case 24:\n          sendEmail = _context10.sent;\n          responseObject = {\n            success: true,\n            msg: 'order shipped email sent'\n          };\n          res.send({\n            success: true,\n            msg: 'order shipped email sent'\n          });\n        case 27:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee10);\n  }));\n  return function (_x26, _x27, _x28) {\n    return _ref14.apply(this, arguments);\n  };\n}())];\nvar mark_as_gift = [express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref17 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee11(req, res, next) {\n    var id, _req$body4;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee11$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          id = req.body.id;\n          if (!(id.length > 1)) {\n            _context11.next = 6;\n            break;\n          }\n          _context11.next = 4;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].updateMany({\n            _id: id\n          }, [{\n            $set: {\n              mark_as_gift: req.body.mark_as_gift\n            }\n          }]);\n        case 4:\n          _context11.next = 8;\n          break;\n        case 6:\n          _context11.next = 8;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findByIdAndUpdate(id[0], [{\n            $set: {\n              mark_as_gift: {\n                $not: '$mark_as_gift'\n              }\n            }\n          }]);\n        case 8:\n          if (!(id.length == 1)) {\n            _context11.next = 12;\n            break;\n          }\n          return _context11.abrupt(\"return\", res.redirect(\"/api/admin/order/\".concat(id)));\n        case 12:\n          res.send({\n            success: true,\n            msg: \"Orders status updated to \".concat((_req$body4 = req.body) === null || _req$body4 === void 0 ? void 0 : _req$body4.mark_as_gift),\n            updateOrderInfo: false\n          });\n        case 13:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee11);\n  }));\n  return function (_x29, _x30, _x31) {\n    return _ref17.apply(this, arguments);\n  };\n}())];\nvar cancelOrder = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('reason', 'Choose a reason').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('returning_items', 'Choose an answer').escape().trim().notEmpty().toBoolean(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('message_to_buyer', 'Keep note below 500 characters').escape().trim().isLength({\n  max: 500\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('id').escape().trim(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('cancel_order').escape().trim().toBoolean(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref18 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee12(req, res, next) {\n    var _updateOrder$customer;\n    var cancel_order, id, errors, date, updateObj, statusObject, order, _req$body5, refundObj, refund, updateOrder, emailHtml, mailOptions, sendEmail;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee12$(_context12) {\n      while (1) switch (_context12.prev = _context12.next) {\n        case 0:\n          cancel_order = req.body.cancel_order;\n          id = req.params.id;\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(function (_ref19) {\n            var msg = _ref19.msg;\n            return msg;\n          });\n          if (errors.isEmpty()) {\n            _context12.next = 5;\n            break;\n          }\n          return _context12.abrupt(\"return\", res.status(400).send(errors.mapped()));\n        case 5:\n          date = dayjs__WEBPACK_IMPORTED_MODULE_14___default()().toDate();\n          updateObj = {\n            cancel: _objectSpread(_objectSpread({}, req.body), {}, {\n              date: date\n            }),\n            completed_date: date\n          };\n          statusObject = {};\n          if (cancel_order) {\n            statusObject.status = 'cancelled';\n          }\n          _context12.next = 11;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findOneAndUpdate({\n            _id: id\n          }, _objectSpread({}, statusObject), {\n            populate: {\n              path: 'items.product customer'\n            },\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          }).exec();\n        case 11:\n          order = _context12.sent;\n          if (!(order !== null && order !== void 0 && order.payment_intent_id)) {\n            _context12.next = 19;\n            break;\n          }\n          refundObj = {\n            payment_intent: order.payment_intent_id,\n            metadata: _objectSpread(_objectSpread({}, req.body), {}, {\n              order_id: order._id\n            })\n          };\n          if ((_req$body5 = req.body) !== null && _req$body5 !== void 0 && _req$body5.charge) {\n            refundObj.amount = parseFloat(req.body.charge) * 100;\n          }\n          _context12.next = 17;\n          return stripe.refunds.create(refundObj);\n        case 17:\n          refund = _context12.sent;\n          updateObj['$push'] = {\n            'refund.id': refund.id\n          };\n\n          // await Order.findByIdAndUpdate(\n          //   id,\n          //   {\n          //     $push: { 'refund.id': refund.id },\n          //   },\n          //   { new: true, useFindAndModify: false },\n          // );\n        case 19:\n          _context12.next = 21;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findOneAndUpdate({\n            _id: id\n          }, updateObj, {\n            populate: {\n              path: 'items.product customer'\n            },\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          }).exec();\n        case 21:\n          updateOrder = _context12.sent;\n          emailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_18__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17__.createElement(_React_Email_emails_orderCancelled_jsx__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n            order: updateOrder\n          }));\n          mailOptions = {\n            from: SENDER,\n            to: updateOrder === null || updateOrder === void 0 || (_updateOrder$customer = updateOrder.customer) === null || _updateOrder$customer === void 0 ? void 0 : _updateOrder$customer.email,\n            subject: 'Your GLAMO order has been cancelled',\n            html: emailHtml\n          };\n          _context12.next = 26;\n          return _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"].sendMail(mailOptions);\n        case 26:\n          sendEmail = _context12.sent;\n          res.send({\n            success: true\n          });\n        case 28:\n        case \"end\":\n          return _context12.stop();\n      }\n    }, _callee12);\n  }));\n  return function (_x32, _x33, _x34) {\n    return _ref18.apply(this, arguments);\n  };\n}())];\n// ----------------------------------------------------\nvar updateOrder = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('courier', 'Select a courier').trim().escape().custom(function (value, _ref20) {\n  var _req$body6;\n  var req = _ref20.req;\n  if (((_req$body6 = req.body) === null || _req$body6 === void 0 ? void 0 : _req$body6.status) == 'shipped') {\n    if (value.length < 3) {\n      return false;\n    }\n  }\n  return true;\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('trackingNumber', 'Invalid Tracking Number').trim().escape().custom(function (value, _ref21) {\n  var _req$body7;\n  var req = _ref21.req;\n  if (((_req$body7 = req.body) === null || _req$body7 === void 0 ? void 0 : _req$body7.status) == 'shipped') {\n    if (value.length < 12) {\n      return false;\n    }\n  }\n  return true;\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('status', 'Please select an available option.').trim().escape().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref22 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee13(req, res, next) {\n    var id, results, _req$body8, trackingNumber, courier, status, _oldOrderInfo$shippin, _oldOrderInfo$shippin2, _oldOrderInfo$shippin3, _order$customer2, oldOrderInfo, addUnit, newDeliveryDate, order, emailHtml, mailOptions, sendEmail, _order$customer3, _order, refund, _emailHtml, _mailOptions, _sendEmail, _order2$customer, _order2, _refund, _emailHtml2, _mailOptions2, _sendEmail2;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee13$(_context13) {\n      while (1) switch (_context13.prev = _context13.next) {\n        case 0:\n          id = req.params.id;\n          results = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(function (_ref23) {\n            var msg = _ref23.msg;\n            return msg;\n          });\n          if (results.isEmpty()) {\n            _context13.next = 4;\n            break;\n          }\n          return _context13.abrupt(\"return\", res.status(400).send({\n            error: results.mapped()\n          }));\n        case 4:\n          _req$body8 = req.body, trackingNumber = _req$body8.trackingNumber, courier = _req$body8.courier, status = _req$body8.status;\n          if (!(status === 'shipped')) {\n            _context13.next = 19;\n            break;\n          }\n          _context13.next = 8;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findById(id, null, {\n            lean: {\n              toObject: true\n            },\n            \"new\": true\n          });\n        case 8:\n          oldOrderInfo = _context13.sent;\n          addUnit = oldOrderInfo === null || oldOrderInfo === void 0 || (_oldOrderInfo$shippin = oldOrderInfo.shipping_option) === null || _oldOrderInfo$shippin === void 0 || (_oldOrderInfo$shippin = _oldOrderInfo$shippin.type) === null || _oldOrderInfo$shippin === void 0 ? void 0 : _oldOrderInfo$shippin.substring(0, (oldOrderInfo === null || oldOrderInfo === void 0 || (_oldOrderInfo$shippin2 = oldOrderInfo.shipping_option) === null || _oldOrderInfo$shippin2 === void 0 || (_oldOrderInfo$shippin2 = _oldOrderInfo$shippin2.type) === null || _oldOrderInfo$shippin2 === void 0 ? void 0 : _oldOrderInfo$shippin2.length) - 1);\n          newDeliveryDate = dayjs__WEBPACK_IMPORTED_MODULE_14___default()().add(oldOrderInfo === null || oldOrderInfo === void 0 || (_oldOrderInfo$shippin3 = oldOrderInfo.shipping_option) === null || _oldOrderInfo$shippin3 === void 0 ? void 0 : _oldOrderInfo$shippin3.time, addUnit).format('dddd, D MMMM, YYYY');\n          _context13.next = 13;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findOneAndUpdate({\n            _id: id\n          }, _objectSpread(_objectSpread({}, req.body), {}, {\n            ship_date: new Date(),\n            'shipping_option.delivery_date': newDeliveryDate\n          }), {\n            populate: {\n              path: 'items.product customer'\n            },\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          }).exec();\n        case 13:\n          order = _context13.sent;\n          emailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_18__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17__.createElement(_React_Email_emails_orderShipped_jsx__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n            order: order\n          }));\n          mailOptions = {\n            from: SENDER,\n            to: order === null || order === void 0 || (_order$customer2 = order.customer) === null || _order$customer2 === void 0 ? void 0 : _order$customer2.email,\n            subject: 'Your order’s on its way!',\n            html: emailHtml\n          };\n          _context13.next = 18;\n          return _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"].sendMail(mailOptions);\n        case 18:\n          sendEmail = _context13.sent;\n        case 19:\n          if (!(status === 'cancelled')) {\n            _context13.next = 35;\n            break;\n          }\n          _context13.next = 22;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findOneAndUpdate({\n            _id: id\n          }, {\n            status: status,\n            cancel_date: new Date()\n          }, {\n            populate: {\n              path: 'items.product customer'\n            },\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          }).exec();\n        case 22:\n          _order = _context13.sent;\n          if (!(_order !== null && _order !== void 0 && _order.payment_intent_id)) {\n            _context13.next = 30;\n            break;\n          }\n          _context13.next = 26;\n          return stripe.refunds.create({\n            payment_intent: _order === null || _order === void 0 ? void 0 : _order.payment_intent_id\n          });\n        case 26:\n          refund = _context13.sent;\n          _context13.next = 29;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findByIdAndUpdate(id, {\n            refund_id: refund.id\n          });\n        case 29:\n          console.log({\n            refund: refund\n          });\n        case 30:\n          _emailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_18__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17__.createElement(_React_Email_emails_orderCancelled_jsx__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n            order: _order\n          }));\n          _mailOptions = {\n            from: SENDER,\n            to: _order === null || _order === void 0 || (_order$customer3 = _order.customer) === null || _order$customer3 === void 0 ? void 0 : _order$customer3.email,\n            subject: 'Your GLAMO order has been cancelled',\n            html: _emailHtml\n          };\n          _context13.next = 34;\n          return _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"].sendMail(_mailOptions);\n        case 34:\n          _sendEmail = _context13.sent;\n        case 35:\n          if (!(status == 'returned')) {\n            _context13.next = 51;\n            break;\n          }\n          _context13.next = 38;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findOneAndUpdate({\n            _id: id\n          }, {\n            status: status,\n            return_date: new Date()\n          }, {\n            populate: {\n              path: 'items.product customer'\n            },\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          }).exec();\n        case 38:\n          _order2 = _context13.sent;\n          if (!(_order2 !== null && _order2 !== void 0 && _order2.payment_intent_id)) {\n            _context13.next = 46;\n            break;\n          }\n          _context13.next = 42;\n          return stripe.refunds.create({\n            payment_intent: _order2 === null || _order2 === void 0 ? void 0 : _order2.payment_intent_id\n          });\n        case 42:\n          _refund = _context13.sent;\n          _context13.next = 45;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].findByIdAndUpdate(id, {\n            refund_id: _refund.id\n          });\n        case 45:\n          console.log({\n            refund: _refund\n          });\n        case 46:\n          _emailHtml2 = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_18__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17__.createElement(_React_Email_emails_returnOrder_jsx__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n            order: _order2\n          }));\n          _mailOptions2 = {\n            from: SENDER,\n            to: _order2 === null || _order2 === void 0 || (_order2$customer = _order2.customer) === null || _order2$customer === void 0 ? void 0 : _order2$customer.email,\n            subject: 'Your refund is on its way! 💸',\n            html: _emailHtml2\n          };\n          _context13.next = 50;\n          return _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"].sendMail(_mailOptions2);\n        case 50:\n          _sendEmail2 = _context13.sent;\n        case 51:\n          // res.status(302).redirect('/api/admin/orders');\n          res.status(200).send({\n            success: true,\n            msg: 'order successfully updated!'\n          });\n        case 52:\n        case \"end\":\n          return _context13.stop();\n      }\n    }, _callee13);\n  }));\n  return function (_x35, _x36, _x37) {\n    return _ref22.apply(this, arguments);\n  };\n}())];\nvar exportPdf = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('ids').escape(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('printChecks.packing_slip.checks.note.text').trim(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref24 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee15(req, res, next) {\n    var _printChecks$packing_, _printChecks$packing_2;\n    var _req$body9, ids, printChecks, orders, sortedOrders, _printChecks$packing_3, coupon, title, generateStream, pdfStream, sendToS3;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee15$(_context15) {\n      while (1) switch (_context15.prev = _context15.next) {\n        case 0:\n          _req$body9 = req.body, ids = _req$body9.ids, printChecks = _req$body9.printChecks;\n          console.log({\n            ids: ids,\n            printChecks: (_printChecks$packing_ = printChecks.packing_slip.checks) === null || _printChecks$packing_ === void 0 ? void 0 : _printChecks$packing_.note\n          });\n          if (!(ids.length < 1 || _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(ids) != 'object')) {\n            _context15.next = 4;\n            break;\n          }\n          return _context15.abrupt(\"return\", res.status(400).send({\n            success: false\n          }));\n        case 4:\n          _context15.next = 6;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].find({\n            _id: {\n              $in: ids\n            }\n          }, null, {\n            populate: {\n              path: 'items.product customer',\n              select: 'tittle _id images firstName lastName email title'\n            },\n            lean: {\n              toObject: true\n            }\n          });\n        case 6:\n          orders = _context15.sent;\n          if (!(orders.length < 1)) {\n            _context15.next = 9;\n            break;\n          }\n          return _context15.abrupt(\"return\", res.status(400).send({\n            success: false\n          }));\n        case 9:\n          sortedOrders = orders === null || orders === void 0 ? void 0 : orders.sort(function (a, b) {\n            return ids.indexOf(a === null || a === void 0 ? void 0 : a._id) - ids.indexOf(b === null || b === void 0 ? void 0 : b._id);\n          });\n          if (!((_printChecks$packing_2 = printChecks.packing_slip.checks) !== null && _printChecks$packing_2 !== void 0 && _printChecks$packing_2.coupon)) {\n            _context15.next = 15;\n            break;\n          }\n          _context15.next = 13;\n          return _Models_coupon_js__WEBPACK_IMPORTED_MODULE_26__[\"default\"].findById((_printChecks$packing_3 = printChecks.packing_slip.checks) === null || _printChecks$packing_3 === void 0 ? void 0 : _printChecks$packing_3.coupon, null, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 13:\n          coupon = _context15.sent;\n          printChecks.packing_slip.checks.coupon = coupon;\n        case 15:\n          title = randomstring__WEBPACK_IMPORTED_MODULE_25___default().generate({\n            length: 12,\n            charset: 'numeric'\n          });\n          generateStream = /*#__PURE__*/function () {\n            var _ref25 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee14() {\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee14$(_context14) {\n                while (1) switch (_context14.prev = _context14.next) {\n                  case 0:\n                    _context14.next = 2;\n                    return (0,_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_22__.renderToStream)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17__.createElement(_pdf_pdf_jsx__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n                      orders: sortedOrders,\n                      title: title,\n                      printChecks: printChecks\n                    }));\n                  case 2:\n                    return _context14.abrupt(\"return\", _context14.sent);\n                  case 3:\n                  case \"end\":\n                    return _context14.stop();\n                }\n              }, _callee14);\n            }));\n            return function generateStream() {\n              return _ref25.apply(this, arguments);\n            };\n          }();\n          _context15.next = 19;\n          return generateStream();\n        case 19:\n          pdfStream = _context15.sent;\n          _context15.next = 22;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_24__.s3PdfUpload)({\n            pdfStream: pdfStream,\n            fileName: \"\".concat(title, \".pdf\")\n          });\n        case 22:\n          sendToS3 = _context15.sent;\n          res.status(200).send({\n            success: true,\n            s3Data: sendToS3,\n            id: req.user._id,\n            file: title\n          });\n        case 24:\n        case \"end\":\n          return _context15.stop();\n      }\n    }, _callee15);\n  }));\n  return function (_x38, _x39, _x40) {\n    return _ref24.apply(this, arguments);\n  };\n}())];\nvar generatePresignUrl = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('file').trim().escape(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref26 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee16(req, res, next) {\n    var url;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee16$(_context16) {\n      while (1) switch (_context16.prev = _context16.next) {\n        case 0:\n          _context16.next = 2;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_24__.generateSignedUrl)(\"files/pdf/\".concat(req.body.file));\n        case 2:\n          url = _context16.sent;\n          console.log({\n            url: url\n          });\n          return _context16.abrupt(\"return\", res.send({\n            url: url\n          }));\n        case 5:\n        case \"end\":\n          return _context16.stop();\n      }\n    }, _callee16);\n  }));\n  return function (_x41, _x42, _x43) {\n    return _ref26.apply(this, arguments);\n  };\n}())];\nvar testPdf = express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref27 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee18(req, res, next) {\n    var _printChecks$packing_4;\n    var ids, printChecks, _printChecks$packing_5, coupon, orders, generateStream, pdfStream;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee18$(_context18) {\n      while (1) switch (_context18.prev = _context18.next) {\n        case 0:\n          ids = ['DFI4DI7Q7CC5', '5NOBSKQULCUG'];\n          printChecks = {\n            packing_slip: {\n              on: true,\n              checks: {\n                shop_icon: 'shop_icon',\n                dispatch_from: true,\n                cost_breakdown: true,\n                listing_photos: true,\n                note: 'thank you so much',\n                coupon: '6543b7af2fb500ba3f634f73',\n                note_from_buyer: 'Hello, the name I have given is in Kevin. I hope you can do that. If not please let me know. Thanks'\n              }\n            },\n            order_receipt: {\n              on: true,\n              checks: {\n                shop_icon: 'order_receipt_banner'\n              }\n            }\n          };\n          if (!((_printChecks$packing_4 = printChecks.packing_slip.checks) !== null && _printChecks$packing_4 !== void 0 && _printChecks$packing_4.coupon)) {\n            _context18.next = 7;\n            break;\n          }\n          _context18.next = 5;\n          return _Models_coupon_js__WEBPACK_IMPORTED_MODULE_26__[\"default\"].findById((_printChecks$packing_5 = printChecks.packing_slip.checks) === null || _printChecks$packing_5 === void 0 ? void 0 : _printChecks$packing_5.coupon, null, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 5:\n          coupon = _context18.sent;\n          printChecks.packing_slip.checks.coupon = coupon;\n        case 7:\n          _context18.next = 9;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].find({\n            _id: {\n              $in: ids\n            }\n          }, null, {\n            populate: {\n              path: 'items.product customer',\n              select: 'tittle _id images firstName lastName email title'\n            },\n            lean: {\n              toObject: true\n            }\n          });\n        case 9:\n          orders = _context18.sent;\n          res.setHeader('Content-Type', 'application/pdf');\n          generateStream = /*#__PURE__*/function () {\n            var _ref28 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee17() {\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee17$(_context17) {\n                while (1) switch (_context17.prev = _context17.next) {\n                  case 0:\n                    _context17.next = 2;\n                    return (0,_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_22__.renderToStream)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17__.createElement(_pdf_pdf_jsx__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n                      orders: orders,\n                      title: 'test',\n                      printChecks: printChecks\n                    }));\n                  case 2:\n                    return _context17.abrupt(\"return\", _context17.sent);\n                  case 3:\n                  case \"end\":\n                    return _context17.stop();\n                }\n              }, _callee17);\n            }));\n            return function generateStream() {\n              return _ref28.apply(this, arguments);\n            };\n          }();\n          _context18.next = 14;\n          return generateStream();\n        case 14:\n          pdfStream = _context18.sent;\n          pdfStream.pipe(res);\n        case 16:\n        case \"end\":\n          return _context18.stop();\n      }\n    }, _callee18);\n  }));\n  return function (_x44, _x45, _x46) {\n    return _ref27.apply(this, arguments);\n  };\n}());\n\n// search orders\n\nvar searchOrder = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('searchText', 'Enter a value to search for.').trim('#').trim().escape().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref29 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee19(req, res, next) {\n    var _req$body10, searchText, limit, page, objectId, errors, should, _objectId, searchStage, skip_limit_stage, _yield$Promise$all3, _yield$Promise$all4, totalCountResult, searchResult, totalCount;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee19$(_context19) {\n      while (1) switch (_context19.prev = _context19.next) {\n        case 0:\n          _req$body10 = req.body, searchText = _req$body10.searchText, limit = _req$body10.limit, page = _req$body10.page;\n          objectId = null;\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(function (_ref30) {\n            var msg = _ref30.msg;\n            return msg;\n          });\n          if (errors.isEmpty()) {\n            _context19.next = 5;\n            break;\n          }\n          return _context19.abrupt(\"return\", res.send({\n            searchResult: [],\n            searchText: searchText,\n            totalCount: 0,\n            // pageCount,\n            page: 1,\n            maxPage: 1,\n            errors: errors.mapped()\n          }));\n        case 5:\n          should = [{\n            autocomplete: {\n              query: searchText,\n              path: 'shipping_address.name'\n            }\n          }, {\n            text: {\n              query: searchText,\n              path: '_id'\n            }\n          }];\n          try {\n            _objectId = new (mongoose__WEBPACK_IMPORTED_MODULE_27___default().Types).ObjectId(searchText);\n            should.push({\n              equals: {\n                value: _objectId,\n                path: 'customer'\n              }\n            });\n          } catch (error) {}\n          searchStage = {\n            $search: {\n              index: 'orders_search_index',\n              compound: {\n                should: should\n              }\n            }\n          };\n          skip_limit_stage = [{\n            $skip: (page - 1) * limit\n          }, {\n            $limit: limit\n          }];\n          _context19.next = 11;\n          return Promise.all([_Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].aggregate([searchStage, {\n            $count: 'totalCount'\n          }]),\n          // Order.aggregate([\n          //   searchStage,\n          //   ...skip_limit_stage,\n          //   { $count: 'pageCount' },\n          // ]),\n          _Models_order_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].aggregate([searchStage].concat(skip_limit_stage, [{\n            $unwind: '$items'\n          }, {\n            $lookup: {\n              from: 'products',\n              localField: 'items.product',\n              foreignField: '_id',\n              as: 'productLookup',\n              pipeline: [{\n                $project: {\n                  variations: 0,\n                  reviews: 0,\n                  detail: 0,\n                  category: 0,\n                  gender: 0,\n                  price: 0,\n                  delivery: 0,\n                  stock: 0\n                }\n              }]\n            }\n          }, {\n            $addFields: {\n              'items.product': {\n                $arrayElemAt: ['$productLookup', 0]\n              }\n            }\n          }, {\n            $unset: 'productLookup'\n          }, {\n            $group: {\n              _id: '$_id',\n              itemsArray: {\n                $push: '$items'\n              },\n              doc: {\n                $first: '$$ROOT'\n              }\n            }\n          }, {\n            $replaceRoot: {\n              newRoot: {\n                $mergeObjects: ['$doc', {\n                  items: '$itemsArray'\n                }]\n              }\n            }\n          }, {\n            $lookup: {\n              from: 'users',\n              localField: 'customer',\n              foreignField: '_id',\n              as: 'customer',\n              pipeline: [{\n                $project: {\n                  firstName: 1,\n                  lastName: 1\n                }\n              }]\n            }\n          }, {\n            $replaceWith: {\n              $setField: {\n                field: 'customer',\n                input: '$$ROOT',\n                value: {\n                  $arrayElemAt: ['$customer', 0]\n                }\n              }\n            }\n          }, {\n            $sort: {\n              _id: 1\n            }\n          }\n          // {\n          //   $limit: 5,\n          // },\n          ]))]);\n        case 11:\n          _yield$Promise$all3 = _context19.sent;\n          _yield$Promise$all4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_yield$Promise$all3, 2);\n          totalCountResult = _yield$Promise$all4[0];\n          searchResult = _yield$Promise$all4[1];\n          totalCount = lodash__WEBPACK_IMPORTED_MODULE_31___default().get(totalCountResult, '0.totalCount') || 0;\n          res.status(200).send({\n            searchResult: searchResult,\n            searchText: searchText,\n            totalCount: totalCount,\n            // pageCount,\n            page: page,\n            maxPage: Math.ceil(totalCount / limit)\n          });\n        case 17:\n        case \"end\":\n          return _context19.stop();\n      }\n    }, _callee19);\n  }));\n  return function (_x47, _x48, _x49) {\n    return _ref29.apply(this, arguments);\n  };\n}())];\nvar searchProducts = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('searchText').escape().trim().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref31 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee20(req, res, next) {\n    var _yield$req$query, searchText, errors, result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee20$(_context20) {\n      while (1) switch (_context20.prev = _context20.next) {\n        case 0:\n          _context20.next = 2;\n          return req.query;\n        case 2:\n          _yield$req$query = _context20.sent;\n          searchText = _yield$req$query.searchText;\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req);\n          if (errors.isEmpty()) {\n            _context20.next = 7;\n            break;\n          }\n          return _context20.abrupt(\"return\", res.send({\n            result: [],\n            searchText: searchText\n          }));\n        case 7:\n          _context20.next = 9;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].aggregate([(0,_utils_productSearchStage_jsx__WEBPACK_IMPORTED_MODULE_32__[\"default\"])(searchText)].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()((0,_utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_30__[\"default\"])({\n            stats: true\n          }))));\n        case 9:\n          result = _context20.sent;\n          res.send({\n            result: result,\n            success: true,\n            searchText: searchText\n          });\n        case 11:\n        case \"end\":\n          return _context20.stop();\n      }\n    }, _callee20);\n  }));\n  return function (_x50, _x51, _x52) {\n    return _ref31.apply(this, arguments);\n  };\n}())];\nvar getAllProducts = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('check.featured').trim().escape().toBoolean().optional({\n  checkFalsy: true,\n  \"null\": true,\n  undefined: true\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('checks.sort.title').trim().escape().toInt().optional({\n  checkFalsy: true,\n  \"null\": true,\n  undefined: true\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)(\"checks.sort.['additional_data.stock.total']\").trim().escape().toInt().optional({\n  checkFalsy: true,\n  \"null\": true,\n  undefined: true\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)(\"checks.sort.['additional_data.price.max']\").trim().escape().toInt().optional({\n  checkFalsy: true,\n  \"null\": true,\n  undefined: true\n}), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref32 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee21(req, res, next) {\n    var checks, productPipeline, matchArray, newObjectId, _newObjectId, searchStage, products, allProducts;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee21$(_context21) {\n      while (1) switch (_context21.prev = _context21.next) {\n        case 0:\n          checks = req.body.checks;\n          productPipeline = [{\n            $sort: {\n              _id: 1\n            }\n          }].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()((0,_utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_30__[\"default\"])({\n            stats: true\n          })), [{\n            $set: {\n              status: {\n                $cond: {\n                  \"if\": {\n                    $gt: ['$additional_data.stock.total', 0]\n                  },\n                  then: '$status',\n                  \"else\": 'soldout'\n                }\n              }\n            }\n          }, {\n            $group: {\n              _id: '$status',\n              products: {\n                $push: '$$ROOT'\n              }\n            }\n          }, {\n            $addFields: {\n              products: {\n                $sortArray: {\n                  input: '$products',\n                  sortBy: _objectSpread(_objectSpread({}, checks.sort), {}, {\n                    _id: 1\n                  })\n                }\n              }\n            }\n          }]);\n          matchArray = [];\n          if (checks !== null && checks !== void 0 && checks.category) {\n            try {\n              newObjectId = new (mongoose__WEBPACK_IMPORTED_MODULE_27___default().Types).ObjectId(checks.category);\n              matchArray.push({\n                category: newObjectId\n              });\n            } catch (error) {\n              console.log('error converting category id to objectId', error.message);\n            }\n          }\n          if (checks !== null && checks !== void 0 && checks.featured) {\n            matchArray.push({\n              featured: true\n            });\n          }\n          if (checks !== null && checks !== void 0 && checks.deliveryProfile) {\n            try {\n              _newObjectId = new (mongoose__WEBPACK_IMPORTED_MODULE_27___default().Types).ObjectId(checks.deliveryProfile);\n              matchArray.push({\n                delivery: {\n                  $eq: _newObjectId\n                }\n              });\n            } catch (error) {\n              console.log('error converting deliveryProfile id to objectId', error.message);\n            }\n          }\n          if (matchArray.length > 0) {\n            productPipeline.unshift({\n              $match: {\n                $and: matchArray\n              }\n            });\n          }\n          if (checks !== null && checks !== void 0 && checks.searchText) {\n            searchStage = (0,_utils_productSearchStage_jsx__WEBPACK_IMPORTED_MODULE_32__[\"default\"])(checks.searchText);\n            productPipeline.unshift(searchStage);\n          }\n          _context21.next = 10;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].aggregate(productPipeline).collation({\n            locale: 'en',\n            caseLevel: true\n          }).exec();\n        case 10:\n          products = _context21.sent;\n          allProducts = products.reduce(function (obj, item) {\n            return obj[item._id] = item.products, obj;\n          }, {});\n          res.status(200).send({\n            success: true,\n            products: allProducts\n          });\n        case 13:\n        case \"end\":\n          return _context21.stop();\n      }\n    }, _callee21);\n  }));\n  return function (_x53, _x54, _x55) {\n    return _ref32.apply(this, arguments);\n  };\n}())];\nvar getProductFiles = express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref33 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee23(req, res, next) {\n    var _ref34;\n    var id, result, files;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee23$(_context23) {\n      while (1) switch (_context23.prev = _context23.next) {\n        case 0:\n          id = req.params.id;\n          _context23.next = 3;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_24__.s3Get)(id);\n        case 3:\n          result = _context23.sent;\n          _context23.next = 6;\n          return Promise.all((_ref34 = result || []) === null || _ref34 === void 0 ? void 0 : _ref34.map( /*#__PURE__*/function () {\n            var _ref36 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee22(_ref35) {\n              var data, key, base64String, obj;\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee22$(_context22) {\n                while (1) switch (_context22.prev = _context22.next) {\n                  case 0:\n                    data = _ref35.data, key = _ref35.key;\n                    _context22.next = 3;\n                    return data.Body.transformToString('base64');\n                  case 3:\n                    base64String = _context22.sent;\n                    obj = {\n                      ContentType: data.ContentType,\n                      fileName: key,\n                      ContentLength: data.ContentLength,\n                      buffer: base64String\n                    };\n                    return _context22.abrupt(\"return\", obj);\n                  case 6:\n                  case \"end\":\n                    return _context22.stop();\n                }\n              }, _callee22);\n            }));\n            return function (_x59) {\n              return _ref36.apply(this, arguments);\n            };\n          }()));\n        case 6:\n          files = _context23.sent;\n          res.send({\n            files: files\n          });\n        case 8:\n        case \"end\":\n          return _context23.stop();\n      }\n    }, _callee23);\n  }));\n  return function (_x56, _x57, _x58) {\n    return _ref33.apply(this, arguments);\n  };\n}());\nvar updateProductFeature = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('featured').escape().trim().toBoolean(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('draft').escape().trim().toBoolean(), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref37 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee24(req, res, next) {\n    var id, _req$query, featured, draft, product;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee24$(_context24) {\n      while (1) switch (_context24.prev = _context24.next) {\n        case 0:\n          id = req.params.id;\n          _req$query = req.query, featured = _req$query.featured, draft = _req$query.draft;\n          _context24.next = 4;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].findOneAndUpdate({\n            _id: id\n          }, {\n            featured: featured\n          }, {\n            upsert: false,\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          });\n        case 4:\n          product = _context24.sent;\n          console.log(product === null || product === void 0 ? void 0 : product.featured);\n          res.status(200).send({\n            success: true,\n            featured: product === null || product === void 0 ? void 0 : product.featured\n          });\n        case 7:\n        case \"end\":\n          return _context24.stop();\n      }\n    }, _callee24);\n  }));\n  return function (_x60, _x61, _x62) {\n    return _ref37.apply(this, arguments);\n  };\n}())];\nvar updateStatus = express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref38 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee25(req, res, next) {\n    var _req$body11, productIds, status, products;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee25$(_context25) {\n      while (1) switch (_context25.prev = _context25.next) {\n        case 0:\n          _req$body11 = req.body, productIds = _req$body11.productIds, status = _req$body11.status;\n          _context25.next = 3;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].updateMany({\n            _id: productIds\n          }, {\n            status: status\n          }, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 3:\n          products = _context25.sent;\n          console.log(products);\n          res.send({\n            success: true,\n            msg: \"\".concat(productIds, \" status has been updated\"),\n            count: products.modifiedCount\n          });\n        case 6:\n        case \"end\":\n          return _context25.stop();\n      }\n    }, _callee25);\n  }));\n  return function (_x63, _x64, _x65) {\n    return _ref38.apply(this, arguments);\n  };\n}());\nvar editTitle = [express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref39 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee26(req, res, next) {\n    var _req$body12, selectedOption, productIds, optionData, property, products, updateProducts, promiseResult;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee26$(_context26) {\n      while (1) switch (_context26.prev = _context26.next) {\n        case 0:\n          _req$body12 = req.body, selectedOption = _req$body12.selectedOption, productIds = _req$body12.productIds, optionData = _req$body12.optionData, property = _req$body12.property;\n          _context26.next = 3;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].find({\n            _id: productIds\n          }, {\n            title: 1,\n            description: 1\n          });\n        case 3:\n          products = _context26.sent;\n          updateProducts = products.map(function (product) {\n            var newText = null;\n            var currentValue = product[property];\n            console.log({\n              currentValue: currentValue\n            });\n            if (selectedOption === 'add_to_front') {\n              newText = optionData + currentValue;\n            }\n            if (selectedOption === 'add_to_end') {\n              newText = currentValue + optionData;\n            }\n            if (selectedOption === 'find_and_replace') {\n              if (optionData.replaceAll) {\n                newText = currentValue === null || currentValue === void 0 ? void 0 : currentValue.replaceAll(optionData.find, optionData.replace);\n              } else {\n                newText = currentValue === null || currentValue === void 0 ? void 0 : currentValue.replace(optionData.find, optionData.replace);\n              }\n            }\n            if (selectedOption === 'delete') {\n              newText = currentValue.replace(optionData, '');\n              if (optionData.instance) {\n                newText = currentValue.replaceAll(optionData.text, '');\n              } else {\n                newText = currentValue.replace(optionData.text, '');\n              }\n            }\n            if (selectedOption === 'reset') {\n              newText = optionData;\n            }\n            return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].findByIdAndUpdate({\n              _id: product._id\n            }, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()({}, property, newText.replace(/ {2,}/g, '  ').trim()), {\n              \"new\": true,\n              select: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()({}, property, 1)\n            });\n          });\n          _context26.next = 7;\n          return Promise.all(updateProducts);\n        case 7:\n          promiseResult = _context26.sent;\n          console.log({\n            promiseResult: promiseResult,\n            property: property\n          });\n          res.send({\n            success: true,\n            msg: 'titles updates'\n          });\n        case 10:\n        case \"end\":\n          return _context26.stop();\n      }\n    }, _callee26);\n  }));\n  return function (_x66, _x67, _x68) {\n    return _ref39.apply(this, arguments);\n  };\n}())];\nvar editPrice = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('amount', 'Price must be between £0.17 and £42,933.20').escape().trim().isFloat({\n  min: 0.17,\n  max: 42933.2\n}), express_async_handler__WEBPACK_IMPORTED_MODULE_7___default()( /*#__PURE__*/function () {\n  var _ref40 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee27(req, res, next) {\n    var _req$body13, productIds, selectedOption, amount, result, productsInfo, failedProductIds, eligibleProductID, updateProductPrice, PromiseResult;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee27$(_context27) {\n      while (1) switch (_context27.prev = _context27.next) {\n        case 0:\n          _req$body13 = req.body, productIds = _req$body13.productIds, selectedOption = _req$body13.selectedOption, amount = _req$body13.amount;\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(function (_ref41) {\n            var msg = _ref41.msg;\n            return msg;\n          });\n          if (result !== null && result !== void 0 && result.isEmpty()) {\n            _context27.next = 5;\n            break;\n          }\n          console.log({\n            error: result.mapped()\n          });\n          return _context27.abrupt(\"return\", res.status(400).send(result.mapped()));\n        case 5:\n          _context27.next = 7;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].find({\n            _id: productIds\n          }, {\n            variations: 1,\n            price: 1,\n            images: 1,\n            title: 1\n          }\n          //   { lean: { toJSON: true } },\n          );\n        case 7:\n          productsInfo = _context27.sent;\n          failedProductIds = new Map();\n          eligibleProductID = new Set();\n          updateProductPrice = productsInfo.map(function (product) {\n            var _product$_id;\n            var idString = (_product$_id = product._id) === null || _product$_id === void 0 ? void 0 : _product$_id.toString();\n            try {\n              var isPriceAssorted = false;\n              var variationWithPriceIndex = null;\n              var getNewPrice = function getNewPrice(currentPrice) {\n                var nextCurrentPrice = parseFloat(currentPrice || 0);\n                var parseAmount = parseFloat(amount || 0);\n                if (selectedOption == 'increase_by_amount') {\n                  nextCurrentPrice += parseAmount;\n                }\n                if (selectedOption == 'decrease_by_amount') {\n                  nextCurrentPrice -= parseAmount;\n                }\n                if (selectedOption == 'set_new_amount') {\n                  nextCurrentPrice = parseAmount;\n                }\n                if (selectedOption == 'percentage_increase') {\n                  nextCurrentPrice *= 1 + parseAmount / 100;\n                }\n                if (selectedOption == 'percentage_decrease') {\n                  nextCurrentPrice *= 1 - parseAmount / 100;\n                }\n                // return nextCurrentPrice.toFixed(2)\n                var formatPrice = Math.floor(nextCurrentPrice * 100) / 100;\n                if (formatPrice < 0.17 || formatPrice > 999) {\n                  console.log({\n                    idString: idString,\n                    formatPrice: formatPrice,\n                    status: 'failed'\n                  });\n                  eligibleProductID[\"delete\"](idString);\n                  failedProductIds.set(idString, {\n                    title: product.title,\n                    images: product.images,\n                    msg: formatPrice < 0.17 ? 'Price is below 0.17.' : 'Price is too high.'\n                  });\n                } else {\n                  eligibleProductID.add(idString);\n                }\n                return formatPrice;\n              };\n              var _iterator = _createForOfIteratorHelper(product === null || product === void 0 ? void 0 : product.variations.entries()),\n                _step;\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  var _step$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_step.value, 2),\n                    idx = _step$value[0],\n                    priceHeader = _step$value[1].priceHeader;\n                  if (priceHeader !== null && priceHeader !== void 0 && priceHeader.on) {\n                    isPriceAssorted = true;\n                    variationWithPriceIndex = idx;\n                    break;\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              if (!isPriceAssorted && !failedProductIds.has(idString)) {\n                var _product$price;\n                return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].findByIdAndUpdate({\n                  _id: product._id\n                }, {\n                  price: {\n                    previous: product.price.current,\n                    current: getNewPrice((_product$price = product.price) === null || _product$price === void 0 ? void 0 : _product$price.current)\n                  }\n                });\n              }\n              if (isPriceAssorted) {\n                var _product$variations;\n                var generateVariationPrice = function generateVariationPrice(index) {\n                  var options = product.variations[index].options;\n                  var newOptionsMap = new Map();\n                  var _iterator2 = _createForOfIteratorHelper(options.entries()),\n                    _step2;\n                  try {\n                    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                      var _step2$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_step2.value, 2),\n                        key = _step2$value[0],\n                        value = _step2$value[1];\n                      var newPrice = getNewPrice(value.price);\n                      newOptionsMap.set(key, _objectSpread(_objectSpread({}, value.toObject()), {}, {\n                        price: newPrice\n                      }));\n                      if (newPrice < 0.17 || newPrice > 999) {\n                        break;\n                      }\n                    }\n                  } catch (err) {\n                    _iterator2.e(err);\n                  } finally {\n                    _iterator2.f();\n                  }\n                  if (!failedProductIds.has(idString)) {\n                    return _Models_product_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"].findByIdAndUpdate({\n                      _id: product._id\n                    }, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()({}, \"variations.\".concat(index, \".options\"), newOptionsMap));\n                  }\n                };\n                if (((_product$variations = product.variations) === null || _product$variations === void 0 ? void 0 : _product$variations.length) === 3) {\n                  return generateVariationPrice(2);\n                } else {\n                  return generateVariationPrice(variationWithPriceIndex);\n                }\n              }\n            } catch (error) {\n              console.error(error);\n              failedProductIds.set(idString, {\n                title: product.title,\n                images: product.images,\n                msg: \"Error occured while updating, try again later\"\n              });\n            }\n          });\n          if (!(failedProductIds.size > 0)) {\n            _context27.next = 13;\n            break;\n          }\n          return _context27.abrupt(\"return\", res.status(409).send({\n            success: false,\n            eligibleId: Array.from(eligibleProductID),\n            failedProductIds: Array.from(failedProductIds).map(function (_ref42) {\n              var _ref43 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_ref42, 2),\n                key = _ref43[0],\n                value = _ref43[1];\n              return _objectSpread(_objectSpread({}, value), {}, {\n                id: key\n              });\n            })\n          }));\n        case 13:\n          _context27.next = 15;\n          return Promise.all(updateProductPrice);\n        case 15:\n          PromiseResult = _context27.sent;\n          res.status(200).send({\n            success: true,\n            count: productsInfo === null || productsInfo === void 0 ? void 0 : productsInfo.length,\n            msg: 'products price updated'\n          });\n        case 17:\n        case \"end\":\n          return _context27.stop();\n      }\n    }, _callee27);\n  }));\n  return function (_x69, _x70, _x71) {\n    return _ref40.apply(this, arguments);\n  };\n}())];\n\n//# sourceURL=webpack://server/./Controllers/adminController.js?");

/***/ }),

/***/ "./Controllers/authController.js":
/*!***************************************!*\
  !*** ./Controllers/authController.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! passport */ \"passport\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(passport__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _Models_oAuthUser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Models/oAuthUser */ \"./Models/oAuthUser.js\");\n/* harmony import */ var _utils_userValidators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/userValidators */ \"./utils/userValidators.js\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _Models_user__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Models/user */ \"./Models/user.js\");\n/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../app */ \"./app.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _middleware_checkAuthenticated__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../middleware/checkAuthenticated */ \"./middleware/checkAuthenticated.js\");\n\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_3___default().Router();\nvar _process$env = process.env,\n  CLIENT_URL = _process$env.CLIENT_URL,\n  OAUTH_REGISTRATION_JWT_SECRET = _process$env.OAUTH_REGISTRATION_JWT_SECRET,\n  SALT_ROUNDS = _process$env.SALT_ROUNDS,\n  STRIPE_KEY = _process$env.STRIPE_KEY;\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_14___default()(STRIPE_KEY);\nrouter.get('/login/google', passport__WEBPACK_IMPORTED_MODULE_5___default().authenticate('google'));\nrouter.get('/login/facebook', passport__WEBPACK_IMPORTED_MODULE_5___default().authenticate('facebook'));\nrouter.get('/login/twitter', passport__WEBPACK_IMPORTED_MODULE_5___default().authenticate('twitter'));\nvar authenticateUser = function authenticateUser(provider) {\n  return express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()(function (req, res, next) {\n    var redirectPath = 'portal/redirect';\n    if (req.isAuthenticated()) {\n      redirectPath = 'my-account/social-accounts';\n    }\n    passport__WEBPACK_IMPORTED_MODULE_5___default().authenticate(provider, function (err, user, info) {\n      if (err) {\n        next(err);\n      }\n      if (user) {\n        return req.logIn(user, function (error) {\n          if (error) {\n            return next(err);\n          }\n          return res.redirect(\"\".concat(CLIENT_URL, \"/\").concat(redirectPath));\n        });\n      }\n      console.log({\n        info: info\n      });\n      if (info) {\n        res.redirect(\"\".concat(CLIENT_URL, \"/portal/social-register/finaldetails?signin=\").concat(info));\n      }\n    })(req, res, next);\n  });\n};\nrouter.get('/login/twitter/callback', authenticateUser('twitter'));\nrouter.get('/login/facebook/callback', authenticateUser('facebook'));\nrouter.get('/login/google/callback', authenticateUser('google'));\nrouter.get('/oauth/:id', express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(req, res, next) {\n    var id, value, payload;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          id = req.params.id;\n          value = _app__WEBPACK_IMPORTED_MODULE_12__.myCache.get(id);\n          if (value) {\n            _context.next = 5;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(400).send({\n            error: {\n              general: 'Failed to register your social account as the time to register has passed.'\n            }\n          }));\n        case 5:\n          _context.next = 7;\n          return jsonwebtoken__WEBPACK_IMPORTED_MODULE_10___default().verify(value, OAUTH_REGISTRATION_JWT_SECRET);\n        case 7:\n          payload = _context.sent;\n          res.json({\n            success: true,\n            user: payload\n          });\n          _context.next = 14;\n          break;\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](0);\n          res.status(500).send({\n            error: {\n              general: _context.t0.message\n            }\n          });\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}()));\nrouter.post('/ouath/user', [_utils_userValidators__WEBPACK_IMPORTED_MODULE_8__[\"default\"], express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee2(req, res, next) {\n    var _req$body;\n    var result, salt, hashPassword, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(function (_ref3) {\n            var msg = _ref3.msg;\n            return msg;\n          });\n          console.log(req.body);\n          if (result.isEmpty()) {\n            _context2.next = 4;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(400).send({\n            success: false,\n            error: result.mapped()\n          }));\n        case 4:\n          salt = bcryptjs__WEBPACK_IMPORTED_MODULE_13___default().genSaltSync(parseInt(SALT_ROUNDS));\n          hashPassword = bcryptjs__WEBPACK_IMPORTED_MODULE_13___default().hashSync((_req$body = req.body) === null || _req$body === void 0 ? void 0 : _req$body.password, salt);\n          _context2.next = 8;\n          return _Models_user__WEBPACK_IMPORTED_MODULE_11__[\"default\"].create(_objectSpread(_objectSpread({}, req.body), {}, {\n            password: hashPassword\n          }));\n        case 8:\n          user = _context2.sent;\n          _context2.next = 11;\n          return stripe.customers.create({\n            id: user.id,\n            name: \"\".concat(user.firstName, \" \").concat(user.lastName),\n            email: user.email\n          });\n        case 11:\n          _app__WEBPACK_IMPORTED_MODULE_12__.myCache.del(req.body.key);\n          return _context2.abrupt(\"return\", req.logIn(user, function (error) {\n            if (error) {\n              return next(err);\n            }\n            return res.redirect('/api/user/check');\n          }));\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}())]);\nrouter.post('/oauth/disconnect', [_middleware_checkAuthenticated__WEBPACK_IMPORTED_MODULE_15__.checkAuthenticated, (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('account').trim().escape(), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee3(req, res, next) {\n    var _req$body2;\n    var userId, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          console.log(req.body);\n          userId = req.user._id;\n          _context3.next = 4;\n          return _Models_user__WEBPACK_IMPORTED_MODULE_11__[\"default\"].findOneAndUpdate(userId, {\n            $unset: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({}, \"social_accounts.\".concat((_req$body2 = req.body) === null || _req$body2 === void 0 ? void 0 : _req$body2.account), '')\n          }, {\n            select: {\n              social_accounts: 1\n            },\n            lean: {\n              toObject: true\n            },\n            \"new\": true\n          });\n        case 4:\n          user = _context3.sent;\n          res.status(200).send({\n            success: true,\n            msg: 'account deleted',\n            socialAccounts: user === null || user === void 0 ? void 0 : user.social_accounts\n          });\n        case 6:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref4.apply(this, arguments);\n  };\n}())]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Controllers/authController.js?");

/***/ }),

/***/ "./Controllers/cartController.js":
/*!***************************************!*\
  !*** ./Controllers/cartController.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ generateModelSchemaRoute)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _utils_productAggregateStage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/productAggregateStage */ \"./utils/productAggregateStage.js\");\n/* harmony import */ var _utils_variationFormat_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/variationFormat.js */ \"./utils/variationFormat.js\");\n/* harmony import */ var _utils_cart_wishlist_pipeline_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/cart_wishlist_pipeline.js */ \"./utils/cart_wishlist_pipeline.js\");\n\n\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\nfunction generateModelSchemaRoute(Model, route) {\n  var queryOptions = {\n    \"new\": true,\n    // upsert: true,\n    lean: {\n      toObject: true\n    }\n  };\n  var validator = function validator() {\n    var field = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'body';\n    return [(0,express_validator__WEBPACK_IMPORTED_MODULE_5__.check)('id').trim().escape().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n      var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(req, res, next) {\n        var data, _data;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return Model.findOne({\n                _id: req[field].id\n              });\n            case 3:\n              data = _context.sent;\n              req[field].id = data._id;\n              next();\n              _context.next = 16;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              _context.next = 12;\n              return Model.create({});\n            case 12:\n              _data = _context.sent;\n              console.log({\n                data: _data\n              });\n              req[field].id = _data._id;\n              next();\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n      return function (_x, _x2, _x3) {\n        return _ref.apply(this, arguments);\n      };\n    }())];\n  };\n  var createDocument = [express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee2(req, res, next) {\n      var document;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return Model.create(req.body);\n          case 2:\n            document = _context2.sent;\n            console.log('document created');\n            res.send({\n              msg: 'document created successfully!',\n              _id: document._id\n            });\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function (_x4, _x5, _x6) {\n      return _ref2.apply(this, arguments);\n    };\n  }())];\n  var updateDocument = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(validator('params')), [express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee3(req, res, next) {\n      var id, document;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            id = req.params.id;\n            _context3.next = 3;\n            return Model.findByIdAndUpdate(id, req.body, queryOptions);\n          case 3:\n            document = _context3.sent;\n            res.send(document);\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }));\n    return function (_x7, _x8, _x9) {\n      return _ref3.apply(this, arguments);\n    };\n  }())]);\n  var retrieveDocument = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(validator('params')), [express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee4(req, res, next) {\n      var _findDoc$items;\n      var id, errors, findDoc, newDoc, data, document;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            id = req.params.id;\n            errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_5__.validationResult)(req);\n            console.log({\n              id: id\n            });\n            _context4.next = 5;\n            return Model.findOne({\n              _id: id\n            }, null, queryOptions);\n          case 5:\n            findDoc = _context4.sent;\n            if (findDoc) {\n              _context4.next = 11;\n              break;\n            }\n            _context4.next = 9;\n            return Model.create({});\n          case 9:\n            newDoc = _context4.sent;\n            return _context4.abrupt(\"return\", res.status(200).send(newDoc));\n          case 11:\n            if (!(((_findDoc$items = findDoc.items) === null || _findDoc$items === void 0 ? void 0 : _findDoc$items.length) < 1)) {\n              _context4.next = 13;\n              break;\n            }\n            return _context4.abrupt(\"return\", res.send(findDoc));\n          case 13:\n            console.log('getting Document from id');\n            _context4.next = 16;\n            return Model.aggregate([{\n              $match: {\n                _id: id\n              }\n            }].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(_utils_cart_wishlist_pipeline_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])));\n          case 16:\n            data = _context4.sent;\n            //group the cart item\n            document = _objectSpread(_objectSpread({}, data[0]), {}, {\n              items: (0,_utils_variationFormat_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])({\n                products: data[0].items\n              })\n            }); // const document = data;\n            res.send(document);\n          case 19:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4);\n    }));\n    return function (_x10, _x11, _x12) {\n      return _ref4.apply(this, arguments);\n    };\n  }())]);\n  var removeFromDocument = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(validator('query')), [express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee5(req, res, next) {\n      var _req$query, id, itemId, document;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _req$query = req.query, id = _req$query.id, itemId = _req$query.itemId;\n            _context5.next = 3;\n            return Model.findByIdAndUpdate({\n              _id: id\n            }, {\n              $pull: {\n                items: {\n                  _id: itemId\n                }\n              }\n            }, {\n              \"new\": true\n            });\n          case 3:\n            document = _context5.sent;\n            return _context5.abrupt(\"return\", res.redirect(301, \"/api/\".concat(route, \"/\").concat(id)));\n          case 5:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5);\n    }));\n    return function (_x13, _x14, _x15) {\n      return _ref5.apply(this, arguments);\n    };\n  }())]);\n  var addToDocument = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(validator()), [express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n    var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee6(req, res, next) {\n      var _req$body, id, itemData, findObj, findIfExist;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            _req$body = req.body, id = _req$body.id, itemData = _req$body.itemData;\n            console.log({\n              id: id\n            });\n            findObj = {\n              _id: id,\n              'items.product_id': itemData.product_id,\n              'items.variation_data.select.variation1.variation': lodash__WEBPACK_IMPORTED_MODULE_6___default().get(itemData, 'variation_data.select.variation1.variation'),\n              'items.variation_data.select.variation2.variation': lodash__WEBPACK_IMPORTED_MODULE_6___default().get(itemData, 'variation_data.select.variation2.variation')\n            };\n            _context6.next = 5;\n            return Model.findOne(findObj);\n          case 5:\n            findIfExist = _context6.sent;\n            if (!findIfExist) {\n              _context6.next = 10;\n              break;\n            }\n            _context6.next = 9;\n            return Model.findOneAndUpdate(findObj, {\n              $inc: {\n                'items.$.quantity': 1\n              }\n            }, {\n              \"new\": true,\n              lean: {\n                toObject: true\n              }\n            });\n          case 9:\n            return _context6.abrupt(\"return\", res.redirect(301, \"/api/\".concat(route, \"/\").concat(id)));\n          case 10:\n            _context6.next = 12;\n            return Model.findByIdAndUpdate({\n              _id: id\n            }, {\n              $push: {\n                items: {\n                  $each: [itemData],\n                  $position: 0\n                }\n              }\n            }, {\n              \"new\": true\n            });\n          case 12:\n            return _context6.abrupt(\"return\", res.redirect(301, \"/api/\".concat(route, \"/\").concat(id)));\n          case 13:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6);\n    }));\n    return function (_x16, _x17, _x18) {\n      return _ref6.apply(this, arguments);\n    };\n  }())]);\n  var updateProperty = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(validator()), [express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n    var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee7(req, res, next) {\n      var _req$body2, id, itemId, property, value, obj, document;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            _req$body2 = req.body, id = _req$body2.id, itemId = _req$body2.itemId, property = _req$body2.property, value = _req$body2.value;\n            obj = {};\n            if (itemId) {\n              obj['items._id'] = new (mongoose__WEBPACK_IMPORTED_MODULE_7___default().Types).ObjectId(itemId);\n            }\n            _context7.next = 5;\n            return Model.findOneAndUpdate(_objectSpread({\n              _id: id\n            }, obj), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({}, itemId ? \"items.$.\".concat(property) : property, value), {\n              \"new\": true,\n              lean: {\n                toObject: true\n              }\n            });\n          case 5:\n            document = _context7.sent;\n            return _context7.abrupt(\"return\", res.redirect(301, \"/api/\".concat(route, \"/\").concat(id)));\n          case 7:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7);\n    }));\n    return function (_x19, _x20, _x21) {\n      return _ref7.apply(this, arguments);\n    };\n  }())]);\n  return {\n    retrieveDocument: retrieveDocument,\n    createDocument: createDocument,\n    updateDocument: updateDocument,\n    removeFromDocument: removeFromDocument,\n    addToDocument: addToDocument,\n    updateProperty: updateProperty\n  };\n}\n\n//# sourceURL=webpack://server/./Controllers/cartController.js?");

/***/ }),

/***/ "./Controllers/categoryController.js":
/*!*******************************************!*\
  !*** ./Controllers/categoryController.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCategoryIds: () => (/* binding */ getCategoryIds),\n/* harmony export */   get_all_category: () => (/* binding */ get_all_category),\n/* harmony export */   get_singleCategory: () => (/* binding */ get_singleCategory),\n/* harmony export */   query_category_products_by_gender: () => (/* binding */ query_category_products_by_gender)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _Models_category_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Models/category.js */ \"./Models/category.js\");\n/* harmony import */ var _utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/productAggregateStage.js */ \"./utils/productAggregateStage.js\");\n\n\n\n/* eslint-disable import/prefer-default-export */\n\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_3___default().Router();\nvar get_all_category = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(req, res, next) {\n    var categories, newCategories;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _Models_category_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].find().populate(['men', 'women']).exec();\n        case 2:\n          categories = _context.sent;\n          _context.next = 5;\n          return _Models_category_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].aggregate([\n          // {\n          //   $unwind: {\n          //     path: '$men',\n          //   },\n          // },\n          {\n            $lookup: {\n              from: 'products',\n              localField: '_id',\n              foreignField: 'category',\n              \"let\": {\n                gender: '$gender'\n              },\n              pipeline: [{\n                $match: {\n                  gender: 'men'\n                }\n              }],\n              as: 'men'\n            }\n          }, {\n            $lookup: {\n              from: 'products',\n              localField: '_id',\n              foreignField: 'category',\n              \"let\": {\n                gender: '$gender'\n              },\n              pipeline: [{\n                $match: {\n                  gender: 'women'\n                }\n              }],\n              as: 'women'\n            }\n          }, {\n            $addFields: {\n              count: {\n                $sum: [{\n                  $size: '$men'\n                }, {\n                  $size: '$women'\n                }]\n              }\n            }\n          }]);\n        case 5:\n          newCategories = _context.sent;\n          res.send(newCategories);\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nvar get_singleCategory = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee2(req, res, next) {\n    var name, result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          name = req.params.name;\n          _context2.next = 3;\n          return _Models_category_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findOne({\n            name: name.toLowerCase()\n          }).populate(['men', 'women']).exec();\n        case 3:\n          result = _context2.sent;\n          if (result) {\n            res.send(result);\n          } else {\n            res.status(404).send(\"Cant find Category \".concat(name, \" Please try Again\"));\n          }\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nvar query_category_products_by_gender = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee3(req, res, next) {\n    var _req$params, name, gender, categoryResult;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _req$params = req.params, name = _req$params.name, gender = _req$params.gender;\n          _context3.next = 3;\n          return _Models_category_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].aggregate([{\n            $match: {\n              name: name.toLowerCase()\n            }\n          }, {\n            $lookup: {\n              from: 'products',\n              localField: gender.toLowerCase(),\n              foreignField: '_id',\n              as: 'products',\n              pipeline: [{\n                $match: {\n                  status: 'active'\n                }\n              }].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()((0,_utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])({\n                stats: false\n              })))\n            }\n          }, {\n            $project: {\n              products: {\n                $sortArray: {\n                  input: '$products',\n                  sortBy: {\n                    _id: 1\n                  }\n                }\n              }\n            }\n          }]);\n        case 3:\n          categoryResult = _context3.sent;\n          res.send(categoryResult[0].products);\n        case 5:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nvar getCategoryIds = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee4(req, res, next) {\n    var categoryResult;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _Models_category_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].find({}, {\n            name: 1\n          }, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 2:\n          categoryResult = _context4.sent;\n          res.send(categoryResult);\n        case 4:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x10, _x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n\n//# sourceURL=webpack://server/./Controllers/categoryController.js?");

/***/ }),

/***/ "./Controllers/couponController.js":
/*!*****************************************!*\
  !*** ./Controllers/couponController.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create_coupon: () => (/* binding */ create_coupon),\n/* harmony export */   delete_single_coupon: () => (/* binding */ delete_single_coupon),\n/* harmony export */   get_all_coupons: () => (/* binding */ get_all_coupons),\n/* harmony export */   get_single_coupon: () => (/* binding */ get_single_coupon)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_coupon_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Models/coupon.js */ \"./Models/coupon.js\");\n\n\n/* eslint-disable camelcase */\n\n\nvar get_all_coupons = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(req, res, next) {\n    var coupons;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _Models_coupon_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].find();\n        case 2:\n          coupons = _context.sent;\n          res.status(200).send({\n            coupons: coupons\n          });\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nvar create_coupon = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2(req, res, next) {\n    var _req$body, code, amount, type, newCoupon;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _req$body = req.body, code = _req$body.code, amount = _req$body.amount, type = _req$body.type;\n          _context2.next = 3;\n          return _Models_coupon_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create({\n            code: code,\n            amount: amount,\n            type: type\n          });\n        case 3:\n          newCoupon = _context2.sent;\n          res.status(200).send(newCoupon);\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nvar get_single_coupon = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee3(req, res, next) {\n    var code, coupon, err;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          code = req.query.code;\n          _context3.next = 3;\n          return _Models_coupon_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n            code: code.toUpperCase()\n          });\n        case 3:\n          coupon = _context3.sent;\n          if (coupon) {\n            res.status(200).send(coupon);\n          } else {\n            err = new Error('Coupon Not Found');\n            err.statusCode = 404;\n            next(err);\n            // res.status(404).send('Coupon Not Found');\n          }\n        case 5:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nvar delete_single_coupon = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee4(req, res, next) {\n    var id, coupon;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          id = req.params.id;\n          _context4.next = 3;\n          return _Models_coupon_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndDelete(id);\n        case 3:\n          coupon = _context4.sent;\n          res.status(200).send(\"Coupon \".concat(coupon.code, \" successfully removed\"));\n        case 5:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x10, _x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n\n//# sourceURL=webpack://server/./Controllers/couponController.js?");

/***/ }),

/***/ "./Controllers/deliveryProfileController.js":
/*!**************************************************!*\
  !*** ./Controllers/deliveryProfileController.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create_delivery_profile: () => (/* binding */ create_delivery_profile),\n/* harmony export */   delete_single_delivery_profile: () => (/* binding */ delete_single_delivery_profile),\n/* harmony export */   getAllOrders: () => (/* binding */ getAllOrders),\n/* harmony export */   get_all_delivery_profile: () => (/* binding */ get_all_delivery_profile),\n/* harmony export */   get_delivery_profile_pagination: () => (/* binding */ get_delivery_profile_pagination),\n/* harmony export */   get_many_delivery_profile: () => (/* binding */ get_many_delivery_profile),\n/* harmony export */   get_single_delivery_profile: () => (/* binding */ get_single_delivery_profile),\n/* harmony export */   update_delivery_profile: () => (/* binding */ update_delivery_profile),\n/* harmony export */   update_single_delivery_profile: () => (/* binding */ update_single_delivery_profile)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"@babel/runtime/helpers/objectWithoutProperties\");\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Models/deliveryProfile.js */ \"./Models/deliveryProfile.js\");\n/* harmony import */ var _Models_order_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Models/order.js */ \"./Models/order.js\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-router-dom */ \"react-router-dom\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _utils_deliveryProfileValidator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/deliveryProfileValidator.js */ \"./utils/deliveryProfileValidator.js\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var postcode_validator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! postcode-validator */ \"postcode-validator\");\n/* harmony import */ var postcode_validator__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(postcode_validator__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_12__);\n\n\n\nvar _excluded = [\"_id\"],\n  _excluded2 = [\"ids\"];\n\n\n\n\n\n\n\n\n\n\nvar errorFormatter = function errorFormatter(element) {\n  try {\n    var parseValue = JSON.parse(element.msg);\n    return parseValue;\n  } catch (error) {\n    return element.msg;\n  }\n};\nvar create_delivery_profile = [_utils_deliveryProfileValidator_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"], (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('name').custom( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(value) {\n    var find;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findOne({\n            name: value\n          });\n        case 2:\n          find = _context.sent;\n          if (!find) {\n            _context.next = 5;\n            break;\n          }\n          throw Error('You already have a profile with this name.');\n        case 5:\n          return _context.abrupt(\"return\", true);\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}()), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee2(req, res, next) {\n    var _req$body, _id, body, errors, profile;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _req$body = req.body, _id = _req$body._id, body = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(_req$body, _excluded); //console.log(body);\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(errorFormatter); // console.log('- - - - - - - - - - - ');\n          // console.log(errors.mapped());\n          if (errors.isEmpty()) {\n            _context2.next = 5;\n            break;\n          }\n          res.status(404).send(errors.mapped());\n          return _context2.abrupt(\"return\");\n        case 5:\n          _context2.next = 7;\n          return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].create(body);\n        case 7:\n          profile = _context2.sent;\n          res.status(201).send(profile);\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x2, _x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}())];\nvar get_all_delivery_profile = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee3(req, res, next) {\n    var profiles;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].aggregate([{\n            $lookup: {\n              from: 'products',\n              // Assuming your listings collection is named \"listings\"\n              localField: '_id',\n              foreignField: 'delivery',\n              // let: { deliveryId: '$_delivery' }, // Assigning the delivery profile ID to a variable\n              pipeline: [{\n                $project: {\n                  _id: 1,\n                  title: 1\n                }\n              }],\n              as: 'activeListings' // Output field to store the matching listings\n            }\n          }, {\n            $addFields: {\n              active_listings: {\n                $size: '$activeListings'\n              }\n            }\n          }, {\n            $sort: {\n              _id: 1\n            }\n          }]);\n        case 2:\n          profiles = _context3.sent;\n          res.status(200).send(profiles);\n        case 4:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x5, _x6, _x7) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nvar get_delivery_profile_pagination = [(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('limit').trim().toInt(), (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('page').trim().toInt(), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee4(req, res, next) {\n    var _req$query, page, limit, _yield$Promise$all, _yield$Promise$all2, totalProfiles, profiles;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _req$query = req.query, page = _req$query.page, limit = _req$query.limit;\n          _context4.next = 3;\n          return Promise.all([_Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].countDocuments(), _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].aggregate([{\n            $sort: {\n              _id: 1\n            }\n          }, {\n            $skip: (page - 1) * limit\n          }, {\n            $limit: limit\n          }, {\n            $lookup: {\n              from: 'products',\n              // Assuming your listings collection is named \"listings\"\n              localField: '_id',\n              foreignField: 'delivery',\n              // let: { deliveryId: '$_delivery' }, // Assigning the delivery profile ID to a variable\n              pipeline: [{\n                $project: {\n                  _id: 1,\n                  title: 1\n                }\n              }],\n              as: 'activeListings' // Output field to store the matching listings\n            }\n          }, {\n            $addFields: {\n              active_listings: {\n                $size: '$activeListings'\n              }\n            }\n          }])]);\n        case 3:\n          _yield$Promise$all = _context4.sent;\n          _yield$Promise$all2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_yield$Promise$all, 2);\n          totalProfiles = _yield$Promise$all2[0];\n          profiles = _yield$Promise$all2[1];\n          res.status(200).send({\n            total: totalProfiles,\n            profiles: profiles\n          });\n        case 8:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x8, _x9, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}())];\nvar delete_single_delivery_profile = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee5(req, res, next) {\n    var id, profile;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          id = req.params.id;\n          _context5.next = 3;\n          return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findByIdAndDelete(id);\n        case 3:\n          profile = _context5.sent;\n          res.status(200).send(profile);\n        case 5:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function (_x11, _x12, _x13) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nvar update_single_delivery_profile = [_utils_deliveryProfileValidator_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"], express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee6(req, res, next) {\n    var id, errors, profile;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          id = req.params.id;\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(errorFormatter);\n          if (errors.isEmpty()) {\n            _context6.next = 5;\n            break;\n          }\n          res.status(404).send(errors.mapped());\n          return _context6.abrupt(\"return\");\n        case 5:\n          _context6.next = 7;\n          return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findByIdAndUpdate({\n            _id: id\n          }, req.body, {\n            \"new\": true\n          });\n        case 7:\n          profile = _context6.sent;\n          res.status(200).send(profile);\n        case 9:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function (_x14, _x15, _x16) {\n    return _ref6.apply(this, arguments);\n  };\n}())];\nvar update_delivery_profile = [\n// postCodeValidator(),\n(0,express_validator__WEBPACK_IMPORTED_MODULE_9__.check)('origin_post_code', 'Enter a valid postal code').escape().trim().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee7(req, res, next) {\n    var _req$body2, ids, body, errors, profiles, failure, updateProfile;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _req$body2 = req.body, ids = _req$body2.ids, body = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(_req$body2, _excluded2);\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_9__.validationResult)(req).formatWith(errorFormatter);\n          if (errors.isEmpty()) {\n            _context7.next = 5;\n            break;\n          }\n          res.status(404).send(errors.mapped());\n          return _context7.abrupt(\"return\");\n        case 5:\n          _context7.next = 7;\n          return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].find({\n            _id: ids\n          }, null, {\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          });\n        case 7:\n          profiles = _context7.sent;\n          failure = [];\n          updateProfile = profiles.map(function (_ref8) {\n            var country_of_origin = _ref8.country_of_origin,\n              _id = _ref8._id,\n              name = _ref8.name;\n            try {\n              var _req$body3;\n              if ((0,postcode_validator__WEBPACK_IMPORTED_MODULE_10__.postcodeValidatorExistsForCountry)(country_of_origin) && !(0,postcode_validator__WEBPACK_IMPORTED_MODULE_10__.postcodeValidator)((_req$body3 = req.body) === null || _req$body3 === void 0 || (_req$body3 = _req$body3.origin_post_code) === null || _req$body3 === void 0 ? void 0 : _req$body3.toUpperCase(), country_of_origin)) {\n                failure.push({\n                  name: name,\n                  _id: _id,\n                  country_of_origin: country_of_origin\n                });\n              } else {\n                return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].updateOne({\n                  _id: _id\n                }, req.body);\n              }\n            } catch (error) {\n              console.error('validating error here: ', error);\n            }\n          });\n          _context7.next = 12;\n          return Promise.allSettled(updateProfile);\n        case 12:\n          if (!(failure.length >= 1)) {\n            _context7.next = 15;\n            break;\n          }\n          res.status(500).send({\n            failure: failure,\n            msg: \"We're unable to update the origin post code to \".concat(req.body.origin_post_code, \" for \").concat(failure.length, \" of your delivery profiles. Try again or update each profile individually.\")\n          });\n          return _context7.abrupt(\"return\");\n        case 15:\n          res.status(200).send({\n            msg: \"The origin post code has been updated to \".concat(req.body.origin_post_code, \" for \").concat(profiles.length - failure.length, \" of your delivery profiles.\")\n          });\n        case 16:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref7.apply(this, arguments);\n  };\n}())];\nvar get_single_delivery_profile = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee8(req, res, next) {\n    var id, profiles;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          id = req.params.id;\n          _context8.next = 3;\n          return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].aggregate([{\n            $match: {\n              _id: new (mongoose__WEBPACK_IMPORTED_MODULE_12___default().Types).ObjectId(id)\n            }\n          }, {\n            $lookup: {\n              from: 'products',\n              // Assuming your listings collection is named \"listings\"\n              localField: '_id',\n              foreignField: 'delivery',\n              // let: { deliveryId: '$_delivery' }, // Assigning the delivery profile ID to a variable\n              pipeline: [{\n                $project: {\n                  _id: 1,\n                  title: 1\n                }\n              }],\n              as: 'listings' // Output field to store the matching listings\n            }\n          }, {\n            $addFields: {\n              active_listings: {\n                $size: '$listings'\n              }\n            }\n          }]);\n        case 3:\n          profiles = _context8.sent;\n          res.status(200).send(profiles);\n        case 5:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return function (_x20, _x21, _x22) {\n    return _ref9.apply(this, arguments);\n  };\n}());\nvar get_many_delivery_profile = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref10 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee9(req, res, next) {\n    var ids, profiles;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          ids = req.body.ids;\n          _context9.next = 3;\n          return _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].find({\n            _id: ids\n          });\n        case 3:\n          profiles = _context9.sent;\n          res.status(200).send(profiles);\n        case 5:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return function (_x23, _x24, _x25) {\n    return _ref10.apply(this, arguments);\n  };\n}());\nvar getAllOrders = express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref11 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee10(req, res, next) {\n    var orders;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find({}, null, {\n            populate: {\n              path: 'items.product'\n            },\n            sort: {\n              createdAt: '-1'\n            }\n          });\n        case 2:\n          orders = _context10.sent;\n          return _context10.abrupt(\"return\", res.status(200).send({\n            succes: true,\n            orders: orders\n          }));\n        case 4:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee10);\n  }));\n  return function (_x26, _x27, _x28) {\n    return _ref11.apply(this, arguments);\n  };\n}());\n\n//# sourceURL=webpack://server/./Controllers/deliveryProfileController.js?");

/***/ }),

/***/ "./Controllers/giftCardController.js":
/*!*******************************************!*\
  !*** ./Controllers/giftCardController.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create_giftCard: () => (/* binding */ create_giftCard),\n/* harmony export */   delete_all: () => (/* binding */ delete_all),\n/* harmony export */   delete_single: () => (/* binding */ delete_single),\n/* harmony export */   get_all_giftCard: () => (/* binding */ get_all_giftCard),\n/* harmony export */   get_single_giftCard: () => (/* binding */ get_single_giftCard)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_giftCard_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Models/giftCard.js */ \"./Models/giftCard.js\");\n\n\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable camelcase */\n\n\nvar create_giftCard = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(req, res, next) {\n    var _req$body, code, amount, type, giftCard;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _req$body = req.body, code = _req$body.code, amount = _req$body.amount, type = _req$body.type;\n          _context.next = 3;\n          return _Models_giftCard_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create({\n            code: code,\n            amount: amount,\n            type: type\n          });\n        case 3:\n          giftCard = _context.sent;\n          return _context.abrupt(\"return\", res.status(200).send(giftCard));\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nvar get_all_giftCard = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2(req, res, next) {\n    var giftCard;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _Models_giftCard_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].find();\n        case 2:\n          giftCard = _context2.sent;\n          return _context2.abrupt(\"return\", res.status(200).send(giftCard));\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nvar get_single_giftCard = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee3(req, res, next) {\n    var code, giftCard, error;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          code = req.query.code;\n          code = code.toUpperCase();\n          if (code.substring(0, 3) != 'GL-') {\n            code = \"GL-\".concat(code);\n          }\n          _context3.next = 5;\n          return _Models_giftCard_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n            code: code\n          });\n        case 5:\n          giftCard = _context3.sent;\n          if (!giftCard) {\n            _context3.next = 10;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(200).send(giftCard));\n        case 10:\n          error = new Error('Gift Card Not Found');\n          error.statusCode = 404;\n          return _context3.abrupt(\"return\", next(error));\n        case 13:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nvar delete_single = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee4(req, res, next) {\n    var id, giftCard;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          id = req.params.id;\n          console.log(id);\n          _context4.next = 4;\n          return _Models_giftCard_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndDelete({\n            _id: id\n          });\n        case 4:\n          giftCard = _context4.sent;\n          res.status(200).json({\n            msg: \"Gift Card \".concat(giftCard.code, \" successfully deleted.\"),\n            giftCard: giftCard\n          });\n        case 6:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x10, _x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nvar delete_all = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee5(req, res, next) {\n    var allGiftcards, onlyIds, giftCard;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return _Models_giftCard_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].find();\n        case 2:\n          allGiftcards = _context5.sent;\n          onlyIds = allGiftcards.map(function (giftCard) {\n            var id = giftCard.id;\n            return id;\n          });\n          console.log(onlyIds);\n          _context5.next = 7;\n          return _Models_giftCard_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].deleteMany({\n            _id: onlyIds\n          });\n        case 7:\n          giftCard = _context5.sent;\n          res.status(200).json({\n            msg: \"Gift Card \".concat(giftCard.code, \" successfully deleted.\"),\n            giftCard: giftCard\n          });\n        case 9:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function (_x13, _x14, _x15) {\n    return _ref5.apply(this, arguments);\n  };\n}());\n\n//# sourceURL=webpack://server/./Controllers/giftCardController.js?");

/***/ }),

/***/ "./Controllers/orderController.js":
/*!****************************************!*\
  !*** ./Controllers/orderController.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addPrivateNote: () => (/* binding */ addPrivateNote),\n/* harmony export */   createPaymentIntent: () => (/* binding */ createPaymentIntent),\n/* harmony export */   deletePrivateNote: () => (/* binding */ deletePrivateNote),\n/* harmony export */   editPrivateNote: () => (/* binding */ editPrivateNote),\n/* harmony export */   getAdminOrders: () => (/* binding */ getAdminOrders),\n/* harmony export */   getOrderDetails: () => (/* binding */ getOrderDetails)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _Models_product_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Models/product.js */ \"./Models/product.js\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../middleware/checkAuthenticated.js */ \"./middleware/checkAuthenticated.js\");\n/* harmony import */ var randomstring__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! randomstring */ \"randomstring\");\n/* harmony import */ var randomstring__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(randomstring__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _utils_generateOrderNumber_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utils/generateOrderNumber.js */ \"./utils/generateOrderNumber.js\");\n/* harmony import */ var _Models_order_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Models/order.js */ \"./Models/order.js\");\n/* harmony import */ var _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Models/deliveryProfile.js */ \"./Models/deliveryProfile.js\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var dayjs_plugin_customParseFormat_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! dayjs/plugin/customParseFormat.js */ \"dayjs/plugin/customParseFormat.js\");\n/* harmony import */ var dayjs_plugin_customParseFormat_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_customParseFormat_js__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _Models_privateNote_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../Models/privateNote.js */ \"./Models/privateNote.js\");\n/* harmony import */ var _utils_generatePaymentIntent_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../utils/generatePaymentIntent.js */ \"./utils/generatePaymentIntent.js\");\n/* harmony import */ var _utils_orderAggregatePipeline_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../utils/orderAggregatePipeline.js */ \"./utils/orderAggregatePipeline.js\");\n/* harmony import */ var _utils_matchStageOrderAggregate_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../utils/matchStageOrderAggregate.js */ \"./utils/matchStageOrderAggregate.js\");\n/* harmony import */ var _utils_shipDateStage_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../utils/shipDateStage.js */ \"./utils/shipDateStage.js\");\n\n\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n/* eslint-disable import/prefer-default-export */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndayjs__WEBPACK_IMPORTED_MODULE_16___default()((dayjs_plugin_customParseFormat_js__WEBPACK_IMPORTED_MODULE_17___default()));\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_10___default()(process.env.STRIPE_KEY);\nvar createPaymentIntent = [\n// check('cart').escape(),\n// check('shipping').escape(),\n// check('billing').escape(),\n_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_7__.checkAuthenticated, _utils_generatePaymentIntent_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"]\n// asyncHandler(async (req, res, next) => {\n//   const userId = req.session.passport.user;\n//   const {\n//     cart,\n//     shipping,\n//     deliveryOption,\n//     billing,\n//     deliveryDate,\n//     delivery_cost,\n//   } = req.body;\n//   // make a map with all the cart item products\n//   //\n//   let cartPrice = 0;\n//   const cartMap = new Map();\n//   const cartObj = {};\n//   const itemsArray = [];\n//   const cartIds = [];\n\n//   console.log({ body: req.body });\n//   cart.map(\n//     ({\n//       id,\n//       variationSelect,\n//       quantity,\n//       isVariation1Present,\n//       isVariation2Present,\n//       isVariationCombine,\n//       variation_data,\n//       product_id,\n//       _id,\n//       price,\n//       ...rest\n//     }) => {\n//       const obj = {\n//         id: product_id,\n//         ...variationSelect,\n\n//         quantity,\n//         isVariation1Present: _.get(variation_data, 'variation1_present') || false,\n//         isVariation2Present: _.get(variation_data, 'variation2_present') || false,\n//         isVariationCombine :  _.get(variation_data, 'isVariationCombine') || false,\n//         price: price?.current,\n//       };\n//       itemsArray.push({ ...obj, product: id });\n//       cartIds.push(_id);\n//       if (!cartMap.has(_id)) {\n//         obj._id = _id;\n//         const array = [obj];\n\n//         cartObj[id] = array;\n//         cartMap.set(id, array);\n//       } else {\n//         obj._id = _id;\n//         const getArray = cartMap.get(id);\n\n//         getArray.push(obj);\n//         cartMap.set(getArray);\n//       }\n//     },\n//   );\n\n//   const productsArray = Object.keys(cartObj);\n\n//   const getAllCartProducts = await Product.find({\n//     _id: { $in: productsArray },\n//   });\n\n//   const getResult = getAllCartProducts.map((product) => {\n//     const getVariationSelectArray = cartObj[product.id];\n\n//     getVariationSelectArray.map((variationDetail) => {\n//       if (product?.variations) {\n//         if (product.variations.length < 3) {\n//           const foundObj = { price: null, stock: null };\n//           const findOptionsforVariation1 = product.variations.find(\n//             (item) => item.name === variationDetail.variation1.title,\n//           );\n//           const findOptionsforVariation2 = product.variations.find(\n//             (item) => item.name === variationDetail.variation2.title,\n//           );\n\n//           const findPrice_StockArray = [\n//             findOptionsforVariation1,\n//             findOptionsforVariation2,\n//           ].map((variation, index) => {\n//             if (variation?.options) {\n//               const foundOptionVariation = variation.options.get(\n//                 variationDetail[`variation${index + 1}`].id,\n//               );\n\n//               if (_.has(foundOptionVariation, 'price')) {\n//                 foundObj.price = foundOptionVariation.price;\n//               }\n\n//               if (_.has(foundOptionVariation, 'stock')) {\n//                 foundObj.stock = foundOptionVariation.stock;\n//               }\n//             }\n//           });\n\n//           if (foundObj.price) {\n//             cartPrice += foundObj.price * variationDetail?.quantity;\n//           } else {\n//             cartPrice += product?.price?.current * variationDetail.quantity;\n//           }\n//         } else {\n//           const findOptionsforVariation = product.variations[2].options;\n\n//           if (findOptionsforVariation) {\n//             const foundOptionVariation = findOptionsforVariation.get(\n//               variationDetail?.variation2?.id,\n//             );\n\n//             if (foundOptionVariation) {\n//               cartPrice +=\n//                 foundOptionVariation?.price * variationDetail?.quantity;\n//             } else {\n//             }\n//           }\n//         }\n//       }\n//     });\n//   });\n//   let subTotal = cartPrice;\n//   cartPrice += delivery_cost || 0;\n\n//   let parseCartPrice = parseFloat(cartPrice).toFixed(2);\n//   const calculatePrice = parseInt(parseCartPrice.replace('.', ''));\n\n//   /* use off_session inorder to allow klarna payment */\n//   const orderNumber = generateOrderNumber();\n\n//   console.log({ calculatePrice });\n//   const paymentIntent = await stripe.paymentIntents.create({\n//     metadata: {\n//       orderNumber,\n//     },\n//     amount: calculatePrice,\n//     currency: 'gbp',\n//     customer: userId,\n//     // setup_future_usage: 'off_session',\n//     shipping,\n//     payment_method_types: ['card', 'paypal', 'klarna', 'afterpay_clearpay'],\n//   });\n\n//   console.log({ orderNumber });\n\n//   const profile = await DeliveryProfile.findById(deliveryOption?.id, null, {\n//     toObject: true,\n//     new: true,\n//   });\n//   const orderObj = {\n//     _id: orderNumber,\n//     customer: userId,\n//     status: 'processing',\n//     shipping_address: shipping,\n//     billing_address: billing,\n//     transaction_cost: {\n//       total: parseCartPrice,\n//       subtotal: parseFloat(subTotal).toFixed(2),\n//     },\n//     shipping_option: {\n//       cost: delivery_cost,\n//       delivery_date: deliveryDate,\n//       name: deliveryOption?.name,\n//       id: deliveryOption?.id,\n//       time: profile?.processingTime?.end,\n//       type: profile?.processingTime?.type,\n//     },\n\n//     items: itemsArray,\n//     cartObj,\n//     cartIds,\n//   };\n\n//   const order = await Order.create(orderObj);\n//   // console.log({ order });\n//   // res.status(200).send({\n//   //   success: true,\n//   //   clientSecret: paymentIntent.client_secret,\n//   //   orderNumber: orderNumber,\n//   //   id: paymentIntent.id,\n//   // });\n// }),\n];\nvar getOrderDetails = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_7__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(req, res, next) {\n    var userId, id, order, _req$user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          userId = req.session.passport.user;\n          id = req.params.id;\n          _context.next = 4;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].findById(id.toUpperCase()).populate('items.product', ['images', 'title', 'variations']).lean({\n            toObject: true\n          }).exec();\n        case 4:\n          order = _context.sent;\n          if (!order) {\n            _context.next = 12;\n            break;\n          }\n          if (!(order.customer.toString() === userId)) {\n            _context.next = 9;\n            break;\n          }\n          order.email = req === null || req === void 0 || (_req$user = req.user) === null || _req$user === void 0 ? void 0 : _req$user.email;\n          return _context.abrupt(\"return\", res.status(200).send({\n            order: order,\n            success: false\n          }));\n        case 9:\n          res.status(404).send({\n            msg: 'You are not authorized.',\n            success: false\n          });\n          _context.next = 13;\n          break;\n        case 12:\n          return _context.abrupt(\"return\", res.status(404).send({\n            msg: 'Not Found',\n            success: false\n          }));\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}())];\nvar getAdminOrders = [(0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('status').escape().trim().toLowerCase(), (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('page').escape().trim().toInt(), (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('limit').escape().trim().toInt(), (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('filter.destination').escape().trim().toUpperCase(), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee3(req, res, next) {\n    var _req$body2;\n    var _req$body, filter, limit, recursiveGetData;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _req$body = req.body, filter = _req$body.filter, limit = _req$body.limit;\n          recursiveGetData = /*#__PURE__*/function () {\n            var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee2(page) {\n              var betaSortObj, matchArray, totalCountResult, totalCount, maxPage, newPageNumber, skip_limit_stage, aggregatePipeline, _yield$Promise$all, _yield$Promise$all2, ordersByDate, pageCountResult, pageCount;\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    betaSortObj = {\n                      group: {\n                        _id: -1\n                      },\n                      orderArray: {},\n                      document: {}\n                    };\n                    matchArray = (0,_utils_matchStageOrderAggregate_js__WEBPACK_IMPORTED_MODULE_21__[\"default\"])({\n                      filter: filter\n                    });\n                    _context2.next = 4;\n                    return _Models_order_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].aggregate([_utils_shipDateStage_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n                      $match: {\n                        $and: matchArray\n                      }\n                    }, {\n                      $count: 'totalCount'\n                    }]);\n                  case 4:\n                    totalCountResult = _context2.sent;\n                    totalCount = lodash__WEBPACK_IMPORTED_MODULE_11___default().get(totalCountResult, '0.totalCount') || 0;\n                    maxPage = Math.ceil(totalCount / limit) || 1;\n                    newPageNumber = page <= maxPage ? page : maxPage;\n                    skip_limit_stage = [{\n                      $skip: (newPageNumber - 1) * limit\n                    }, {\n                      $limit: limit\n                    }];\n                    aggregatePipeline = lodash__WEBPACK_IMPORTED_MODULE_11___default().cloneDeep(_utils_orderAggregatePipeline_js__WEBPACK_IMPORTED_MODULE_20__[\"default\"]);\n                    if ((filter === null || filter === void 0 ? void 0 : filter.sort_by) == 'dispatch by date') {\n                      betaSortObj;\n                      lodash__WEBPACK_IMPORTED_MODULE_11___default().set(betaSortObj, 'document.ship_date', -1);\n                      lodash__WEBPACK_IMPORTED_MODULE_11___default().set(betaSortObj, 'orderArray.ship_date', -1);\n                    } else if ((filter === null || filter === void 0 ? void 0 : filter.sort_by) == 'newest') {\n                      lodash__WEBPACK_IMPORTED_MODULE_11___default().set(betaSortObj, 'document.createdAt', -1);\n                      lodash__WEBPACK_IMPORTED_MODULE_11___default().set(betaSortObj, 'orderArray.createdAt', -1);\n                    } else if ((filter === null || filter === void 0 ? void 0 : filter.sort_by) == 'oldest') {\n                      lodash__WEBPACK_IMPORTED_MODULE_11___default().set(betaSortObj, 'document.createdAt', 1);\n                      lodash__WEBPACK_IMPORTED_MODULE_11___default().set(betaSortObj, 'orderArray.createdAt', 1);\n                      lodash__WEBPACK_IMPORTED_MODULE_11___default().set(betaSortObj, 'group._id', 1);\n                    } else if ((filter === null || filter === void 0 ? void 0 : filter.sort_by) == 'destination') {\n                      // _.set(betaSortObj, 'document.createdAt', -1);\n                      // _.set(betaSortObj, 'orderArray.createdAt', -1);\n\n                      betaSortObj['document']['shipping_address.address.city'] = 1;\n                      betaSortObj['document']['shipping_address.address.country'] = 1;\n                      lodash__WEBPACK_IMPORTED_MODULE_11___default().set(betaSortObj, 'group._id', 1);\n                      aggregatePipeline.pop();\n                      aggregatePipeline.push({\n                        $group: {\n                          _id: {\n                            $concat: [{\n                              $toLower: '$shipping_address.address.city'\n                            }, ', ', {\n                              $toUpper: '$shipping_address.address.country'\n                            }]\n                          },\n                          byDestination: {\n                            $first: true\n                          },\n                          country: {\n                            $first: '$shipping_address.address.country'\n                          },\n                          city: {\n                            $first: '$shipping_address.address.city'\n                          },\n                          totalDocuments: {\n                            $sum: 1\n                          },\n                          orders: {\n                            $push: '$$ROOT'\n                          }\n                        }\n                      });\n                    }\n                    aggregatePipeline.unshift.apply(aggregatePipeline, skip_limit_stage);\n                    aggregatePipeline.unshift({\n                      $sort: _objectSpread(_objectSpread({}, betaSortObj['document']), {}, {\n                        _id: 1\n                      })\n                    });\n                    aggregatePipeline.push({\n                      $sort: betaSortObj['group']\n                    });\n                    aggregatePipeline.push({\n                      $addFields: {\n                        orders: {\n                          $sortArray: {\n                            input: '$orders',\n                            sortBy: _objectSpread(_objectSpread({}, betaSortObj['orderArray']), {}, {\n                              _id: 1\n                            })\n                          }\n                        }\n                      }\n                    });\n                    if (matchArray.length >= 1) {\n                      aggregatePipeline.unshift({\n                        $match: {\n                          $and: matchArray\n                        }\n                      });\n                    }\n                    aggregatePipeline.unshift(_utils_shipDateStage_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"]);\n                    console.log(betaSortObj);\n                    _context2.next = 20;\n                    return Promise.all([_Models_order_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].aggregate(aggregatePipeline), _Models_order_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].aggregate([_utils_shipDateStage_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n                      $match: {\n                        $and: matchArray\n                      }\n                    }].concat(skip_limit_stage, [{\n                      $count: 'pageCount'\n                    }]))]);\n                  case 20:\n                    _yield$Promise$all = _context2.sent;\n                    _yield$Promise$all2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_yield$Promise$all, 2);\n                    ordersByDate = _yield$Promise$all2[0];\n                    pageCountResult = _yield$Promise$all2[1];\n                    pageCount = lodash__WEBPACK_IMPORTED_MODULE_11___default().get(pageCountResult, '0.pageCount') || 0;\n                    console.log(\"getting data for page \".concat(page, \" with newPage being \").concat(newPageNumber));\n                    return _context2.abrupt(\"return\", res.status(200).send({\n                      ordersByDate: ordersByDate,\n                      byDestination: (filter === null || filter === void 0 ? void 0 : filter.sort_by) == 'destination' ? true : false,\n                      success: true,\n                      totalCount: totalCount,\n                      pageCount: pageCount,\n                      page: newPageNumber,\n                      maxPage: maxPage\n                    }));\n                  case 27:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2);\n            }));\n            return function recursiveGetData(_x7) {\n              return _ref3.apply(this, arguments);\n            };\n          }();\n          return _context3.abrupt(\"return\", recursiveGetData((_req$body2 = req.body) === null || _req$body2 === void 0 ? void 0 : _req$body2.page, false));\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}())];\nvar addPrivateNote = [(0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('note', 'invalid note').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('orderId', 'invalid orderId').trim().escape().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee4(req, res, next) {\n    var _req$body3, note, orderId, result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _req$body3 = req.body, note = _req$body3.note, orderId = _req$body3.orderId;\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.validationResult)(req).formatWith(function (_ref5) {\n            var msg = _ref5.msg;\n            return msg;\n          });\n          if (result.isEmpty()) {\n            _context4.next = 4;\n            break;\n          }\n          return _context4.abrupt(\"return\", res.status(400).send({\n            error: result.mapped()\n          }));\n        case 4:\n          _context4.next = 6;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].findByIdAndUpdate(orderId, {\n            $push: {\n              private_note: {\n                note: note\n              }\n            }\n          }, {\n            upsert: true,\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          });\n        case 6:\n          return _context4.abrupt(\"return\", res.redirect(\"/api/admin/order/\".concat(orderId)));\n        case 7:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x8, _x9, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}())];\nvar editPrivateNote = [(0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('noteId').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('orderId').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('note').trim().escape().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee5(req, res, next) {\n    var _req$body4, note, orderId, noteId, result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _req$body4 = req.body, note = _req$body4.note, orderId = _req$body4.orderId, noteId = _req$body4.noteId;\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.validationResult)(req).formatWith(function (_ref7) {\n            var msg = _ref7.msg;\n            return msg;\n          });\n          if (result.isEmpty()) {\n            _context5.next = 4;\n            break;\n          }\n          return _context5.abrupt(\"return\", res.status(400).send({\n            error: result.mapped()\n          }));\n        case 4:\n          _context5.next = 6;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].findOneAndUpdate({\n            _id: orderId,\n            'private_note._id': noteId\n          }, {\n            $set: {\n              'private_note.$.note': note\n            }\n          }, {\n            upsert: true,\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          });\n        case 6:\n          return _context5.abrupt(\"return\", res.redirect(\"/api/admin/order/\".concat(orderId)));\n        case 7:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function (_x11, _x12, _x13) {\n    return _ref6.apply(this, arguments);\n  };\n}())];\nvar deletePrivateNote = [(0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('noteId', 'invalid noteId').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('orderId', 'invalid orderId').trim().escape().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee6(req, res, next) {\n    var result, _req$query, noteId, orderId;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.validationResult)(req).formatWith(function (_ref9) {\n            var msg = _ref9.msg;\n            return msg;\n          });\n          _req$query = req.query, noteId = _req$query.noteId, orderId = _req$query.orderId;\n          if (result.isEmpty()) {\n            _context6.next = 4;\n            break;\n          }\n          return _context6.abrupt(\"return\", res.status(400).send({\n            error: result.mapped()\n          }));\n        case 4:\n          _context6.next = 6;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].findOneAndUpdate({\n            _id: orderId\n          }, {\n            $pull: {\n              private_note: {\n                _id: new (mongoose__WEBPACK_IMPORTED_MODULE_15___default().Types).ObjectId(noteId)\n              }\n            }\n          }, {\n            upsert: true,\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          });\n        case 6:\n          res.status(200).redirect(303, \"/api/admin/order/\".concat(orderId));\n        case 7:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function (_x14, _x15, _x16) {\n    return _ref8.apply(this, arguments);\n  };\n}())];\n\n//# sourceURL=webpack://server/./Controllers/orderController.js?");

/***/ }),

/***/ "./Controllers/password-change.js":
/*!****************************************!*\
  !*** ./Controllers/password-change.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   forgetPassword: () => (/* binding */ forgetPassword),\n/* harmony export */   resetPassword: () => (/* binding */ resetPassword)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _Models_user__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Models/user */ \"./Models/user.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _React_Email_emails_passwordreset_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../React Email/emails/passwordreset.jsx */ \"./React Email/emails/passwordreset.jsx\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _utils_nodemailer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/nodemailer */ \"./utils/nodemailer.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/logger.js */ \"./utils/logger.js\");\n\n\n\n\n\n\n\n\n\n\n\nvar _process$env = process.env,\n  CLIENT_URL = _process$env.CLIENT_URL,\n  PASSWORD_RESET_JWT_SECRET = _process$env.PASSWORD_RESET_JWT_SECRET,\n  SENDER = _process$env.SENDER;\nvar forgetPassword = [(0,express_validator__WEBPACK_IMPORTED_MODULE_3__.check)('email', 'Email is Invalid.').trim().escape().isEmail().custom( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(value, _ref) {\n    var req, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          req = _ref.req;\n          _context.next = 3;\n          return _Models_user__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOne({\n            email: value\n          });\n        case 3:\n          user = _context.sent;\n          if (user) {\n            _context.next = 8;\n            break;\n          }\n          throw new Error(\"Email Address doesn't exist, please check the email for any typos.\");\n        case 8:\n          req.password = user.password;\n          return _context.abrupt(\"return\", true);\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}()), express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2(req, res, next) {\n    var errorFormatter, results, _req$body, email, newSecret, payload, token, url, emailHtml, mailOptions;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          errorFormatter = function errorFormatter(_ref4) {\n            var msg = _ref4.msg,\n              path = _ref4.path;\n            return msg;\n          };\n          results = (0,express_validator__WEBPACK_IMPORTED_MODULE_3__.validationResult)(req).formatWith(errorFormatter);\n          if (results.isEmpty()) {\n            _context2.next = 4;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(404).send({\n            error: results.mapped()\n          }));\n        case 4:\n          _req$body = req === null || req === void 0 ? void 0 : req.body, email = _req$body.email;\n          console.log('here: ', {\n            password: req.password\n          });\n          newSecret = PASSWORD_RESET_JWT_SECRET + req.password;\n          payload = {\n            id: req.password,\n            email: email\n          };\n          token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign(payload, newSecret, {\n            expiresIn: '15m'\n          });\n          url = \"\".concat(CLIENT_URL, \"/portal/reset-password?pwrt=\").concat(token, \"&email=\").concat(email);\n          emailHtml = render( /*#__PURE__*/React.createElement(_React_Email_emails_passwordreset_jsx__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n            url: url\n          }));\n          mailOptions = {\n            from: SENDER,\n            to: email,\n            subject: 'Your GLAMO password reset link is ready',\n            html: emailHtml\n          };\n          _context2.next = 14;\n          return _utils_nodemailer__WEBPACK_IMPORTED_MODULE_8__[\"default\"].sendMail(mailOptions);\n        case 14:\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].info(req.body, 'Password reset link generated and email sent to user ');\n          return _context2.abrupt(\"return\", res.status(200).send({\n            success: true,\n            msg: 'password link successfully generated and sent to user email.'\n          }));\n        case 16:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}())];\nvar resetPassword = [(0,express_validator__WEBPACK_IMPORTED_MODULE_3__.check)('password', 'Password must be between 10 to 20 characters.').trim().escape().notEmpty().isLength({\n  min: 10,\n  max: 20\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_3__.check)('confirmPassword').trim().escape().custom(function (value, _ref5) {\n  var req = _ref5.req;\n  if (value != req.body.password) {\n    throw new Error('passwords does not match.');\n  } else {\n    return true;\n  }\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_3__.check)('email').trim().escape(), (0,express_validator__WEBPACK_IMPORTED_MODULE_3__.check)('token').trim().escape(), express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee3(req, res, next) {\n    var results, _req$body2, token, email, password, confirmPassword, user, getSecret, payload, salt, hashPassword, expired, invalid;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          results = (0,express_validator__WEBPACK_IMPORTED_MODULE_3__.validationResult)(req).formatWith(function (_ref7) {\n            var msg = _ref7.msg;\n            return msg;\n          });\n          if (results.isEmpty()) {\n            _context3.next = 5;\n            break;\n          }\n          console.log({\n            error: results.mapped()\n          });\n          return _context3.abrupt(\"return\", res.status(400).send({\n            error: results.mapped()\n          }));\n        case 5:\n          _req$body2 = req.body, token = _req$body2.token, email = _req$body2.email, password = _req$body2.password, confirmPassword = _req$body2.confirmPassword;\n          _context3.next = 8;\n          return _Models_user__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOne({\n            email: email\n          });\n        case 8:\n          user = _context3.sent;\n          if (user) {\n            _context3.next = 11;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(404).send({\n            success: false,\n            msg: 'user does not exist.'\n          }));\n        case 11:\n          getSecret = PASSWORD_RESET_JWT_SECRET + user.password;\n          payload = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().verify(token, getSecret);\n          if (!((payload === null || payload === void 0 ? void 0 : payload.email) != email)) {\n            _context3.next = 15;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(404).send({\n            success: false,\n            msg: 'invalid'\n          }));\n        case 15:\n          salt = bcryptjs__WEBPACK_IMPORTED_MODULE_9___default().genSaltSync(parseInt(SALT_ROUNDS));\n          hashPassword = bcryptjs__WEBPACK_IMPORTED_MODULE_9___default().hashSync(confirmPassword, salt);\n          user.password = hashPassword;\n          user.save();\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].info(user, 'Password reset successful ');\n          res.send({\n            success: true,\n            msg: 'password successfully updated!'\n          });\n          _context3.next = 32;\n          break;\n        case 23:\n          _context3.prev = 23;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error('invalid jwt', _context3.t0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"].warn(_context3.t0, _context3.t0.message);\n          expired = false;\n          invalid = false;\n          if ((_context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.name) == 'TokenExpiredError') {\n            expired = true;\n          }\n          if ((_context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.name) == 'JsonWebTokenError') {\n            invalid = true;\n          }\n          res.status(500).send({\n            expired: expired,\n            invalid: invalid\n          });\n        case 32:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 23]]);\n  }));\n  return function (_x6, _x7, _x8) {\n    return _ref6.apply(this, arguments);\n  };\n}())];\n\n//# sourceURL=webpack://server/./Controllers/password-change.js?");

/***/ }),

/***/ "./Controllers/productController.js":
/*!******************************************!*\
  !*** ./Controllers/productController.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create_new_product: () => (/* binding */ create_new_product),\n/* harmony export */   delete_product: () => (/* binding */ delete_product),\n/* harmony export */   getProductsInfo: () => (/* binding */ getProductsInfo),\n/* harmony export */   getVariations: () => (/* binding */ getVariations),\n/* harmony export */   get_all_products: () => (/* binding */ get_all_products),\n/* harmony export */   get_many_product: () => (/* binding */ get_many_product),\n/* harmony export */   get_single_product: () => (/* binding */ get_single_product),\n/* harmony export */   increment_visit: () => (/* binding */ increment_visit),\n/* harmony export */   update_product: () => (/* binding */ update_product),\n/* harmony export */   update_product_category: () => (/* binding */ update_product_category),\n/* harmony export */   update_product_delivery_profile: () => (/* binding */ update_product_delivery_profile)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _Models_product_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Models/product.js */ \"./Models/product.js\");\n/* harmony import */ var _Models_category_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Models/category.js */ \"./Models/category.js\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _utils_productValidator_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/productValidator.js */ \"./utils/productValidator.js\");\n/* harmony import */ var _utils_s3Service_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/s3Service.js */ \"./utils/s3Service.js\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _utils_multerUpload__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../utils/multerUpload */ \"./utils/multerUpload.js\");\n/* harmony import */ var _utils_sortCOmbineVariations_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../utils/sortCOmbineVariations.js */ \"./utils/sortCOmbineVariations.js\");\n/* harmony import */ var _utils_generateProduct_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../utils/generateProduct.js */ \"./utils/generateProduct.js\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utils/productAggregateStage.js */ \"./utils/productAggregateStage.js\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../Models/deliveryProfile.js */ \"./Models/deliveryProfile.js\");\n/* harmony import */ var _utils_variationFormat_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../utils/variationFormat.js */ \"./utils/variationFormat.js\");\n\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n/* eslint-disable */\n// eslint-disable-next-line import/prefer-default-export\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar get_all_products = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee(req, res) {\n    var products;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find().populate('category').exec();\n        case 2:\n          products = _context.sent;\n          res.send(products);\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// export const get_all_by_category = asyncHandler(async (req, res) => {\n//   const category = await Category.find();\n\n//   const products = await Product.find({ category });\n//   if (category) {\n//     res.send(category);\n//   }\n// });\n\nvar getProductsInfo = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee2(req, res, next) {\n    var id, ids, newProduct;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          id = req.params.id;\n          ids = id.split(',').map(function (id) {\n            return new (mongoose__WEBPACK_IMPORTED_MODULE_18___default().Types).ObjectId(id);\n          }); // const product = await Product.find({ _id: ids })\n          //   .populate([{ path: 'delivery' }, { path: 'category' }])\n          //   .exec();\n          _context2.next = 4;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].aggregate([{\n            $match: {\n              _id: {\n                $in: ids\n              }\n            }\n          }, {\n            $lookup: {\n              from: 'categories',\n              localField: 'category',\n              foreignField: '_id',\n              as: 'category',\n              pipeline: [{\n                $project: {\n                  _id: 1,\n                  name: 1\n                }\n              }]\n            }\n          }, {\n            $lookup: {\n              from: 'deliveryprofiles',\n              localField: 'delivery',\n              foreignField: '_id',\n              as: 'delivery'\n            }\n          }, {\n            $set: {\n              category: {\n                $arrayElemAt: ['$category', 0]\n              },\n              delivery: {\n                $arrayElemAt: ['$delivery', 0]\n              }\n            }\n          }].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()((0,_utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"])({\n            stats: true\n          }))));\n        case 4:\n          newProduct = _context2.sent;\n          if (!(newProduct.length < 1)) {\n            _context2.next = 7;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(404).send('product not found'));\n        case 7:\n          return _context2.abrupt(\"return\", res.status(200).send(newProduct));\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nvar get_many_product = [(0,express_validator__WEBPACK_IMPORTED_MODULE_8__.check)('id').trim().escape(), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee3(req, res, next) {\n    var id, ids, products, updateProductVariation;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          id = req.params.id;\n          ids = id.split(',').map(function (id) {\n            return new (mongoose__WEBPACK_IMPORTED_MODULE_18___default().Types).ObjectId(id);\n          });\n          console.log({\n            ids: ids\n          });\n          _context3.next = 5;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].aggregate([{\n            $match: {\n              _id: {\n                $in: ids\n              }\n            }\n          }].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()((0,_utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"])({\n            stats: false\n          })), [{\n            $lookup: {\n              from: 'products',\n              localField: 'category',\n              foreignField: 'category',\n              as: 'alsoLike',\n              \"let\": {\n                gender: '$gender',\n                id: '$_id'\n              },\n              pipeline: [{\n                $match: {\n                  $and: [{\n                    $expr: {\n                      $eq: ['$status', 'active']\n                    }\n                  }, {\n                    $expr: {\n                      $eq: ['$gender', '$$gender']\n                    }\n                  }, {\n                    $expr: {\n                      $ne: [{\n                        $toObjectId: '$$id'\n                      }, '$_id']\n                    }\n                  }]\n                }\n              }].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()((0,_utils_productAggregateStage_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"])({\n                stats: false\n              })), [{\n                $unset: ['variations']\n              }, {\n                $limit: 10\n              }])\n            }\n          },\n          // {\n          //   $addFields: {\n          //     'variation_data.combineVariation': {\n          //       $cond: {\n          //         if: { $gte: [{ $size: '$variations' }, 2] },\n          //         // then: {\n          //         //   $map: {\n          //         //     input: { $arrayElemAt: ['$variations', 2] },\n          //         //     as: 'variation',\n          //         //     in: '$$variation.option'\n          //         //   },\n          //         // },\n\n          //         then: {\n          //           $objectToArray: {\n          //             $arrayElemAt: ['$variations.options', 2],\n          //           },\n          //         },\n          //         else: false,\n          //       },\n          //     },\n          //   },\n          // },\n\n          {\n            $unwind: {\n              path: '$variations',\n              includeArrayIndex: 'variationIndex'\n            }\n          }, {\n            $addFields: {\n              optionArray: {\n                $objectToArray: '$variations.options'\n              }\n            }\n          }, {\n            $addFields: {\n              variationOptionArray: {\n                $map: {\n                  input: '$optionArray',\n                  as: 'variationOption',\n                  \"in\": '$$variationOption.v'\n                }\n              }\n            }\n          }, {\n            $group: {\n              _id: '$_id',\n              variations: {\n                $push: '$variations'\n              },\n              doc: {\n                $first: '$$ROOT'\n              },\n              variationList: {\n                $push: {\n                  title: '$variations.name',\n                  variationIndex: '$variationIndex',\n                  array: '$variationOptionArray'\n                }\n              }\n            }\n          }, {\n            $replaceRoot: {\n              newRoot: {\n                $mergeObjects: ['$doc', {\n                  variationList: '$variationList'\n                }]\n              }\n            }\n          }, {\n            $addFields: {\n              variation_data: {\n                // $arrayToObject: {\n                $reduce: {\n                  input: '$variationList',\n                  initialValue: '$variation_data',\n                  \"in\": {\n                    $cond: {\n                      \"if\": {\n                        $lt: ['$$this.variationIndex', 2]\n                      },\n                      then: {\n                        $mergeObjects: ['$$value', {\n                          $arrayToObject: [[{\n                            k: {\n                              $concat: ['variation', {\n                                $toString: {\n                                  $add: ['$$this.variationIndex', 1]\n                                }\n                              }, '_present']\n                            },\n                            v: true\n                          }, {\n                            k: {\n                              $concat: ['variation', {\n                                $toString: {\n                                  $add: ['$$this.variationIndex', 1]\n                                }\n                              }, '_data']\n                            },\n                            v: '$$this'\n                          }]]\n                        }]\n                      },\n                      \"else\": {\n                        $mergeObjects: ['$$value', {\n                          $arrayToObject: [[{\n                            k: 'isVariationCombine',\n                            v: true\n                          }\n                          // {\n                          //   k: 'testcombineVariation',\n                          //   v: {\n                          //     $reduce: {\n                          //       input: '$$this.array',\n                          //       initialValue: { Magenta: [{ tester: true }] },\n                          //       in: {\n                          //         $mergeObjects: [\n                          //           '$$value',\n                          //           {\n                          //             $arrayToObject: [\n                          //               [\n                          //                 {\n                          //                   k: '$$this.variation',\n                          //                   v: {\n                          //                     $mergeObjects: [\n\n                          //                       // {\n                          //                       //   $getField: {\n                          //                       //     input: '$$value',\n                          //                       //     field: '$this.variation',\n                          //                       //   },\n                          //                       // },\n\n                          //                       {\n                          //                         $arrayToObject: [\n                          //                           [\n                          //                             {\n                          //                               k: '$$this.variation2',\n                          //                               v: '$$this',\n                          //                             },\n                          //                           ],\n                          //                         ],\n                          //                       },\n                          //                     ],\n                          //                   },\n                          //                 },\n                          //               ],\n                          //             ],\n                          //           },\n                          //         ],\n                          //       },\n                          //     },\n                          //   },\n                          // },\n                          ]]\n                        }]\n                      }\n                    }\n                  }\n                }\n                // },\n              }\n            }\n          }, {\n            $unset: ['variationOptionArray', 'variationIndex', 'optionArray']\n          }, {\n            $sort: {\n              _id: 1\n            }\n          }, {\n            $project: {\n              variations: 0\n            }\n          }]));\n        case 5:\n          products = _context3.sent;\n          updateProductVariation = (0,_utils_variationFormat_js__WEBPACK_IMPORTED_MODULE_20__[\"default\"])({\n            products: products\n          });\n          res.status(200).send({\n            products: products,\n            success: true\n          });\n        case 8:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}())];\nvar get_single_product = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee4(req, res, next) {\n    var id, product, price, category, newProducts, newData, isVariationsPresent, variations, minimumPrice, i, _variations$i, combine, name, name2, options, valueArray, _iterator, _step, _step$value, key, value, hasPriceProperty, _sortCombineVariation, variationObj, minPriceValue, variation1, variation2;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          id = req.params.id;\n          _context4.next = 3;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(id, null, {\n            populate: {\n              path: 'category',\n              populate: [{\n                path: 'men',\n                perDocumentLimit: 10,\n                match: {\n                  _id: {\n                    $ne: id\n                  }\n                }\n              }, {\n                path: 'women',\n                perDocumentLimit: 10,\n                match: {\n                  _id: {\n                    $ne: id\n                  }\n                }\n              }]\n            }\n\n            // lean: {\n            //   toObject: true,\n            // },\n          }).exec();\n        case 3:\n          product = _context4.sent;\n          if (!(!product || (product === null || product === void 0 ? void 0 : product.status) != 'active')) {\n            _context4.next = 6;\n            break;\n          }\n          return _context4.abrupt(\"return\", res.status(404).send('product not found'));\n        case 6:\n          price = product.price, category = product.category;\n          newProducts = product.toJSON({\n            flattenMaps: true\n          });\n          newData = _objectSpread(_objectSpread({}, newProducts), {}, {\n            id: product.id,\n            category: category.name,\n            also_like: {\n              men: category.men,\n              women: category.women\n            }\n          }); // if ('variations' in product) {\n          isVariationsPresent = (0,lodash__WEBPACK_IMPORTED_MODULE_12__.has)(newProducts, 'variations');\n          newData.isVariation1Present = false;\n          newData.isVariation2Present = false;\n          newData.isVariationCombine = false;\n          if (!isVariationsPresent) {\n            _context4.next = 31;\n            break;\n          }\n          variations = product.variations;\n          minimumPrice = Infinity;\n          i = 0;\n        case 17:\n          if (!(i < variations.length)) {\n            _context4.next = 30;\n            break;\n          }\n          _variations$i = variations[i], combine = _variations$i.combine, name = _variations$i.name, name2 = _variations$i.name2, options = _variations$i.options;\n          if (!(i == 0 && combine)) {\n            _context4.next = 25;\n            break;\n          }\n          console.log('this variation is combined');\n\n          // jump to 3rd variation which is combined\n          i++;\n          return _context4.abrupt(\"continue\", 27);\n        case 25:\n          if (variations.length < 3) {\n            // variationsObject[`variation${i}`] = { array: [] }\n            valueArray = [];\n            _iterator = _createForOfIteratorHelper(options);\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                _step$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_step.value, 2), key = _step$value[0], value = _step$value[1];\n                hasPriceProperty = (0,lodash__WEBPACK_IMPORTED_MODULE_12__.has)(value, 'price');\n                if (hasPriceProperty) {\n                  minimumPrice = Math.min(minimumPrice, value.price);\n                }\n                valueArray.push(value);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n            newData[\"variation\".concat(i + 1)] = {\n              array: valueArray,\n              title: name\n            };\n            newData[\"isVariation\".concat(i + 1, \"Present\")] = true;\n            console.log('product is not combined', valueArray);\n          }\n        case 26:\n          if (i == 2 && combine && variations.length == 3) {\n            _sortCombineVariation = (0,_utils_sortCOmbineVariations_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(options), variationObj = _sortCombineVariation.variationObj, minPriceValue = _sortCombineVariation.minPriceValue, variation1 = _sortCombineVariation.variation1, variation2 = _sortCombineVariation.variation2;\n            variation1.title = name;\n            variation2.title = name2;\n            minimumPrice = minPriceValue;\n            newData.variation1 = variation1;\n            newData.variation2 = variation2;\n            newData.isVariation1Present = true;\n            newData.isVariation2Present = true;\n            newData.combineVariation = variationObj;\n            newData.isVariationCombine = true;\n          }\n        case 27:\n          i++;\n          _context4.next = 17;\n          break;\n        case 30:\n          if (isFinite(minimumPrice)) {\n            newData.price.current = minimumPrice;\n          }\n        case 31:\n          console.log(newData.price);\n          res.send(newData);\n        case 33:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x9, _x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nvar delete_product = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee5(req, res, next) {\n    var ids, idsArray, deleteProductsImages, _yield$Promise$all, _yield$Promise$all2, products;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          ids = req.params.ids;\n          idsArray = ids.split(',');\n          console.log(idsArray);\n          deleteProductsImages = idsArray.map(function (item) {\n            return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_10__.s3Delete)('products', item);\n          });\n          _context5.next = 6;\n          return Promise.all([_Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].deleteMany({\n            _id: idsArray\n          })].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(deleteProductsImages)));\n        case 6:\n          _yield$Promise$all = _context5.sent;\n          _yield$Promise$all2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_yield$Promise$all, 1);\n          products = _yield$Promise$all2[0];\n          console.log(products);\n          res.send({\n            msg: 'deletion successful',\n            count: products === null || products === void 0 ? void 0 : products.deletedCount\n          });\n        case 11:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}());\n\n// // create a new Product\n\n// const upload = multerUpload;\n// // work on adding variations\n\n// export async function generateProduct(req, id) {\n//   let counter = 0;\n//   const imageArr = [];\n//   const { files } = req;\n\n//   const { variations } = req.body;\n//   const { title, delivery, gender, price, stock, category, detail } = req.body;\n\n//   const newStock = JSON.parse(stock.replace(/&quot;/g, '\"'));\n//   const newPrice = JSON.parse(price.replace(/&quot;/g, '\"'));\n//   const parseVariations = variations?.map((item) => {\n//     const data = JSON.parse(item);\n//     delete data.id;\n//     data.options = new Map(data.options);\n\n//     return data;\n//   });\n\n//   const productData = {\n//     title,\n//     delivery,\n//     gender,\n//     category,\n//     detail,\n//     variations: parseVariations,\n//     images: imageArr,\n//   };\n//   if (newStock.on) {\n//     productData.stock = newStock.value;\n//   }\n\n//   if (newPrice.on) {\n//     productData.price = { current: newPrice.value };\n//   }\n\n//   // const newFiles = files.map(async (item) => {\n//   //   const sharpen = await sharpify(item);\n//   //   sharpen.fileName = counter === 0 ? 'primary' : `additional-${counter}`;\n//   //   imageArr.push(`${url}/${id}/${sharpen.fileName}.${sharpen.format}`);\n//   //   counter += 1;\n//   //   return sharpen;\n//   // });\n//   const sharpResult = [];\n//   for (const item of files) {\n//     const sharpen = await sharpify(item);\n//     sharpen.fileName = counter === 0 ? 'primary' : `additional-${counter}`;\n//     imageArr.push(`${url}/${id}/${sharpen.fileName}.${sharpen.format}`);\n//     counter += 1;\n//     sharpResult.push(sharpen);\n//   }\n\n//   // const sharpResult = await Promise.all(newFiles);\n//   return { productData, sharpResult };\n// }\nvar create_new_product = [_utils_multerUpload__WEBPACK_IMPORTED_MODULE_13__[\"default\"].array('files', 6), _utils_productValidator_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"], express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee6(req, res, next) {\n    var resultValidation, _req$body, gender, category, isDraft, newProduct, _yield$generateProduc, productData, sharpResult, deleteId, deleteResult;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          resultValidation = (0,express_validator__WEBPACK_IMPORTED_MODULE_8__.validationResult)(req).formatWith(function (_ref7) {\n            var msg = _ref7.msg;\n            return msg;\n          });\n          if (resultValidation.isEmpty()) {\n            _context6.next = 4;\n            break;\n          }\n          res.status(400).send(resultValidation.mapped());\n          return _context6.abrupt(\"return\");\n        case 4:\n          _req$body = req.body, gender = _req$body.gender, category = _req$body.category;\n          isDraft = req.query.isDraft;\n          newProduct = new _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n            status: isDraft ? 'draft' : 'active'\n          });\n          _context6.next = 9;\n          return (0,_utils_generateProduct_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(req, newProduct.id);\n        case 9:\n          _yield$generateProduc = _context6.sent;\n          productData = _yield$generateProduc.productData;\n          sharpResult = _yield$generateProduc.sharpResult;\n          Object.assign(newProduct, productData);\n          _context6.prev = 13;\n          _context6.next = 16;\n          return _Models_category_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].updateOne({\n            _id: category\n          }, {\n            $push: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({}, gender, newProduct.id)\n          });\n        case 16:\n          _context6.next = 18;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])({\n            files: sharpResult,\n            isProfile: false,\n            folderId: newProduct.id,\n            endPoint: 'products'\n          });\n        case 18:\n          _context6.next = 20;\n          return newProduct.save();\n        case 20:\n          return _context6.abrupt(\"return\", res.send({\n            success: true,\n            msg: 'product saved'\n          }));\n        case 23:\n          _context6.prev = 23;\n          _context6.t0 = _context6[\"catch\"](13);\n          deleteId = newProduct.id;\n          _context6.next = 28;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_10__.s3Delete)('products', deleteId);\n        case 28:\n          deleteResult = _context6.sent;\n          next(_context6.t0);\n        case 30:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[13, 23]]);\n  }));\n  return function (_x15, _x16, _x17) {\n    return _ref6.apply(this, arguments);\n  };\n}())];\nvar update_product = [_utils_multerUpload__WEBPACK_IMPORTED_MODULE_13__[\"default\"].array('files', 6), _utils_productValidator_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"], express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee7(req, res, next) {\n    var _productData$price, _oldProduct$price;\n    var result, id, _req$body2, gender, category, _yield$generateProduc2, productData, sharpResult, oldProduct, newPrice;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_8__.validationResult)(req).formatWith(function (_ref9) {\n            var msg = _ref9.msg;\n            return msg;\n          });\n          if (result.isEmpty()) {\n            _context7.next = 4;\n            break;\n          }\n          res.status(400).send(result.mapped());\n          return _context7.abrupt(\"return\");\n        case 4:\n          id = req.params.id;\n          _req$body2 = req.body, gender = _req$body2.gender, category = _req$body2.category;\n          _context7.next = 8;\n          return (0,_utils_generateProduct_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(req, id);\n        case 8:\n          _yield$generateProduc2 = _context7.sent;\n          productData = _yield$generateProduc2.productData;\n          sharpResult = _yield$generateProduc2.sharpResult;\n          _context7.next = 13;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(id, {\n            category: 1,\n            gender: 1,\n            price: 1,\n            variations: 1\n            // minVariationPrice: 0,\n          }).populate({\n            path: 'category'\n          });\n        case 13:\n          oldProduct = _context7.sent;\n          _context7.next = 16;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_10__.s3Delete)('products', id);\n        case 16:\n          _context7.next = 18;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])({\n            files: sharpResult,\n            isProfile: false,\n            folderId: id,\n            endPoint: 'products'\n          });\n        case 18:\n          newPrice = {\n            current: productData === null || productData === void 0 || (_productData$price = productData.price) === null || _productData$price === void 0 ? void 0 : _productData$price.current,\n            previous: ((_oldProduct$price = oldProduct.price) === null || _oldProduct$price === void 0 ? void 0 : _oldProduct$price.current) || (oldProduct === null || oldProduct === void 0 ? void 0 : oldProduct.minVariationPrice)\n          };\n          productData.price = newPrice;\n          if (!(category !== oldProduct.category.id || gender !== oldProduct.gender)) {\n            _context7.next = 25;\n            break;\n          }\n          _context7.next = 23;\n          return _Models_category_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].updateOne({\n            _id: oldProduct.category\n          }, {\n            $pull: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({}, oldProduct.gender, id)\n          });\n        case 23:\n          _context7.next = 25;\n          return _Models_category_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].updateOne({\n            _id: category\n          }, {\n            $push: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({}, gender, id)\n          });\n        case 25:\n          _context7.next = 27;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(id, _objectSpread({}, productData), {\n            upsert: true\n          });\n        case 27:\n          res.send({\n            msg: 'product updated',\n            success: true\n          });\n        case 28:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return function (_x18, _x19, _x20) {\n    return _ref8.apply(this, arguments);\n  };\n}())];\nvar getVariations = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref10 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee8(req, res, next) {\n    var id, product, variation;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          id = req.params.id;\n          _context8.next = 3;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(id);\n        case 3:\n          product = _context8.sent;\n          variation = product.variations[0].options.get('67bec3e8-7010-4e96-b77e-cea2c38b2955');\n          res.send(variation);\n        case 6:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return function (_x21, _x22, _x23) {\n    return _ref10.apply(this, arguments);\n  };\n}());\nvar increment_visit = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref11 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee9(req, res, next) {\n    var id, product;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          id = req.params.id;\n          _context9.next = 3;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(id, {\n            $inc: {\n              visits: 1\n            }\n          }, {\n            \"new\": true,\n            lean: {\n              toObject: true\n            },\n            select: {\n              visits: 1\n            }\n          });\n        case 3:\n          product = _context9.sent;\n          res.status(200).send({\n            id: id,\n            success: true,\n            product: product\n          });\n        case 5:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return function (_x24, _x25, _x26) {\n    return _ref11.apply(this, arguments);\n  };\n}());\nvar update_product_delivery_profile = [(0,express_validator__WEBPACK_IMPORTED_MODULE_8__.check)('deliveryProfileId', 'Profile Id does not exist').escape().trim().notEmpty().custom(function (value) {\n  var find = _Models_deliveryProfile_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"].findById(value);\n  if (find) {\n    return true;\n  }\n  return false;\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_8__.check)('ids', 'Provide the product ids to update').isArray().isLength({\n  min: 1\n}), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref12 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee10(req, res, next) {\n    var _req$body3, ids, deliveryProfileId, errors, products;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          _req$body3 = req.body, ids = _req$body3.ids, deliveryProfileId = _req$body3.deliveryProfileId;\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_8__.validationResult)(req).formatWith(function (_ref13) {\n            var msg = _ref13.msg;\n            return msg;\n          });\n          if (errors.isEmpty()) {\n            _context10.next = 4;\n            break;\n          }\n          return _context10.abrupt(\"return\", res.status(404).send(errors.mapped()));\n        case 4:\n          _context10.next = 6;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].updateMany({\n            _id: ids\n          }, {\n            delivery: deliveryProfileId\n          });\n        case 6:\n          products = _context10.sent;\n          res.send({\n            msg: 'products delivery profile updated',\n            count: products.modifiedCount\n          });\n        case 8:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee10);\n  }));\n  return function (_x27, _x28, _x29) {\n    return _ref12.apply(this, arguments);\n  };\n}())];\nvar update_product_category = [express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref14 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee11(req, res, next) {\n    var _req$body4, ids, category, objectIds, products;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee11$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          _req$body4 = req.body, ids = _req$body4.ids, category = _req$body4.category;\n          objectIds = [];\n          ids.forEach(function (id) {\n            try {\n              objectIds.push(new (mongoose__WEBPACK_IMPORTED_MODULE_18___default().Types).ObjectId(id));\n            } catch (_unused) {\n              console.error(error);\n            }\n          });\n          _context11.next = 5;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].updateMany({\n            _id: {\n              $in: objectIds\n            }\n          }, {\n            // category: new mongoose.Types.ObjectId(category),\n            category: category\n          }, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 5:\n          products = _context11.sent;\n          console.log(products);\n          res.status(200).send({\n            total: objectIds.length\n          });\n        case 8:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee11);\n  }));\n  return function (_x30, _x31, _x32) {\n    return _ref14.apply(this, arguments);\n  };\n}())];\n\n//# sourceURL=webpack://server/./Controllers/productController.js?");

/***/ }),

/***/ "./Controllers/searchController.js":
/*!*****************************************!*\
  !*** ./Controllers/searchController.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   search_product: () => (/* binding */ search_product)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_product_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Models/product.js */ \"./Models/product.js\");\n\n\n/* eslint-disable import/prefer-default-export */\n\n\nvar search_product = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(req, res, next) {\n    var q, searchResult;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          q = req.query.q;\n          _context.next = 3;\n          return _Models_product_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].aggregate([{\n            $search: {\n              index: 'searchProductIndex',\n              autocomplete: {\n                query: q,\n                path: 'title',\n                fuzzy: {\n                  maxEdits: 2\n                }\n              }\n            }\n          }, {\n            $project: {\n              title: 1,\n              images: 1\n            }\n          }, {\n            $limit: 10\n          }\n\n          // {\n          //   $limit: 5,\n          // },\n          ]);\n        case 3:\n          searchResult = _context.sent;\n          console.log({\n            searchResult: searchResult\n          });\n          res.send(searchResult);\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n//# sourceURL=webpack://server/./Controllers/searchController.js?");

/***/ }),

/***/ "./Controllers/settingController.js":
/*!******************************************!*\
  !*** ./Controllers/settingController.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   get_setting: () => (/* binding */ get_setting),\n/* harmony export */   update_settings: () => (/* binding */ update_settings)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dotenv_config_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _Models_setting_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Models/setting.js */ \"./Models/setting.js\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n/* eslint-disable import/prefer-default-export */\n\n\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_3___default().Router();\nvar update_settings = [(0,express_validator__WEBPACK_IMPORTED_MODULE_7__.check)('delivery.full_name', 'Please enter a full name.').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_7__.check)('delivery.address_1', 'Please enter a street address.').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_7__.check)('delivery.address_2').escape().trim(), (0,express_validator__WEBPACK_IMPORTED_MODULE_7__.check)('delivery.city', 'Please enter a city.').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_7__.check)('delivery.post_code', 'Please enter a post code.').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_7__.check)('delivery.phone_number', 'Please enter a valid phone number.').escape().trim().notEmpty(), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(req, res, next) {\n    var errors, name, findSetting, setting;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          errors = (0,express_validator__WEBPACK_IMPORTED_MODULE_7__.validationResult)(req).formatWith(function (_ref2) {\n            var msg = _ref2.msg;\n            return msg;\n          });\n          if (errors.isEmpty()) {\n            _context.next = 4;\n            break;\n          }\n          console.log(errors.mapped());\n          return _context.abrupt(\"return\", res.status(404).send(errors.mapped()));\n        case 4:\n          name = req.body.name;\n          _context.next = 7;\n          return _Models_setting_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            name: name\n          });\n        case 7:\n          findSetting = _context.sent;\n          setting = null;\n          if (!findSetting) {\n            _context.next = 15;\n            break;\n          }\n          _context.next = 12;\n          return _Models_setting_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOneAndUpdate({\n            name: name\n          }, req.body, {\n            \"new\": true\n            // runValidators: true,\n          });\n        case 12:\n          setting = _context.sent;\n          _context.next = 18;\n          break;\n        case 15:\n          _context.next = 17;\n          return _Models_setting_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].create(req.body);\n        case 17:\n          setting = _context.sent;\n        case 18:\n          res.status(200).send({\n            msg: 'settings successfully updated',\n            setting: setting\n          });\n        case 19:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}())];\nvar get_setting = [express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee2(req, res, next) {\n    var _req$query;\n    var setting;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _Models_setting_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            name: 'general'\n          }, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({}, (_req$query = req.query) === null || _req$query === void 0 ? void 0 : _req$query.property, 1), {\n            lean: {\n              toObject: true\n            }\n          });\n        case 2:\n          setting = _context2.sent;\n          if (!setting) {\n            _context2.next = 5;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(200).send(setting));\n        case 5:\n          res.status(404).send({\n            msg: 'not found'\n          });\n        case 6:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}())];\n\n//# sourceURL=webpack://server/./Controllers/settingController.js?");

/***/ }),

/***/ "./Controllers/stripeController.js":
/*!*****************************************!*\
  !*** ./Controllers/stripeController.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   monthlyStatement: () => (/* binding */ monthlyStatement),\n/* harmony export */   stripeTransactions: () => (/* binding */ stripeTransactions)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _Models_order_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Models/order.js */ \"./Models/order.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/logger */ \"./utils/logger.js\");\n/* harmony import */ var _utils_getBalanceTransactionsList_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils/getBalanceTransactionsList.js */ \"./utils/getBalanceTransactionsList.js\");\n\n\n\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable eqeqeq */\n\n\n\n\n\n\n\n\n\nvar STRIPE_KEY = process.env.STRIPE_KEY;\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_4___default()(STRIPE_KEY);\nvar stripeTransactions = [express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee3(req, res, next) {\n    var date, _req$body, start_date, end_date, _yield$stripe$balance, transactions, fetchPromises, getSourceObject, getBalanceTransactions, _yield$Promise$all, _yield$Promise$all2, balance, stats;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          date = dayjs__WEBPACK_IMPORTED_MODULE_7___default()('2024-05-16').unix();\n          _req$body = req.body, start_date = _req$body.start_date, end_date = _req$body.end_date;\n          _context3.next = 4;\n          return stripe.balanceTransactions.list({\n            //   created: {\n            //     lte: date,\n            //   },\n            limit: 20\n          });\n        case 4:\n          _yield$stripe$balance = _context3.sent;\n          transactions = _yield$stripe$balance.data;\n          fetchPromises = [];\n          getSourceObject = /*#__PURE__*/function () {\n            var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(source) {\n              var first3Letter;\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    first3Letter = source.slice(0, 3);\n                    if (!(first3Letter === 'pyr')) {\n                      _context.next = 5;\n                      break;\n                    }\n                    return _context.abrupt(\"return\", stripe.refunds.retrieve(source));\n                  case 5:\n                    if (!(first3Letter === 'py_')) {\n                      _context.next = 9;\n                      break;\n                    }\n                    return _context.abrupt(\"return\", stripe.charges.retrieve(source));\n                  case 9:\n                    if (!(first3Letter === 'po_')) {\n                      _context.next = 11;\n                      break;\n                    }\n                    return _context.abrupt(\"return\", stripe.payouts.retrieve(source));\n                  case 11:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function getSourceObject(_x4) {\n              return _ref2.apply(this, arguments);\n            };\n          }();\n          transactions.forEach(function (element, idx) {\n            var source = element.source;\n            var first3Letter = source.slice(0, 3);\n            var sourcePromise = getSourceObject(source).then(function (sourceObject) {\n              element['sourceObject'] = sourceObject;\n              var metadata = sourceObject === null || sourceObject === void 0 ? void 0 : sourceObject.metadata;\n              if (metadata !== null && metadata !== void 0 && metadata.orderNumber || metadata !== null && metadata !== void 0 && metadata.order_id) {\n                var orderId = (metadata === null || metadata === void 0 ? void 0 : metadata.orderNumber) || (metadata === null || metadata === void 0 ? void 0 : metadata.order_id);\n                return _Models_order_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findById(orderId, null, {\n                  lean: {\n                    toObject: true\n                  }\n                });\n              }\n            }).then(function (value) {\n              if (value) {\n                element['order'] = value;\n              }\n            })[\"catch\"](function (error) {\n              _utils_logger__WEBPACK_IMPORTED_MODULE_10__[\"default\"].error(error, error.message);\n            });\n            fetchPromises.push(sourcePromise);\n          });\n\n          // const payments = stripe.balanceTransactions.list({\n          //   type: 'payment',\n          //   limit: 100,\n          // });\n          getBalanceTransactions = /*#__PURE__*/function () {\n            var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee2(type) {\n              var time,\n                results,\n                obj,\n                _yield$stripe$balance2,\n                data,\n                has_more,\n                lastTransaction,\n                _args2 = arguments;\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    time = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : null;\n                    results = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {\n                      amount: 0,\n                      fees: 0,\n                      net: 0\n                    };\n                    _context2.prev = 2;\n                    obj = {\n                      type: type,\n                      limit: 100,\n                      created: {\n                        lte: start_date,\n                        gte: end_date\n                      }\n                    };\n                    if (time) {\n                      obj.created = {\n                        lt: time\n                      };\n                    }\n                    console.log(obj);\n                    _context2.next = 8;\n                    return stripe.balanceTransactions.list(obj);\n                  case 8:\n                    _yield$stripe$balance2 = _context2.sent;\n                    data = _yield$stripe$balance2.data;\n                    has_more = _yield$stripe$balance2.has_more;\n                    data.forEach(function (_ref4) {\n                      var amount = _ref4.amount,\n                        fee = _ref4.fee,\n                        net = _ref4.net;\n                      results.amount += amount;\n                      results.fees += fee;\n                      results.net += net;\n                    });\n                    if (!has_more) {\n                      _context2.next = 17;\n                      break;\n                    }\n                    lastTransaction = lodash__WEBPACK_IMPORTED_MODULE_9___default().last(data);\n                    _context2.next = 16;\n                    return getBalanceTransactions(type, lastTransaction.created, results);\n                  case 16:\n                    return _context2.abrupt(\"return\", _context2.sent);\n                  case 17:\n                    return _context2.abrupt(\"return\", results);\n                  case 20:\n                    _context2.prev = 20;\n                    _context2.t0 = _context2[\"catch\"](2);\n                    console.error(_context2.t0);\n                  case 23:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2, null, [[2, 20]]);\n            }));\n            return function getBalanceTransactions(_x5) {\n              return _ref3.apply(this, arguments);\n            };\n          }();\n          _context3.next = 12;\n          return Promise.all([stripe.balance.retrieve(), (0,_utils_getBalanceTransactionsList_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"])({\n            gte: start_date,\n            lt: end_date\n          })].concat(fetchPromises));\n        case 12:\n          _yield$Promise$all = _context3.sent;\n          _yield$Promise$all2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_yield$Promise$all, 2);\n          balance = _yield$Promise$all2[0];\n          stats = _yield$Promise$all2[1];\n          res.send({\n            // chargesResult,\n            // paymentResult,\n            // paymentRefundResult,\n            // refundResult,\n            stats: stats,\n            balance: balance,\n            transactions: transactions\n          });\n        case 17:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}())];\nvar monthlyStatement = [(0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('month').escape().trim().toInt(), (0,express_validator__WEBPACK_IMPORTED_MODULE_6__.check)('year').escape().trim().toInt(), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee4(req, res, next) {\n    var _req$body2, month, year, date, createdObj, stats;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _req$body2 = req.body, month = _req$body2.month, year = _req$body2.year;\n          date = dayjs__WEBPACK_IMPORTED_MODULE_7___default()().year(year).month(month);\n          createdObj = {\n            gte: date.startOf('month').unix(),\n            lt: date.endOf('month').unix()\n          };\n          console.log({\n            month: month,\n            year: year,\n            createdObj: createdObj,\n            start_date: date.startOf().toISOString()\n          });\n          _context4.next = 6;\n          return (0,_utils_getBalanceTransactionsList_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(createdObj);\n        case 6:\n          stats = _context4.sent;\n          res.status(200).send(stats);\n        case 8:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x6, _x7, _x8) {\n    return _ref5.apply(this, arguments);\n  };\n}())];\n\n//# sourceURL=webpack://server/./Controllers/stripeController.js?");

/***/ }),

/***/ "./Controllers/userController.js":
/*!***************************************!*\
  !*** ./Controllers/userController.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addDigitalPaymentMethod: () => (/* binding */ addDigitalPaymentMethod),\n/* harmony export */   addPaymentMethod: () => (/* binding */ addPaymentMethod),\n/* harmony export */   addUserAddress: () => (/* binding */ addUserAddress),\n/* harmony export */   cancelOrder: () => (/* binding */ cancelOrder),\n/* harmony export */   changeDefaultMethod: () => (/* binding */ changeDefaultMethod),\n/* harmony export */   changeDetails: () => (/* binding */ changeDetails),\n/* harmony export */   changePassword: () => (/* binding */ changePassword),\n/* harmony export */   checkUser: () => (/* binding */ checkUser),\n/* harmony export */   create_user: () => (/* binding */ create_user),\n/* harmony export */   deleteAddress: () => (/* binding */ deleteAddress),\n/* harmony export */   deletePaymentMethod: () => (/* binding */ deletePaymentMethod),\n/* harmony export */   delete_many_user: () => (/* binding */ delete_many_user),\n/* harmony export */   delete_user: () => (/* binding */ delete_user),\n/* harmony export */   dummy_data: () => (/* binding */ dummy_data),\n/* harmony export */   editAddress: () => (/* binding */ editAddress),\n/* harmony export */   getAllUserData: () => (/* binding */ getAllUserData),\n/* harmony export */   getOrders: () => (/* binding */ getOrders),\n/* harmony export */   getPaymentMethods: () => (/* binding */ getPaymentMethods),\n/* harmony export */   getWishlist: () => (/* binding */ getWishlist),\n/* harmony export */   get_single_user: () => (/* binding */ get_single_user),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   logoutUser: () => (/* binding */ logoutUser),\n/* harmony export */   saveCustomerCard: () => (/* binding */ saveCustomerCard),\n/* harmony export */   setUpKlarna: () => (/* binding */ setUpKlarna),\n/* harmony export */   setUpPaypal: () => (/* binding */ setUpPaypal),\n/* harmony export */   signUp_user: () => (/* binding */ signUp_user),\n/* harmony export */   updateDefaultAddress: () => (/* binding */ updateDefaultAddress),\n/* harmony export */   updatePreferences: () => (/* binding */ updatePreferences),\n/* harmony export */   updateWishlist: () => (/* binding */ updateWishlist),\n/* harmony export */   update_single: () => (/* binding */ update_single),\n/* harmony export */   userLogout: () => (/* binding */ userLogout)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"@babel/runtime/helpers/typeof\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _Models_user_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Models/user.js */ \"./Models/user.js\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _Upload_fileFilter_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Upload/fileFilter.js */ \"./Upload/fileFilter.js\");\n/* harmony import */ var _Upload_sharpify_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Upload/sharpify.js */ \"./Upload/sharpify.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _utils_s3Service_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils/s3Service.js */ \"./utils/s3Service.js\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var dayjs_plugin_timezone_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! dayjs/plugin/timezone.js */ \"dayjs/plugin/timezone.js\");\n/* harmony import */ var dayjs_plugin_timezone_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_timezone_js__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var dayjs_plugin_utc_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! dayjs/plugin/utc.js */ \"dayjs/plugin/utc.js\");\n/* harmony import */ var dayjs_plugin_utc_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_utc_js__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _utils_passport_passport_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utils/passport/passport.js */ \"./utils/passport/passport.js\");\n/* harmony import */ var _middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../middleware/checkAuthenticated.js */ \"./middleware/checkAuthenticated.js\");\n/* harmony import */ var _Models_address_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../Models/address.js */ \"./Models/address.js\");\n/* harmony import */ var _utils_addressValidator_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../utils/addressValidator.js */ \"./utils/addressValidator.js\");\n/* harmony import */ var _utils_errorRegenerator_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../utils/errorRegenerator.js */ \"./utils/errorRegenerator.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _Models_order_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../Models/order.js */ \"./Models/order.js\");\n/* harmony import */ var libphonenumber_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! libphonenumber-js */ \"libphonenumber-js\");\n/* harmony import */ var libphonenumber_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(libphonenumber_js__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony import */ var _React_Email_emails_changePassword_jsx__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../React Email/emails/changePassword.jsx */ \"./React Email/emails/changePassword.jsx\");\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @react-email/render */ \"@react-email/render\");\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(_react_email_render__WEBPACK_IMPORTED_MODULE_29__);\n/* harmony import */ var _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../utils/nodemailer.js */ \"./utils/nodemailer.js\");\n/* harmony import */ var _React_Email_emails_changeEmail_jsx__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../React Email/emails/changeEmail.jsx */ \"./React Email/emails/changeEmail.jsx\");\n/* harmony import */ var _utils_userValidators_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../utils/userValidators.js */ \"./utils/userValidators.js\");\n/* harmony import */ var _React_Email_emails_orderCancelled_jsx__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../React Email/emails/orderCancelled.jsx */ \"./React Email/emails/orderCancelled.jsx\");\n/* harmony import */ var nodemon__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! nodemon */ \"nodemon\");\n/* harmony import */ var nodemon__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(nodemon__WEBPACK_IMPORTED_MODULE_34__);\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../utils/logger.js */ \"./utils/logger.js\");\n\n\n\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n/* eslint-disable import/prefer-default-export */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_24___default()(process.env.STRIPE_KEY);\nvar CLIENT_URL = process.env.CLIENT_URL;\nvar SALT_ROUNDS = process.env.SALT_ROUNDS;\ndayjs__WEBPACK_IMPORTED_MODULE_16___default().extend((dayjs_plugin_utc_js__WEBPACK_IMPORTED_MODULE_15___default()));\ndayjs__WEBPACK_IMPORTED_MODULE_16___default().extend((dayjs_plugin_timezone_js__WEBPACK_IMPORTED_MODULE_14___default()));\nvar handleProfilePhoto = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee(file, id) {\n    var compressImg, profileImg, updateUser;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!file) {\n            _context.next = 11;\n            break;\n          }\n          _context.next = 3;\n          return (0,_Upload_sharpify_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(file, 'profile');\n        case 3:\n          compressImg = _context.sent;\n          compressImg.id = id;\n          _context.next = 7;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"])({\n            files: [compressImg],\n            isProfile: true,\n            endPoint: 'user'\n          });\n        case 7:\n          profileImg = \"\".concat(process.env.UPLOAD_URL, \"/user/\").concat(id, \".\").concat(compressImg.format);\n          _context.next = 10;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(id, {\n            profileImg: profileImg\n          }, {\n            upsert: true,\n            \"new\": true\n          });\n        case 10:\n          updateUser = _context.sent;\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function handleProfilePhoto(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n// test\nvar dummy_data = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee2(req, res, next) {\n    var dummyUsers, bulkCreate;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          dummyUsers = [{\n            firstName: 'John',\n            lastName: 'Doe',\n            email: 'johndoe@example.com',\n            password: 'password123',\n            dob: new Date('1990-01-15'),\n            interest: 'Menswear'\n          }, {\n            firstName: 'Jane',\n            lastName: 'Smith',\n            email: 'janesmith@example.com',\n            password: 'securepassword',\n            dob: new Date('1985-05-20'),\n            interest: 'Womenswear'\n          }, {\n            firstName: 'Alice',\n            lastName: 'Johnson',\n            email: 'alice@example.com',\n            password: 'mysecretpassword',\n            dob: new Date('1995-09-10'),\n            interest: 'Menswear'\n          }, {\n            firstName: 'Ella',\n            lastName: 'Brown',\n            email: 'ella@example.com',\n            password: 'mypassword123',\n            dob: new Date('1988-11-30'),\n            interest: 'Womenswear'\n          }];\n          _context2.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].insertMany(dummyUsers);\n        case 3:\n          bulkCreate = _context2.sent;\n          res.send(bulkCreate);\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nvar delete_user = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee3(req, res, next) {\n    var id, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          id = req.params.id;\n          _context3.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndDelete(id);\n        case 3:\n          user = _context3.sent;\n          _context3.next = 6;\n          return (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_11__.s3Delete)('user', id);\n        case 6:\n          res.status(200).json({\n            msg: 'user Deleted',\n            user: user\n          });\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function (_x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nvar delete_many_user = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee4(req, res, next) {\n    var id, idArr, deleteUserImage, result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          id = req.params.id;\n          idArr = id.split(',');\n          deleteUserImage = idArr.map(function (item) {\n            (0,_utils_s3Service_js__WEBPACK_IMPORTED_MODULE_11__.s3Delete)('user', item);\n          });\n          _context4.next = 5;\n          return Promise.all([_Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].deleteMany({\n            _id: idArr\n          }), deleteUserImage]);\n        case 5:\n          result = _context4.sent;\n          res.status(200).send(result);\n        case 7:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x9, _x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nvar storage = multer__WEBPACK_IMPORTED_MODULE_7___default().memoryStorage();\nvar upload = multer__WEBPACK_IMPORTED_MODULE_7___default()({\n  storage: storage,\n  fileFilter: _Upload_fileFilter_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"],\n  limits: {\n    fileSize: 1000000000,\n    files: 6\n  }\n});\nvar create_user = [upload.single('file'), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee5(req, res, next) {\n    var file, _req$body, password, firstName, lastName, dob, address, mobile, email, interest, hashPassword, user, id;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          file = req.file;\n          _req$body = req.body, password = _req$body.password, firstName = _req$body.firstName, lastName = _req$body.lastName, dob = _req$body.dob, address = _req$body.address, mobile = _req$body.mobile, email = _req$body.email, interest = _req$body.interest;\n          _context5.next = 4;\n          return bcryptjs__WEBPACK_IMPORTED_MODULE_10___default().hash(password, 10);\n        case 4:\n          hashPassword = _context5.sent;\n          _context5.next = 7;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].create({\n            password: hashPassword,\n            firstName: firstName,\n            lastName: lastName,\n            dob: dob,\n            address: [address],\n            mobile: mobile,\n            email: email,\n            interest: interest\n          });\n        case 7:\n          user = _context5.sent;\n          id = user.id;\n          _context5.next = 11;\n          return handleProfilePhoto(file, id);\n        case 11:\n          res.status(201).send(user);\n        case 12:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}())];\nvar signUp_user = [_utils_userValidators_js__WEBPACK_IMPORTED_MODULE_32__[\"default\"], express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee6(req, res, next) {\n    var _req$body2, firstName, email, password, lastName, result, newResult, salt, hashPassword, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _req$body2 = req.body, firstName = _req$body2.firstName, email = _req$body2.email, password = _req$body2.password, lastName = _req$body2.lastName;\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.validationResult)(req);\n          if (result.isEmpty()) {\n            _context6.next = 6;\n            break;\n          }\n          newResult = {};\n          result.errors.map(function (_ref7) {\n            var path = _ref7.path,\n              msg = _ref7.msg;\n            newResult[path] = msg;\n          });\n          return _context6.abrupt(\"return\", res.status(400).send(newResult));\n        case 6:\n          salt = bcryptjs__WEBPACK_IMPORTED_MODULE_10___default().genSaltSync(parseInt(SALT_ROUNDS));\n          hashPassword = bcryptjs__WEBPACK_IMPORTED_MODULE_10___default().hashSync(password, salt);\n          _context6.next = 10;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].create(_objectSpread(_objectSpread({}, req.body), {}, {\n            password: hashPassword\n          }));\n        case 10:\n          user = _context6.sent;\n          _context6.next = 13;\n          return stripe.customers.create({\n            id: user.id,\n            name: \"\".concat(firstName, \" \").concat(lastName),\n            email: email\n          });\n        case 13:\n          res.status(200).send({\n            msg: 'user created',\n            user: user\n          });\n        case 14:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function (_x15, _x16, _x17) {\n    return _ref6.apply(this, arguments);\n  };\n}())];\nvar get_single_user = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee7(req, res, next) {\n    var id, sixMonthsFromToday, _yield$Promise$all, _yield$Promise$all2, user, orders, getOrdersByMonth;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          id = req.params.id;\n          sixMonthsFromToday = dayjs__WEBPACK_IMPORTED_MODULE_16___default()().subtract(6, 'month').set('D', 1).set('h', 1).set('m', 0).set('s', 0).toDate();\n          _context7.next = 4;\n          return Promise.all([_Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(id, null, {\n            populate: {\n              path: 'default_address.shipping_address'\n            }\n          }), _Models_order_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"].find({\n            customer: id\n          }, null, {\n            sort: {\n              createdAt: -1\n            },\n            limit: 5,\n            populate: {\n              path: 'items.product'\n            }\n          }), _Models_order_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"].aggregate([{\n            $match: {\n              status: {\n                $in: ['received', 'shipped', 'delivered']\n              },\n              createdAt: {\n                $gte: sixMonthsFromToday\n              },\n              customer: new (mongoose__WEBPACK_IMPORTED_MODULE_23___default().Types).ObjectId(id)\n            }\n          }, {\n            $group: {\n              _id: {\n                $month: '$createdAt'\n              },\n              total: {\n                $sum: '$transaction_cost.total'\n              },\n              numOfOrders: {\n                $sum: 1\n              }\n              /* status: { $match: { $or: ['received', 'shipped', 'delivered'] } }, */\n              // customer: { $match: id },\n            }\n          }, {\n            $sort: {\n              _id: 1\n            }\n          }]).exec()]);\n        case 4:\n          _yield$Promise$all = _context7.sent;\n          _yield$Promise$all2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_yield$Promise$all, 3);\n          user = _yield$Promise$all2[0];\n          orders = _yield$Promise$all2[1];\n          getOrdersByMonth = _yield$Promise$all2[2];\n          if (!user) {\n            res.status(404).send('User Not Found');\n          } else {\n            res.status(200).send({\n              user: user,\n              orders: orders,\n              getOrdersByMonth: getOrdersByMonth\n            });\n          }\n        case 10:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return function (_x18, _x19, _x20) {\n    return _ref8.apply(this, arguments);\n  };\n}());\nvar update_single = [upload.single('file'), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee8(req, res, next) {\n    var id, file, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          id = req.params.id;\n          file = req.file;\n          _context8.next = 4;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].updateOne({\n            _id: id\n          }, req.body, {\n            \"new\": true,\n            upsert: true,\n            runValidators: true\n          });\n        case 4:\n          user = _context8.sent;\n          _context8.next = 7;\n          return handleProfilePhoto(file, id);\n        case 7:\n          res.status(200).send(user);\n        case 8:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return function (_x21, _x22, _x23) {\n    return _ref9.apply(this, arguments);\n  };\n}())];\nvar loginUser = [(0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('email', 'Please enter a valid email address.').trim().isEmail().custom( /*#__PURE__*/function () {\n  var _ref10 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee9(email) {\n    var findUser;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            email: email\n          });\n        case 2:\n          findUser = _context9.sent;\n          if (findUser) {\n            _context9.next = 5;\n            break;\n          }\n          throw new Error('User does not exist.');\n        case 5:\n          return _context9.abrupt(\"return\", true);\n        case 6:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return function (_x24) {\n    return _ref10.apply(this, arguments);\n  };\n}()), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('password', 'Please enter a valid password between 10 to 20 characters.').trim().notEmpty().escape().trim().isLength({\n  min: 10,\n  max: 20\n}), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref11 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee10(req, res, next) {\n    var result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.validationResult)(req).formatWith(function (_ref12) {\n            var msg = _ref12.msg;\n            return msg;\n          });\n          if (result.isEmpty()) {\n            _context10.next = 3;\n            break;\n          }\n          return _context10.abrupt(\"return\", res.status(400).send(result.mapped()));\n        case 3:\n          _utils_passport_passport_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"].authenticate('local', function (err, user, info) {\n            if (err) {\n              return next(err);\n            }\n            if (!user) {\n              return res.status(400).send({\n                password: 'The password is invalid. Please try again.'\n              });\n            }\n            req.logIn(user, function (error) {\n              if (error) {\n                return next(err);\n              }\n              return res.redirect('/api/user/check');\n            });\n          })(req, res, next);\n        case 4:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee10);\n  }));\n  return function (_x25, _x26, _x27) {\n    return _ref11.apply(this, arguments);\n  };\n}())];\nvar userLogout = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref13 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee11(req, res, next) {\n    var _req$user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee11$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          if (req.isAuthenticated()) {\n            req.logout();\n            _utils_logger_js__WEBPACK_IMPORTED_MODULE_35__[\"default\"].info(\"user \".concat((_req$user = req.user) === null || _req$user === void 0 ? void 0 : _req$user._id, \" log out successfully.\"));\n          }\n          res.status(200).clearCookie('connect.sid').send({\n            msg: 'Successfully logout user.',\n            authenticated: false\n          });\n        case 2:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee11);\n  }));\n  return function (_x28, _x29, _x30) {\n    return _ref13.apply(this, arguments);\n  };\n}());\nvar checkUser = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref14 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee12(req, res, next) {\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee12$(_context12) {\n      while (1) switch (_context12.prev = _context12.next) {\n        case 0:\n          if (!req.isAuthenticated()) {\n            _context12.next = 2;\n            break;\n          }\n          return _context12.abrupt(\"return\", res.status(200).send({\n            authenticated: true,\n            user: req.user\n          }));\n        case 2:\n          return _context12.abrupt(\"return\", res.status(401).send({\n            authenticated: false\n          }));\n        case 3:\n        case \"end\":\n          return _context12.stop();\n      }\n    }, _callee12);\n  }));\n  return function (_x31, _x32, _x33) {\n    return _ref14.apply(this, arguments);\n  };\n}());\nvar logoutUser = express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref15 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee13(req, res, next) {\n    var _req$user2;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee13$(_context13) {\n      while (1) switch (_context13.prev = _context13.next) {\n        case 0:\n          // req.logOut();\n          // req.session.destroy();\n          // logger.info(`user ${req.user.id} log out successfully`);\n          // return res.status(200).clearCookie('connect.sid').send({\n          //   msg: 'Successfully logout user.',\n          //   authenticated: false,\n          // });\n\n          req.logout(function (err) {\n            if (err) {\n              throw new Error(err);\n            }\n            res.clearCookie('connect.sid').send({\n              msg: 'Successfully logout user.',\n              authenticated: false\n            });\n          });\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_35__[\"default\"].info(\"user \".concat(req === null || req === void 0 || (_req$user2 = req.user) === null || _req$user2 === void 0 ? void 0 : _req$user2._id, \" log out successfully\"));\n        case 2:\n        case \"end\":\n          return _context13.stop();\n      }\n    }, _callee13);\n  }));\n  return function (_x34, _x35, _x36) {\n    return _ref15.apply(this, arguments);\n  };\n}());\nvar getAllUserData = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref16 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee14(req, res, next) {\n    var user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee14$(_context14) {\n      while (1) switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(req.session.passport.user, {\n            password: 0\n          }, {\n            lean: {\n              toObject: true\n            },\n            populate: {\n              path: 'address'\n            }\n          }).exec();\n        case 2:\n          user = _context14.sent;\n          console.log({\n            type: _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(user === null || user === void 0 ? void 0 : user.dob)\n          });\n          // .populate('address')\n          res.send({\n            user: user\n          });\n        case 5:\n        case \"end\":\n          return _context14.stop();\n      }\n    }, _callee14);\n  }));\n  return function (_x37, _x38, _x39) {\n    return _ref16.apply(this, arguments);\n  };\n}())];\nvar changeDetails = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('firstName', 'Please enter a first name').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('lastName', 'Please enter a last name').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('email', 'Please enter a valid email').trim().escape().isEmail().notEmpty().custom( /*#__PURE__*/function () {\n  var _ref18 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee15(value, _ref17) {\n    var _req$session$passport;\n    var req, userId, currentUser, findNewEmail, todayDate, lastTimeEmailChanged, difference;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee15$(_context15) {\n      while (1) switch (_context15.prev = _context15.next) {\n        case 0:\n          req = _ref17.req;\n          userId = (_req$session$passport = req.session.passport) === null || _req$session$passport === void 0 ? void 0 : _req$session$passport.user;\n          _context15.next = 4;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(userId, {\n            email: 1,\n            lastEmailChange: 1\n          }, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 4:\n          currentUser = _context15.sent;\n          _context15.next = 7;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            email: value\n          }, {\n            email: 1\n          }, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 7:\n          findNewEmail = _context15.sent;\n          if (!((currentUser === null || currentUser === void 0 ? void 0 : currentUser.email) == (findNewEmail === null || findNewEmail === void 0 ? void 0 : findNewEmail.email))) {\n            _context15.next = 10;\n            break;\n          }\n          return _context15.abrupt(\"return\", true);\n        case 10:\n          if (!(currentUser !== null && currentUser !== void 0 && currentUser.lastEmailChange)) {\n            _context15.next = 16;\n            break;\n          }\n          todayDate = dayjs__WEBPACK_IMPORTED_MODULE_16___default()();\n          lastTimeEmailChanged = dayjs__WEBPACK_IMPORTED_MODULE_16___default()(currentUser === null || currentUser === void 0 ? void 0 : currentUser.lastEmailChange);\n          difference = todayDate.diff(lastTimeEmailChanged, 'minute');\n          if (!(difference < 30)) {\n            _context15.next = 16;\n            break;\n          }\n          throw new Error(\"Sorry, you'll need to wait \".concat(30 - difference, \" minutes to change your email address again.\"));\n        case 16:\n          if (!findNewEmail) {\n            _context15.next = 18;\n            break;\n          }\n          throw new Error(\"\".concat(value, \" is already registered\"));\n        case 18:\n          return _context15.abrupt(\"return\", true);\n        case 19:\n        case \"end\":\n          return _context15.stop();\n      }\n    }, _callee15);\n  }));\n  return function (_x40, _x41) {\n    return _ref18.apply(this, arguments);\n  };\n}()), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('interest', 'Please select a valid interest.').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('dob', 'Must be 18 years old or older').trim().escape().notEmpty().custom(function (value) {\n  var todayDate = dayjs__WEBPACK_IMPORTED_MODULE_16___default()();\n  var dateOfBirth = dayjs__WEBPACK_IMPORTED_MODULE_16___default()(value);\n  var difference = todayDate.diff(dateOfBirth, 'year');\n  if (difference >= 18) {\n    return true;\n  }\n  return false;\n}), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref19 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee16(req, res, next) {\n    var _req$body3;\n    var body, userId, result, user, _req$body4, _req$body5, _req$body6, _req$body7, previousEmailHtml, newEmailHtml, mailOptions, promiseResult;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee16$(_context16) {\n      while (1) switch (_context16.prev = _context16.next) {\n        case 0:\n          body = req.body;\n          userId = req.session.passport.user;\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.validationResult)(req).formatWith(function (_ref20) {\n            var msg = _ref20.msg;\n            return msg;\n          });\n          if (result !== null && result !== void 0 && result.isEmpty()) {\n            _context16.next = 5;\n            break;\n          }\n          return _context16.abrupt(\"return\", res.status(400).send({\n            error: result.mapped(),\n            success: false\n          }));\n        case 5:\n          _context16.next = 7;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, body, {\n            select: {\n              email: 1\n            },\n            lean: {\n              toObject: true\n            },\n            \"new\": false,\n            // returnDocument: 'after',\n            runValidators: true\n          });\n        case 7:\n          user = _context16.sent;\n          if (!((user === null || user === void 0 ? void 0 : user.email) != ((_req$body3 = req.body) === null || _req$body3 === void 0 ? void 0 : _req$body3.email))) {\n            _context16.next = 15;\n            break;\n          }\n          previousEmailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_29__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_27__.createElement(_React_Email_emails_changeEmail_jsx__WEBPACK_IMPORTED_MODULE_31__[\"default\"], {\n            firstName: (_req$body4 = req.body) === null || _req$body4 === void 0 ? void 0 : _req$body4.firstName,\n            newEmail: (_req$body5 = req.body) === null || _req$body5 === void 0 ? void 0 : _req$body5.email\n          }));\n          newEmailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_29__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_27__.createElement(_React_Email_emails_changeEmail_jsx__WEBPACK_IMPORTED_MODULE_31__[\"default\"], {\n            firstName: (_req$body6 = req.body) === null || _req$body6 === void 0 ? void 0 : _req$body6.firstName\n          }));\n          mailOptions = {\n            from: process.env.SENDER,\n            subject: 'You’ve updated your email address'\n          };\n          _context16.next = 14;\n          return Promise.all([_utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_30__[\"default\"].sendMail(_objectSpread(_objectSpread({}, mailOptions), {}, {\n            to: user === null || user === void 0 ? void 0 : user.email,\n            html: previousEmailHtml\n          })), _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_30__[\"default\"].sendMail(_objectSpread(_objectSpread({}, mailOptions), {}, {\n            to: (_req$body7 = req.body) === null || _req$body7 === void 0 ? void 0 : _req$body7.email,\n            html: newEmailHtml\n          })), _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, {\n            lastEmailChange: Date.now()\n          }, {\n            lean: {\n              toObject: true\n            },\n            select: {\n              email: 1\n            }\n          })]);\n        case 14:\n          promiseResult = _context16.sent;\n        case 15:\n          res.redirect(303, '/api/user/check');\n        case 16:\n        case \"end\":\n          return _context16.stop();\n      }\n    }, _callee16);\n  }));\n  return function (_x42, _x43, _x44) {\n    return _ref19.apply(this, arguments);\n  };\n}())];\nvar addUserAddress = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, _utils_addressValidator_js__WEBPACK_IMPORTED_MODULE_20__[\"default\"], express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref21 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee17(req, res, next) {\n    var result, newResult, userId, address, _yield$Promise$all3, _yield$Promise$all4, newAddress, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee17$(_context17) {\n      while (1) switch (_context17.prev = _context17.next) {\n        case 0:\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.validationResult)(req);\n          if (result.isEmpty()) {\n            _context17.next = 4;\n            break;\n          }\n          newResult = (0,_utils_errorRegenerator_js__WEBPACK_IMPORTED_MODULE_21__[\"default\"])(result);\n          return _context17.abrupt(\"return\", res.status(400).send(newResult));\n        case 4:\n          userId = req.session.passport.user;\n          address = new _Models_address_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"](_objectSpread(_objectSpread({}, req.body), {}, {\n            userId: userId\n          }));\n          _context17.next = 8;\n          return Promise.all([address.save(), _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, {\n            $push: {\n              address: address._id\n            }\n          }, {\n            runValidators: true,\n            \"new\": true,\n            select: {\n              password: 0\n            }\n          }).populate('address').exec()]);\n        case 8:\n          _yield$Promise$all3 = _context17.sent;\n          _yield$Promise$all4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_yield$Promise$all3, 2);\n          newAddress = _yield$Promise$all4[0];\n          user = _yield$Promise$all4[1];\n          if (!(user.address.length == 1)) {\n            _context17.next = 16;\n            break;\n          }\n          user.default_address = {\n            billing_address: address.id,\n            shipping_address: address.id\n          };\n          _context17.next = 16;\n          return user.save();\n        case 16:\n          res.status(200).send({\n            success: true,\n            address: user.address,\n            default_address: user.default_address\n          });\n        case 17:\n        case \"end\":\n          return _context17.stop();\n      }\n    }, _callee17);\n  }));\n  return function (_x45, _x46, _x47) {\n    return _ref21.apply(this, arguments);\n  };\n}())];\nvar deleteAddress = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref22 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee18(req, res, next) {\n    var id, userId, _yield$Promise$all5, _yield$Promise$all6, address, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee18$(_context18) {\n      while (1) switch (_context18.prev = _context18.next) {\n        case 0:\n          id = req.params.id;\n          userId = req.session.passport.user;\n          _context18.next = 4;\n          return Promise.all([_Models_address_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"].findByIdAndDelete(id), _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, {\n            $pull: {\n              address: id\n            }\n          }, {\n            runValidators: true,\n            \"new\": true,\n            select: {\n              password: 0\n            }\n          }).populate('address').exec()]);\n        case 4:\n          _yield$Promise$all5 = _context18.sent;\n          _yield$Promise$all6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_yield$Promise$all5, 2);\n          address = _yield$Promise$all6[0];\n          user = _yield$Promise$all6[1];\n          if (!(user.default_address.shipping_address == address.id)) {\n            _context18.next = 12;\n            break;\n          }\n          user.default_address = {\n            shipping_address: null,\n            billing_address: null\n          };\n          _context18.next = 12;\n          return user.save();\n        case 12:\n          res.status(200).send({\n            success: true,\n            address: user.address\n          });\n        case 13:\n        case \"end\":\n          return _context18.stop();\n      }\n    }, _callee18);\n  }));\n  return function (_x48, _x49, _x50) {\n    return _ref22.apply(this, arguments);\n  };\n}())];\nvar editAddress = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, _utils_addressValidator_js__WEBPACK_IMPORTED_MODULE_20__[\"default\"], express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref23 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee19(req, res, next) {\n    var _req$body8, _req$body9;\n    var result, id, newResult, user, isUserAddress, parseNumber;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee19$(_context19) {\n      while (1) switch (_context19.prev = _context19.next) {\n        case 0:\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.validationResult)(req);\n          id = req.params.id;\n          if (result.isEmpty()) {\n            _context19.next = 5;\n            break;\n          }\n          newResult = (0,_utils_errorRegenerator_js__WEBPACK_IMPORTED_MODULE_21__[\"default\"])(result);\n          return _context19.abrupt(\"return\", res.status(400).send(newResult));\n        case 5:\n          _context19.next = 7;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(req.session.passport.user, {\n            address: 1\n          });\n        case 7:\n          user = _context19.sent;\n          isUserAddress = user.address.some(function (item) {\n            return item.toString() == id;\n          });\n          if (isUserAddress) {\n            _context19.next = 11;\n            break;\n          }\n          return _context19.abrupt(\"return\", res.status(404).send({\n            notFound: true\n          }));\n        case 11:\n          parseNumber = (0,libphonenumber_js__WEBPACK_IMPORTED_MODULE_26__.parsePhoneNumberFromString)((_req$body8 = req.body) === null || _req$body8 === void 0 ? void 0 : _req$body8.mobile, (_req$body9 = req.body) === null || _req$body9 === void 0 ? void 0 : _req$body9.country);\n          if (!isUserAddress) {\n            _context19.next = 16;\n            break;\n          }\n          _context19.next = 15;\n          return _Models_address_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"].findByIdAndUpdate(id, _objectSpread(_objectSpread({}, req.body), {}, {\n            mobile: parseNumber === null || parseNumber === void 0 ? void 0 : parseNumber.number\n          }), {\n            \"new\": true\n          });\n        case 15:\n          return _context19.abrupt(\"return\", res.redirect(303, '/api/user/userData'));\n        case 16:\n        case \"end\":\n          return _context19.stop();\n      }\n    }, _callee19);\n  }));\n  return function (_x51, _x52, _x53) {\n    return _ref23.apply(this, arguments);\n  };\n}())];\nvar updatePreferences = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref24 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee20(req, res, next) {\n    var userId, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee20$(_context20) {\n      while (1) switch (_context20.prev = _context20.next) {\n        case 0:\n          userId = req.session.passport.user;\n          _context20.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, {\n            contact_preferences: req.body\n          }, {\n            \"new\": true,\n            upsert: true\n          });\n        case 3:\n          user = _context20.sent;\n          res.status(200).send({\n            msg: 'User contact preferences successfully updates'\n          });\n        case 5:\n        case \"end\":\n          return _context20.stop();\n      }\n    }, _callee20);\n  }));\n  return function (_x54, _x55, _x56) {\n    return _ref24.apply(this, arguments);\n  };\n}())];\nvar updateDefaultAddress = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref25 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee21(req, res, next) {\n    var body, property, value, userId, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee21$(_context21) {\n      while (1) switch (_context21.prev = _context21.next) {\n        case 0:\n          body = req.body;\n          property = Object.keys(body)[0];\n          value = Object.values(body)[0];\n          userId = req.session.passport.user;\n          _context21.next = 6;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, {\n            $set: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()({}, \"default_address.\".concat(property), value)\n          }, {\n            \"new\": true,\n            upsert: true,\n            select: {\n              default_address: 1\n            }\n          });\n        case 6:\n          user = _context21.sent;\n          return _context21.abrupt(\"return\", res.status(200).send({\n            msg: \"succussfully update user default \".concat(property.replaceAll('_', ' '), \".\"),\n            default_address: user.default_address\n          }));\n        case 8:\n        case \"end\":\n          return _context21.stop();\n      }\n    }, _callee21);\n  }));\n  return function (_x57, _x58, _x59) {\n    return _ref25.apply(this, arguments);\n  };\n}())];\nvar addPaymentMethod = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('logo').escape().trim(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('description').escape().trim(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('alt').escape().trim(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('text').escape().trim(), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref26 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee22(req, res, next) {\n    var userId, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee22$(_context22) {\n      while (1) switch (_context22.prev = _context22.next) {\n        case 0:\n          userId = req.session.passport.user;\n          _context22.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, {\n            $push: {\n              payment_methods: _objectSpread({\n                id: new (mongoose__WEBPACK_IMPORTED_MODULE_23___default().Types).ObjectId()\n              }, req.body)\n            }\n          }, {\n            upsert: true,\n            \"new\": true,\n            select: {\n              payment_methods: 1\n            }\n          });\n        case 3:\n          user = _context22.sent;\n          res.status(200).send({\n            msg: 'payment method successfully added',\n            payment_methods: user.payment_methods\n          });\n        case 5:\n        case \"end\":\n          return _context22.stop();\n      }\n    }, _callee22);\n  }));\n  return function (_x60, _x61, _x62) {\n    return _ref26.apply(this, arguments);\n  };\n}())];\nvar deletePaymentMethod = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref27 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee23(req, res, next) {\n    var id, userId;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee23$(_context23) {\n      while (1) switch (_context23.prev = _context23.next) {\n        case 0:\n          id = req.params.id;\n          userId = req.session.passport.user;\n          _context23.next = 4;\n          return stripe.paymentMethods.detach(id);\n        case 4:\n          res.redirect(303, '/api/user/payment-method/all');\n          // const user = await User.findByIdAndUpdate(\n          //   userId,\n          //   {\n          //     $pull: {\n          //       payment_methods: { _id: id },\n          //     },\n          //   },\n          //   { upsert: true, new: true, select: { payment_methods: 1 } },\n          // );\n          // console.log({ payment_methods: user.payment_methods });\n          // res.status(200).send({\n          //   msg: 'payment method successfully added',\n          //   payment_methods: user.payment_methods,\n          // });\n        case 5:\n        case \"end\":\n          return _context23.stop();\n      }\n    }, _callee23);\n  }));\n  return function (_x63, _x64, _x65) {\n    return _ref27.apply(this, arguments);\n  };\n}())];\nvar changeDefaultMethod = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref28 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee24(req, res, next) {\n    var id, userId, customer;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee24$(_context24) {\n      while (1) switch (_context24.prev = _context24.next) {\n        case 0:\n          id = req.params.id;\n          userId = req.session.passport.user;\n          _context24.next = 4;\n          return stripe.customers.update(userId, {\n            invoice_settings: {\n              default_payment_method: id\n            }\n          });\n        case 4:\n          customer = _context24.sent;\n          res.redirect(303, '/api/user/payment-method/all');\n        case 6:\n        case \"end\":\n          return _context24.stop();\n      }\n    }, _callee24);\n  }));\n  return function (_x66, _x67, _x68) {\n    return _ref28.apply(this, arguments);\n  };\n}())];\nvar saveCustomerCard = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref29 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee25(req, res, next) {\n    var userId, findCustomer, allCustomers, checkExists, setupIntent, customer;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee25$(_context25) {\n      while (1) switch (_context25.prev = _context25.next) {\n        case 0:\n          userId = req.session.passport.user;\n          _context25.next = 3;\n          return stripe.customers.list();\n        case 3:\n          findCustomer = _context25.sent;\n          allCustomers = findCustomer.data;\n          checkExists = allCustomers.some(function (item) {\n            return item.id == userId;\n          });\n          setupIntent = null;\n          if (!checkExists) {\n            _context25.next = 13;\n            break;\n          }\n          _context25.next = 10;\n          return stripe.setupIntents.create({\n            customer: userId,\n            payment_method_types: ['card']\n          });\n        case 10:\n          setupIntent = _context25.sent;\n          _context25.next = 19;\n          break;\n        case 13:\n          _context25.next = 15;\n          return stripe.customers.create({\n            id: userId,\n            name: \"\".concat(req.user.firstName, \" \").concat(req.user.lastName),\n            email: req.user.email\n          });\n        case 15:\n          customer = _context25.sent;\n          _context25.next = 18;\n          return stripe.setupIntents.create({\n            customer: userId,\n            payment_method_types: ['card']\n          });\n        case 18:\n          setupIntent = _context25.sent;\n        case 19:\n          res.send({\n            success: true,\n            id: setupIntent.id,\n            client_secret: setupIntent.client_secret\n          });\n        case 20:\n        case \"end\":\n          return _context25.stop();\n      }\n    }, _callee25);\n  }));\n  return function (_x69, _x70, _x71) {\n    return _ref29.apply(this, arguments);\n  };\n}())];\nvar getPaymentMethods = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref30 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee26(req, res, next) {\n    var _customer$invoice_set;\n    var userId, paymentMethods, customer, defaultPaymentMethod, newMethodsArray;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee26$(_context26) {\n      while (1) switch (_context26.prev = _context26.next) {\n        case 0:\n          userId = req.session.passport.user;\n          _context26.next = 3;\n          return stripe.paymentMethods.list({\n            customer: req.session.passport.user\n          });\n        case 3:\n          paymentMethods = _context26.sent;\n          _context26.next = 6;\n          return stripe.customers.retrieve(userId);\n        case 6:\n          customer = _context26.sent;\n          defaultPaymentMethod = (_customer$invoice_set = customer.invoice_settings) === null || _customer$invoice_set === void 0 ? void 0 : _customer$invoice_set.default_payment_method;\n          newMethodsArray = paymentMethods.data.map(function (method) {\n            if (method.type === 'card') {\n              var _method$card = method === null || method === void 0 ? void 0 : method.card,\n                brand = _method$card.brand,\n                exp_month = _method$card.exp_month,\n                exp_year = _method$card.exp_year,\n                last4 = _method$card.last4,\n                funding = _method$card.funding;\n              var newMonth = '0' + exp_month;\n              return {\n                id: method.id,\n                brand: brand[0].toUpperCase() + brand.slice(1),\n                exp_month: newMonth.slice(-2),\n                exp_year: exp_year,\n                last4: last4,\n                type: 'card',\n                funding: funding[0].toUpperCase() + funding.slice(1),\n                name: method.billing_details.name\n              };\n            }\n            if (method.type === 'paypal') {\n              return {\n                id: method.id,\n                type: method.type,\n                text: 'PayPal'\n              };\n            }\n            return {\n              id: method.id,\n              type: method.type,\n              text: method.type\n            };\n          }).sort(function (a, b) {\n            if (a.id === defaultPaymentMethod) {\n              return -1;\n            }\n            if (b.id === defaultPaymentMethod) {\n              return +1;\n            }\n            return 0;\n          });\n          return _context26.abrupt(\"return\", res.status(200).send({\n            success: true,\n            paymentMethods: newMethodsArray\n          }));\n        case 10:\n        case \"end\":\n          return _context26.stop();\n      }\n    }, _callee26);\n  }));\n  return function (_x72, _x73, _x74) {\n    return _ref30.apply(this, arguments);\n  };\n}())];\nvar setUpPaypal = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref31 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee27(req, res, next) {\n    var userId, session;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee27$(_context27) {\n      while (1) switch (_context27.prev = _context27.next) {\n        case 0:\n          userId = req.session.passport.user;\n          _context27.next = 3;\n          return stripe.checkout.sessions.create({\n            payment_method_types: ['paypal'],\n            mode: 'setup',\n            customer: userId,\n            success_url: \"\".concat(CLIENT_URL, \"/my-account/payment-methods/\"),\n            cancel_url: \"\".concat(CLIENT_URL, \"/my-account/payment-methods/cancel?session_id={CHECKOUT_SESSION_ID}\")\n          });\n        case 3:\n          session = _context27.sent;\n          res.send({\n            success: true,\n            url: session.url\n          });\n        case 5:\n        case \"end\":\n          return _context27.stop();\n      }\n    }, _callee27);\n  }));\n  return function (_x75, _x76, _x77) {\n    return _ref31.apply(this, arguments);\n  };\n}())];\nvar setUpKlarna = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref32 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee28(req, res, next) {\n    var userId, _req$user3, email, firstName, lastName, name, paymentMethod, attachPaymentMethod;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee28$(_context28) {\n      while (1) switch (_context28.prev = _context28.next) {\n        case 0:\n          userId = req.session.passport.user; // const session = await stripe.checkout.sessions.create({\n          //   payment_method_types: ['klarna','afterpay_clearpay'],\n          //   shipping_address_collection: { allowed_countries: ['GB', 'US'] },\n          //   line_items: [\n          //     {\n          //       price_data: {\n          //         currency: 'gbp',\n          //         product_data: {\n          //           name: 'Setup Klarna For Future Use',\n          //         },\n          //          unit_amount:100,\n          //       },\n          //       quantity: 1,\n          //     },\n          //   ],\n          //   mode: 'payment',\n          //   customer: userId,\n          //   success_url: `${CLIENT_URL}/my-account/payment-methods/`,\n          //   cancel_url: `${CLIENT_URL}/my-account/payment-methods/cancel?session_id={CHECKOUT_SESSION_ID}`,\n          // });\n          // res.send({ success: true, url: session.url });\n          _req$user3 = req.user, email = _req$user3.email, firstName = _req$user3.firstName, lastName = _req$user3.lastName;\n          name = \"\".concat(firstName, \" \").concat(lastName);\n          _context28.next = 5;\n          return stripe.paymentMethods.create({\n            type: 'afterpay_clearpay',\n            billing_details: {\n              address: {\n                line1: 'null',\n                country: 'GB',\n                postal_code: 'null'\n              },\n              name: name,\n              email: email\n            }\n            // klarna: {\n            //   dob: {\n            //     day: 22,\n            //     month: 3,\n            //     year: 2002,\n            //   },\n            // },\n          });\n        case 5:\n          paymentMethod = _context28.sent;\n          _context28.next = 8;\n          return stripe.paymentMethods.attach(paymentMethod.id, {\n            customer: userId\n          });\n        case 8:\n          attachPaymentMethod = _context28.sent;\n          res.status(200).send({\n            success: true\n          });\n        case 10:\n        case \"end\":\n          return _context28.stop();\n      }\n    }, _callee28);\n  }));\n  return function (_x78, _x79, _x80) {\n    return _ref32.apply(this, arguments);\n  };\n}())];\nvar getOrders = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref33 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee29(req, res, next) {\n    var userId, getUserOrder;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee29$(_context29) {\n      while (1) switch (_context29.prev = _context29.next) {\n        case 0:\n          userId = req.session.passport.user; // const getUserOrder = await User.findOne({ _id: userId }, null, {\n          //   projection: { orders: 1 },\n          //   populate: 'orders',\n          // });\n          _context29.next = 3;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"].find({\n            customer: userId\n          }, null, {\n            lean: true\n          }).populate('items.product').exec();\n        case 3:\n          getUserOrder = _context29.sent;\n          return _context29.abrupt(\"return\", res.status(200).send({\n            success: true,\n            orders: getUserOrder === null || getUserOrder === void 0 ? void 0 : getUserOrder.reverse()\n          }));\n        case 5:\n        case \"end\":\n          return _context29.stop();\n      }\n    }, _callee29);\n  }));\n  return function (_x81, _x82, _x83) {\n    return _ref33.apply(this, arguments);\n  };\n}())];\nvar changePassword = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('currentPassword').trim().escape().custom( /*#__PURE__*/function () {\n  var _ref35 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee30(value, _ref34) {\n    var _req$session$passport2;\n    var req, userId, user, match;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee30$(_context30) {\n      while (1) switch (_context30.prev = _context30.next) {\n        case 0:\n          req = _ref34.req;\n          userId = (_req$session$passport2 = req.session.passport) === null || _req$session$passport2 === void 0 ? void 0 : _req$session$passport2.user;\n          _context30.next = 4;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(userId, null, {\n            toObject: true,\n            \"new\": true\n          });\n        case 4:\n          user = _context30.sent;\n          _context30.next = 7;\n          return bcryptjs__WEBPACK_IMPORTED_MODULE_10___default().compare(value, user === null || user === void 0 ? void 0 : user.password);\n        case 7:\n          match = _context30.sent;\n          if (match) {\n            _context30.next = 10;\n            break;\n          }\n          throw new Error('Current password does not match');\n        case 10:\n          return _context30.abrupt(\"return\", match);\n        case 11:\n        case \"end\":\n          return _context30.stop();\n      }\n    }, _callee30);\n  }));\n  return function (_x84, _x85) {\n    return _ref35.apply(this, arguments);\n  };\n}()), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('newPassword', 'Please enter a Password with 10 or more characters').trim().escape().isLength({\n  min: 10\n}), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref36 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee31(req, res, next) {\n    var _req$session$passport3;\n    var result, _req$body10, currentPassword, newPassword, userId, salt, hashPassword, user, emailHtml, SENDER, mailOptions;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee31$(_context31) {\n      while (1) switch (_context31.prev = _context31.next) {\n        case 0:\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.validationResult)(req).formatWith(function (_ref37) {\n            var msg = _ref37.msg;\n            return msg;\n          });\n          if (result.isEmpty()) {\n            _context31.next = 3;\n            break;\n          }\n          return _context31.abrupt(\"return\", res.status(400).send({\n            error: result.mapped()\n          }));\n        case 3:\n          _req$body10 = req.body, currentPassword = _req$body10.currentPassword, newPassword = _req$body10.newPassword;\n          if (!(currentPassword === newPassword)) {\n            _context31.next = 6;\n            break;\n          }\n          return _context31.abrupt(\"return\", res.status(400).send({\n            error: {\n              newPassword: \"Hey! It looks like you've used this password before. Please choose a fresh one.\"\n            }\n          }));\n        case 6:\n          userId = (_req$session$passport3 = req.session.passport) === null || _req$session$passport3 === void 0 ? void 0 : _req$session$passport3.user;\n          salt = bcryptjs__WEBPACK_IMPORTED_MODULE_10___default().genSaltSync(parseInt(SALT_ROUNDS));\n          hashPassword = bcryptjs__WEBPACK_IMPORTED_MODULE_10___default().hashSync(newPassword, salt);\n          _context31.next = 11;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, {\n            password: hashPassword\n          }, {\n            \"new\": true,\n            lean: {\n              toObject: true\n            }\n          });\n        case 11:\n          user = _context31.sent;\n          emailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_29__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_27__.createElement(_React_Email_emails_changePassword_jsx__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n            firstName: user === null || user === void 0 ? void 0 : user.firstName\n          }));\n          SENDER = process.env.SENDER;\n          mailOptions = {\n            from: SENDER,\n            to: user === null || user === void 0 ? void 0 : user.email,\n            subject: 'Password changed!',\n            html: emailHtml\n          };\n          _context31.next = 17;\n          return _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_30__[\"default\"].sendMail(mailOptions);\n        case 17:\n          res.send({\n            success: true,\n            msg: 'Password successfully changed.'\n          });\n        case 18:\n        case \"end\":\n          return _context31.stop();\n      }\n    }, _callee31);\n  }));\n  return function (_x86, _x87, _x88) {\n    return _ref36.apply(this, arguments);\n  };\n}())];\nvar addDigitalPaymentMethod = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref38 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee32(req, res, next) {\n    var _req$session$passport4;\n    var type, userId, user, options, customerDob, dob, paymentMethod, attach;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee32$(_context32) {\n      while (1) switch (_context32.prev = _context32.next) {\n        case 0:\n          type = req.body.type;\n          userId = (_req$session$passport4 = req.session.passport) === null || _req$session$passport4 === void 0 ? void 0 : _req$session$passport4.user;\n          _context32.next = 4;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(userId, null, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 4:\n          user = _context32.sent;\n          options = {\n            type: type,\n            billing_details: {\n              // address: {\n              //   line1: '1',\n              //   line2: '1',\n              //   state: '1',\n              //   country: 'GB',\n              //   postal_code: '1235',\n              // },\n              name: \"\".concat(user === null || user === void 0 ? void 0 : user.firstName, \" \").concat(user === null || user === void 0 ? void 0 : user.lastName),\n              email: user === null || user === void 0 ? void 0 : user.email\n            }\n          };\n          if (type == 'klarna') {\n            customerDob = dayjs__WEBPACK_IMPORTED_MODULE_16___default()(user === null || user === void 0 ? void 0 : user.dob);\n            dob = {\n              day: customerDob.date(),\n              month: customerDob.month() + 1,\n              year: customerDob.year()\n            };\n            options.klarna = {\n              dob: dob\n            };\n          }\n          _context32.next = 9;\n          return stripe.paymentMethods.create(options);\n        case 9:\n          paymentMethod = _context32.sent;\n          _context32.next = 12;\n          return stripe.paymentMethods.attach(paymentMethod === null || paymentMethod === void 0 ? void 0 : paymentMethod.id, {\n            customer: userId\n          });\n        case 12:\n          attach = _context32.sent;\n          return _context32.abrupt(\"return\", res.redirect(303, '/api/user/payment-method/all'));\n        case 14:\n        case \"end\":\n          return _context32.stop();\n      }\n    }, _callee32);\n  }));\n  return function (_x89, _x90, _x91) {\n    return _ref38.apply(this, arguments);\n  };\n}())];\nvar cancelOrder = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('orderNumber').trim().escape(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('reason', 'Please select a reason for cancellation').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('redirect').trim().escape(), (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.check)('additional_information', 'Please enter under 500 characters').trim().escape().isLength({\n  max: 500\n}), express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref39 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee33(req, res, next) {\n    var _req$user4, _order$customer;\n    var _req$body11, orderNumber, additional_information, redirect, userId, result, order, refund, emailHtml, SENDER, mailOptions;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee33$(_context33) {\n      while (1) switch (_context33.prev = _context33.next) {\n        case 0:\n          _req$body11 = req.body, orderNumber = _req$body11.orderNumber, additional_information = _req$body11.additional_information, redirect = _req$body11.redirect;\n          userId = (_req$user4 = req.user) === null || _req$user4 === void 0 ? void 0 : _req$user4.id;\n          result = (0,express_validator__WEBPACK_IMPORTED_MODULE_13__.validationResult)(req).formatWith(function (_ref40) {\n            var msg = _ref40.msg;\n            return msg;\n          });\n          if (result.isEmpty()) {\n            _context33.next = 5;\n            break;\n          }\n          return _context33.abrupt(\"return\", res.status(400).send({\n            error: result.mapped()\n          }));\n        case 5:\n          _context33.next = 7;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"].findByIdAndUpdate(orderNumber, {\n            status: 'cancelled',\n            cancel: _objectSpread({}, req.body),\n            cancel_date: new Date()\n          }, {\n            \"new\": true,\n            lean: {\n              toObject: true\n            },\n            populate: {\n              path: 'items.product customer'\n            }\n          });\n        case 7:\n          order = _context33.sent;\n          if (!(order !== null && order !== void 0 && order.payment_intent_id)) {\n            _context33.next = 14;\n            break;\n          }\n          _context33.next = 11;\n          return stripe.refunds.create({\n            payment_intent: order === null || order === void 0 ? void 0 : order.payment_intent_id\n          });\n        case 11:\n          refund = _context33.sent;\n          _context33.next = 14;\n          return _Models_order_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"].findByIdAndUpdate(orderNumber, {\n            refund_id: refund.id\n          });\n        case 14:\n          emailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_29__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_27__.createElement(_React_Email_emails_orderCancelled_jsx__WEBPACK_IMPORTED_MODULE_33__[\"default\"], {\n            order: order\n          }));\n          SENDER = process.env.SENDER;\n          mailOptions = {\n            from: SENDER,\n            to: order === null || order === void 0 || (_order$customer = order.customer) === null || _order$customer === void 0 ? void 0 : _order$customer.email,\n            subject: 'Your GLAMO order has been cancelled',\n            html: emailHtml\n          };\n          _context33.next = 19;\n          return _utils_nodemailer_js__WEBPACK_IMPORTED_MODULE_30__[\"default\"].sendMail(mailOptions);\n        case 19:\n          if (redirect) {\n            res.redirect('/api/user/orders');\n          } else {\n            res.status(200).send({\n              msg: 'successfully cancelled',\n              success: true\n            });\n          }\n        case 20:\n        case \"end\":\n          return _context33.stop();\n      }\n    }, _callee33);\n  }));\n  return function (_x92, _x93, _x94) {\n    return _ref39.apply(this, arguments);\n  };\n}())];\nvar updateWishlist = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref41 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee34(req, res, next) {\n    var userId;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee34$(_context34) {\n      while (1) switch (_context34.prev = _context34.next) {\n        case 0:\n          userId = req.user._id;\n          _context34.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findByIdAndUpdate(userId, {\n            wishlist: req.body.wishlist\n          });\n        case 3:\n          res.status(200).send({\n            success: true\n          });\n        case 4:\n        case \"end\":\n          return _context34.stop();\n      }\n    }, _callee34);\n  }));\n  return function (_x95, _x96, _x97) {\n    return _ref41.apply(this, arguments);\n  };\n}())];\nvar getWishlist = [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_18__.checkAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/function () {\n  var _ref42 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().mark(function _callee35(req, res, next) {\n    var userId, user;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default().wrap(function _callee35$(_context35) {\n      while (1) switch (_context35.prev = _context35.next) {\n        case 0:\n          userId = req.user._id;\n          _context35.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(userId, null, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 3:\n          user = _context35.sent;\n          res.status(200).send({\n            wishlist: user.wishlist,\n            success: true\n          });\n        case 5:\n        case \"end\":\n          return _context35.stop();\n      }\n    }, _callee35);\n  }));\n  return function (_x98, _x99, _x100) {\n    return _ref42.apply(this, arguments);\n  };\n}())];\n\n//# sourceURL=webpack://server/./Controllers/userController.js?");

/***/ }),

/***/ "./Models/address.js":
/*!***************************!*\
  !*** ./Models/address.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nvar AddressSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n  userId: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n    ref: 'Users',\n    required: true\n  },\n  firstName: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    required: true\n  },\n  lastName: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    required: true\n  },\n  address_1: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    required: true\n  },\n  address_2: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String\n  },\n  city: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    required: true\n  },\n  county: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String\n  },\n  postCode: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    required: true,\n    uppercase: true\n  },\n  mobile: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    required: true\n  },\n  country: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    required: true\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)('address', AddressSchema));\n\n//# sourceURL=webpack://server/./Models/address.js?");

/***/ }),

/***/ "./Models/cart.js":
/*!************************!*\
  !*** ./Models/cart.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cartSchema: () => (/* binding */ cartSchema),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nvar Schema = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema);\nvar variationObj = {\n  title: Schema.Types.String,\n  variationIndex: Schema.Types.Number,\n  array: [{\n    price: Schema.Types.Number,\n    id: Schema.Types.String,\n    visible: Schema.Types.Boolean,\n    stock: Schema.Types.Number,\n    variation: Schema.Types.String,\n    variation2: Schema.Types.String\n  }]\n};\nvar ItemSchema = new Schema({\n  // _id: {\n  //   type: Schema.Types.ObjectId,\n  //   required: true,\n  //   default: mongoose.Types.ObjectId,\n  // },\n  timestamp: {\n    type: Schema.Types.Date,\n    \"default\": Date.now\n  },\n  cart_id: {\n    type: Schema.Types.String\n  },\n  product_id: {\n    type: Schema.Types.ObjectId,\n    ref: 'products'\n  },\n  images: [],\n  delivery: {\n    type: Schema.Types.ObjectId,\n    ref: 'deliveryProfile'\n  },\n  quantity: {\n    type: Schema.Types.Number,\n    \"default\": 1,\n    min: [1, 'Quantity should be equal to or greater than 1']\n  },\n  price: {\n    current: {\n      type: Schema.Types.Number\n    },\n    previous: {\n      type: Schema.Types.Number\n    }\n  },\n  stock: Schema.Types.Number,\n  shipping_data: {\n    one_item: Schema.Types.Number,\n    additional_item: Schema.Types.Number,\n    cost: Schema.Types.Number,\n    id: Schema.Types.String\n  },\n  variation_data: {\n    combineVariation: {\n      type: Schema.Types.Mixed\n    },\n    isVariationCombine: {\n      type: Schema.Types.Boolean\n    },\n    variation1_data: variationObj,\n    variation2_data: variationObj,\n    select: {\n      variation1: {\n        id: Schema.Types.String,\n        title: Schema.Types.String,\n        variation: Schema.Types.String\n      },\n      variation2: {\n        id: Schema.Types.String,\n        title: Schema.Types.String,\n        variation: Schema.Types.String\n      }\n    }\n  },\n  status: Schema.Types.String,\n  title: Schema.Types.String,\n  additional_data: {\n    price: {\n      min: Schema.Types.Number,\n      max: Schema.Types.Number\n    },\n    stock: {\n      min: Schema.Types.Number,\n      max: Schema.Types.Number,\n      total: Schema.Types.Number\n    }\n  }\n});\nvar cartSchema = new Schema({\n  timestamp: {\n    type: Schema.Types.Date,\n    \"default\": Date.now\n  },\n  delivery_option: Schema.Types.Mixed,\n  coupon: {\n    type: Schema.Types.ObjectId,\n    ref: 'coupon'\n  },\n  giftCard: {\n    type: Schema.Types.ObjectId,\n    ref: 'giftCard'\n  },\n  items: [ItemSchema]\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('cart', cartSchema));\n\n//# sourceURL=webpack://server/./Models/cart.js?");

/***/ }),

/***/ "./Models/category.js":
/*!****************************!*\
  !*** ./Models/category.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nvar Schema = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema);\nvar CategorySchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  // products: [{ type: Schema.Types.String }],\n  men: [{\n    type: Schema.Types.ObjectId,\n    ref: 'product'\n  }],\n  women: [{\n    type: Schema.Types.ObjectId,\n    ref: 'product'\n  }]\n}, {\n  strictPopulate: false\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('category', CategorySchema));\n\n//# sourceURL=webpack://server/./Models/category.js?");

/***/ }),

/***/ "./Models/coupon.js":
/*!**************************!*\
  !*** ./Models/coupon.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nvar Schema = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema);\nvar tomorrowDate = new Date();\ntomorrowDate.setDate(tomorrowDate.getDate() + 1);\nvar couponSchema = new Schema({\n  code: {\n    type: String,\n    unique: true,\n    required: true,\n    min: [6, 'the coupon/gift card must be between 6 and 16 character'],\n    max: [16, 'the coupon/gift card must be between 6 and 16 character']\n  },\n  expires: {\n    type: Schema.Types.Date,\n    \"default\": tomorrowDate\n  },\n  amount: {\n    type: Schema.Types.Number,\n    min: [5, 'amount must be at least 5']\n  },\n  type: {\n    type: Schema.Types.String,\n    \"enum\": ['fixed', 'percentage'],\n    \"default\": 'fixed'\n  },\n  total_use: {\n    type: Schema.Types.Number,\n    \"default\": 5\n  }\n});\ncouponSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoServerError' && error.code === 11000) {\n    next(new Error(\"Coupon \".concat(doc.code, \" already Exists\")));\n  } else {\n    next();\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('coupon', couponSchema));\n\n//# sourceURL=webpack://server/./Models/coupon.js?");

/***/ }),

/***/ "./Models/deliveryProfile.js":
/*!***********************************!*\
  !*** ./Models/deliveryProfile.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   delivery_upgrades_fields: () => (/* binding */ delivery_upgrades_fields),\n/* harmony export */   timeObj: () => (/* binding */ timeObj)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n\nvar chargeObj = {\n  one_item: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.Number,\n    \"default\": 0,\n    required: true\n  },\n  additional_item: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.Number,\n    \"default\": 0,\n    required: true\n  }\n};\nvar timeObj = function timeObj(property) {\n  return {\n    type: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String,\n      \"enum\": {\n        values: ['days', 'weeks']\n      },\n      \"default\": 'days'\n    },\n    start: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.Number,\n      \"default\": 1,\n      required: [true, \"You didn't enter a start day for your profile. Please enter a start date\"],\n      validate: {\n        validator: function validator(startValue) {\n          var endValue = lodash__WEBPACK_IMPORTED_MODULE_1___default().get(this, \"\".concat(property, \".end\"));\n          //  this.get('processing_time')?.end || this.get('shipping')?.end;\n\n          // console.log({\n          //   startValue,\n          //   endValue,\n          //   check: startValue <= endValue,\n          //   this: this,\n          // });\n\n          return startValue <= endValue;\n        },\n        message: 'Your start day or week must be less than end day'\n      }\n    },\n    end: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.Number,\n      \"default\": 1,\n      required: [true, \"You didn't enter a end day for your profile. Please enter an end date\"]\n    }\n  };\n};\nvar delivery_upgrades_fields = function delivery_upgrades_fields(property) {\n  return {\n    destination: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String,\n      lowercase: true,\n      \"enum\": {\n        values: ['domestic', 'international']\n      }\n    },\n    upgrade: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String,\n      required: true,\n      minlength: 1,\n      maxlength: 28\n    },\n    charges: chargeObj,\n    shipping: _objectSpread({\n      service: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String\n      }\n    }, timeObj(property))\n  };\n};\nvar DeliveryProfileSchema = new mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema({\n  timestamp: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.Date,\n    \"default\": Date.now\n  },\n  name: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String,\n    required: [true, \"You didn't provide a name for your delivery profile. Please enter a name\"],\n    unique: [true, 'err']\n  },\n  cost: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.Number,\n  country_of_origin: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String\n  },\n  origin_post_code: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String,\n    uppercase: true\n  },\n  standard_delivery: [new mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema({\n    destination: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String,\n      required: true\n    },\n    iso_code: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String,\n      required: true\n    },\n    charges: chargeObj,\n    shipping: _objectSpread({\n      service: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema.Types.String\n      }\n    }, timeObj('shipping'))\n  })],\n  delivery_upgrades: [new mongoose__WEBPACK_IMPORTED_MODULE_2__.Schema(delivery_upgrades_fields('shipping'))],\n  processing_time: timeObj('processing_time')\n});\nDeliveryProfileSchema.pre('updateOne', function (next) {\n  this.options.runValidators = true;\n  next();\n});\n\n// DeliveryProfileSchema.path('processing_time.start').validate(function (value) {\n//   const time = this.get('processing_time');\n//   return value < time.end;\n// }, 'Your start day or week must be less than end day');\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_2___default().model('deliveryProfile', DeliveryProfileSchema));\n\n//# sourceURL=webpack://server/./Models/deliveryProfile.js?");

/***/ }),

/***/ "./Models/giftCard.js":
/*!****************************!*\
  !*** ./Models/giftCard.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar Schema = (mongoose__WEBPACK_IMPORTED_MODULE_2___default().Schema);\nvar GiftCardSchema = new Schema({\n  code: {\n    type: String,\n    required: true,\n    unique: true,\n    minlength: [6, 'the coupon/gift card must be between 6 and 16 character'],\n    maxlength: [16, 'the coupon/gift card must be between 6 and 16 character']\n  },\n  expires: Schema.Types.Date,\n  amount: {\n    type: Schema.Types.Number,\n    min: [5, 'Gift Card must be £5 or over']\n  },\n  type: {\n    type: Schema.Types.String,\n    \"enum\": ['fixed', 'percentage'],\n    \"default\": 'fixed'\n  }\n});\nGiftCardSchema.pre('save', /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(next) {\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          this.code = this.code.toUpperCase();\n          if (!(this.code.substring(0, 3) != 'gl-'.toUpperCase())) {\n            _context.next = 6;\n            break;\n          }\n          this.code = \"GL-\".concat(this.code);\n          return _context.abrupt(\"return\", next());\n        case 6:\n          next();\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, this);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\nGiftCardSchema.post('save', /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2(error, doc, next) {\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (error.name === 'MongoServerError' && error.code === 11000) {\n            next(new Error(\"GiftCard \".concat(doc.code, \" already Exists\")));\n          } else {\n            next();\n          }\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x2, _x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_2___default().model('giftCard', GiftCardSchema));\n\n//# sourceURL=webpack://server/./Models/giftCard.js?");

/***/ }),

/***/ "./Models/oAuthUser.js":
/*!*****************************!*\
  !*** ./Models/oAuthUser.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nvar Schema = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema);\nvar OAuthSchema = new Schema({\n  firstName: {\n    type: Schema.Types.String\n  },\n  lastName: {\n    type: Schema.Types.String\n  },\n  email: {\n    type: Schema.Types.String\n  },\n  issuer: {\n    type: {\n      type: Schema.Types.String\n    },\n    id: {\n      type: Schema.Types.String\n    }\n  },\n  timeStamp: {\n    type: Schema.Types.Date,\n    \"default\": Date.now\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('oAuthUser', OAuthSchema));\n\n//# sourceURL=webpack://server/./Models/oAuthUser.js?");

/***/ }),

/***/ "./Models/order.js":
/*!*************************!*\
  !*** ./Models/order.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _deliveryProfile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./deliveryProfile */ \"./Models/deliveryProfile.js\");\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n\nvar enum_states = {\n  values: ['received', 'shipped', 'delivered', 'cancelled', 'returned', 'processing', 'failed'],\n  message: 'enum validator failed value `VALUE`, please ensure value is of any of the following: received, shipped, delivered, cancelled, '\n};\nvar itemSchema = new mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema({\n  product: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.ObjectId,\n    ref: 'product'\n  },\n  quantity: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Number\n  },\n  isVariation1Present: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Boolean\n  },\n  isVariation2Present: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Boolean\n  },\n  isVariationCombine: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Boolean\n  },\n  variation1: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Mixed\n  },\n  variation2: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Mixed\n  },\n  price: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Number\n  },\n  images: {\n    type: [mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String],\n    maxlength: 1\n  },\n  title: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n  }\n});\nvar OrderSchema = new mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema({\n  _id: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String,\n    required: true,\n    unique: true\n  },\n  items: [itemSchema],\n  itemsByProfile: [{\n    items: [itemSchema],\n    shippingInfo: {\n      endDate: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date,\n      startDate: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date,\n      cost: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Number,\n      _id: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.ObjectId,\n      profileId: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.ObjectId,\n      processing_time: (0,_deliveryProfile__WEBPACK_IMPORTED_MODULE_2__.timeObj)('shippingInfo.processing_time'),\n      shipping: _objectSpread({\n        service: {\n          type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n        }\n      }, (0,_deliveryProfile__WEBPACK_IMPORTED_MODULE_2__.timeObj)('shippingInfo.shipping'))\n      // ...delivery_upgrades_fields('shippingInfo.shipping'),\n    }\n  }],\n  createdAt: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date,\n    \"default\": Date.now\n  },\n  payment_type: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n  },\n  status: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String,\n    \"enum\": enum_states,\n    required: true\n    // default: 'recieved',\n  },\n  customer: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.ObjectId,\n    ref: 'Users',\n    required: true\n  },\n  shipping_address: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Mixed\n  },\n  billing_address: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Mixed\n  },\n  transaction_cost: {\n    total: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Number\n    },\n    subtotal: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Number\n    },\n    promo: {\n      discount: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Number,\n      code: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n    },\n    delivery_cost: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Number\n  },\n  cartId: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.ObjectId,\n    ref: 'cart'\n  },\n  shipped: {\n    tracking_number: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n    },\n    courier: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n    },\n    dispatch_date: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date\n    },\n    max_delivery_date: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date\n    },\n    min_delivery_date: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date\n    },\n    note: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n    }\n  },\n  refund: {\n    id: [{\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n    }]\n    // date: { type: Schema.Types.Date },\n  },\n  cancel: {\n    reason: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n    },\n    returning_items: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Boolean\n    },\n    message_to_buyer: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String,\n      maxlength: 500\n    },\n    date: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date\n    }\n  },\n  private_note: [{\n    _id: {\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.ObjectId,\n      index: true,\n      required: true,\n      auto: true\n    },\n    note: {\n      required: true,\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n    },\n    date: {\n      required: true,\n      type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date,\n      \"default\": Date.now\n    }\n  }],\n  mark_as_gift: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Boolean,\n    \"default\": false\n  },\n  completed_date: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.Date,\n    \"default\": null\n  },\n  payment_intent_id: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n  },\n  charge_id: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema.Types.String\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,mongoose__WEBPACK_IMPORTED_MODULE_1__.model)('order', OrderSchema));\n\n//# sourceURL=webpack://server/./Models/order.js?");

/***/ }),

/***/ "./Models/privateNote.js":
/*!*******************************!*\
  !*** ./Models/privateNote.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nvar PrivateNoteSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n  note: {\n    required: true,\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String\n  },\n  date: {\n    required: true,\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Date,\n    \"default\": Date.now\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)('privateNote', PrivateNoteSchema));\n\n//# sourceURL=webpack://server/./Models/privateNote.js?");

/***/ }),

/***/ "./Models/product.js":
/*!***************************!*\
  !*** ./Models/product.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   productSchema: () => (/* binding */ productSchema)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nvar variationOptionSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n  stock: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Number\n  },\n  price: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Number\n  },\n  variation: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String\n  },\n  variation2: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String\n  },\n  visible: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Boolean\n  },\n  id: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String\n  }\n});\nvar variationSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n  name: {\n    type: String\n  },\n  options: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Map,\n    of: variationOptionSchema\n  },\n  \"default\": Boolean,\n  quantityHeader: Object,\n  priceHeader: Object,\n  combine: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Boolean,\n  on: Boolean,\n  name2: String\n}, {\n  strict: false,\n  virtuals: true\n});\nvariationSchema.virtual('id').get(function () {\n  return this._id.toHexString();\n});\nvariationSchema.set('toJSON', {\n  virtuals: true\n});\nvar productSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n  title: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    maxlength: [140, 'Title must be under 140 characters']\n  },\n  featured: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Boolean,\n    \"default\": false\n  },\n  category: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n    ref: 'category',\n    required: true\n  },\n  price: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n  },\n  stock: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Number\n  },\n  gender: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    \"enum\": {\n      values: ['men', 'women'],\n      message: ['{VALUE} is not support, only men or women is allowed']\n    }\n  },\n  description: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    required: true\n  },\n  // detail: {\n  //   type: Schema.Types.Array,\n  //   required: true,\n  //   maxlength: [400, 'Details must be under 200 characters'],\n  // },\n\n  variations: [variationSchema],\n  images: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Array,\n    \"default\": []\n  },\n  reviews: [{\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n    ref: 'product_review'\n  }],\n  delivery: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n    ref: 'deliveryProfile'\n  },\n  timestamp: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Date,\n    \"default\": Date.now\n  },\n  visits: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Number,\n    \"default\": 0\n  },\n  status: {\n    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String,\n    \"default\": 'active',\n    \"enum\": {\n      values: ['active', 'inactive', 'draft'],\n      message: ['{VALUE} is not support, please inter a accepted type']\n    }\n  }\n}, {\n  strict: false,\n  toJSON: {\n    virtuals: true\n  }\n});\nproductSchema.virtual('id');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)('product', productSchema));\n\n//# sourceURL=webpack://server/./Models/product.js?");

/***/ }),

/***/ "./Models/setting.js":
/*!***************************!*\
  !*** ./Models/setting.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nvar Schema = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema);\nvar SettingSchema = new Schema({\n  name: {\n    type: Schema.Types.String,\n    unique: true\n  },\n  delivery: {\n    full_name: {\n      type: Schema.Types.String\n    },\n    address_1: {\n      type: Schema.Types.String\n    },\n    address_2: {\n      type: Schema.Types.String\n    },\n    city: {\n      type: Schema.Types.String\n    },\n    county: {\n      type: Schema.Types.String\n    },\n    post_code: {\n      type: Schema.Types.String\n    },\n    phone_number: {\n      type: Schema.Types.String\n    },\n    label_format: {\n      type: Schema.Types.String\n    },\n    include_order_detail: {\n      type: Schema.Types.Boolean,\n      \"default\": false\n    },\n    custom_form: {\n      prefill_with_title: {\n        type: Schema.Types.Boolean,\n        required: true\n      },\n      description: {\n        type: Schema.Types.String\n      }\n    },\n    delivery_upgrades: {\n      type: Schema.Types.Boolean,\n      \"default\": false,\n      required: true\n    },\n    processing_schedule: {\n      monday_friday: {\n        type: Schema.Types.Boolean,\n        \"default\": true,\n        required: true\n      },\n      saturday: {\n        type: Schema.Types.Boolean,\n        \"default\": false,\n        required: true\n      },\n      sunday: {\n        type: Schema.Types.Boolean,\n        \"default\": false,\n        required: true\n      }\n    }\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Settings', SettingSchema));\n\n//# sourceURL=webpack://server/./Models/setting.js?");

/***/ }),

/***/ "./Models/user.js":
/*!************************!*\
  !*** ./Models/user.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dayjs_plugin_relativeTime_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dayjs/plugin/relativeTime.js */ \"dayjs/plugin/relativeTime.js\");\n/* harmony import */ var dayjs_plugin_relativeTime_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_relativeTime_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\ndayjs__WEBPACK_IMPORTED_MODULE_1___default().extend((dayjs_plugin_relativeTime_js__WEBPACK_IMPORTED_MODULE_2___default()));\nvar Schema = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema);\nvar UserSchema = new Schema({\n  firstName: {\n    type: String,\n    required: 'First Name is required. Please enter your first Name.'\n  },\n  lastName: {\n    type: String,\n    required: 'Last Name is required. Please enter your Last Name.'\n  },\n  email: {\n    type: String,\n    required: 'Email is required. Please enter your Email.',\n    unique: true\n  },\n  lastEmailChange: {\n    type: Schema.Types.Date\n  },\n  password: {\n    type: String,\n    required: true,\n    minlength: 10\n  },\n  dob: {\n    type: Date,\n    required: 'DOB is required. Please enter date of birth.'\n  },\n  status: {\n    type: Schema.Types.String,\n    \"default\": 'active',\n    \"enum\": {\n      values: ['active', 'inactive'],\n      message: '{VALUE} is not support, check the supported enums type'\n    }\n  },\n  interest: {\n    type: String,\n    \"enum\": {\n      values: ['menswear', 'womenswear'],\n      message: '{VALUE} is not support, only Menswear or Womenswear is allowed.'\n    },\n    required: 'Interest is required. Please enter your Interest.'\n  },\n  profileImg: String,\n  address: [{\n    type: Schema.Types.ObjectId,\n    ref: 'address'\n  }],\n  default_address: {\n    shipping_address: {\n      type: Schema.Types.ObjectId,\n      ref: 'address'\n    },\n    billing_address: {\n      type: Schema.Types.ObjectId,\n      ref: 'address'\n    }\n  },\n  payment_methods: [{\n    logo: {\n      type: Schema.Types.String\n    },\n    alt: {\n      type: Schema.Types.String\n    },\n    description: {\n      type: Schema.Types.String\n    },\n    text: {\n      type: Schema.Types.String\n    },\n    index: {\n      type: Schema.Types.Number\n    }\n  }],\n  // orders: [{ type: Schema.Types.String, ref: 'order' }],\n  mobile: {\n    type: Schema.Types.String\n  },\n  adminAccess: {\n    type: Schema.Types.Boolean,\n    \"default\": false\n  },\n  contact_preferences: {\n    discount_newDrops: {\n      email: {\n        type: Schema.Types.Boolean,\n        \"default\": false\n      },\n      text: {\n        type: Schema.Types.Boolean,\n        \"default\": false\n      }\n    },\n    stockAlert: {\n      email: {\n        type: Schema.Types.Boolean,\n        \"default\": false\n      }\n    }\n  },\n  wishlist: [{\n    type: Schema.Types.Mixed\n  }],\n  social_accounts: {\n    google: {\n      type: Schema.Types.String\n    },\n    twitter: {\n      type: Schema.Types.String\n    },\n    facebook: {\n      type: Schema.Types.String\n    }\n  }\n}, {\n  toObject: {\n    virtuals: true,\n    getters: true\n  }\n});\nUserSchema.path('dob').validate({\n  validator: function validator(value) {\n    var today = dayjs__WEBPACK_IMPORTED_MODULE_1___default()();\n    var difference = today.diff(dayjs__WEBPACK_IMPORTED_MODULE_1___default()(value), 'year');\n    return difference >= 18;\n  },\n  message: 'Must be 18 years old or older.'\n});\nUserSchema.virtual('id').get(function () {\n  return this._id.toHexString();\n});\nUserSchema.virtual('fullName').get(function () {\n  return \"\".concat(this.firstName, \" \").concat(this.lastName);\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Users', UserSchema));\n\n//# sourceURL=webpack://server/./Models/user.js?");

/***/ }),

/***/ "./Models/wishlist.js":
/*!****************************!*\
  !*** ./Models/wishlist.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _cart_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cart.js */ \"./Models/cart.js\");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('wishlist', _cart_js__WEBPACK_IMPORTED_MODULE_1__.cartSchema));\n\n//# sourceURL=webpack://server/./Models/wishlist.js?");

/***/ }),

/***/ "./React Email/components/emailHead.jsx":
/*!**********************************************!*\
  !*** ./React Email/components/emailHead.jsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectDestructuringEmpty */ \"@babel/runtime/helpers/objectDestructuringEmpty\");\n/* harmony import */ var _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nfunction EmailHead(_ref) {\n  _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0___default()(_ref);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Font, {\n    fontFamily: \"Poppins\",\n    fallbackFontFamily: \"Verdana\",\n    webFont: {\n      url: 'https://dknhps0hwilzj.cloudfront.net/fonts/Poppins-Regular.ttf',\n      format: 'ttf'\n    },\n    fontWeight: 400,\n    fontStyle: \"normal\"\n  });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EmailHead);\n\n//# sourceURL=webpack://server/./React_Email/components/emailHead.jsx?");

/***/ }),

/***/ "./React Email/components/emailTailwind.jsx":
/*!**************************************************!*\
  !*** ./React Email/components/emailTailwind.jsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nvar config = {\n  theme: {\n    extend: {\n      colors: {\n        'dark-gray': '#676666',\n        'light-grey': '#eeeeee'\n      },\n      fontSize: {\n        s: '13px'\n      }\n    }\n  }\n};\nfunction EmailTailwind(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Tailwind, {\n    config: config,\n    key: 'tailwind'\n  }, children);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EmailTailwind);\n\n//# sourceURL=webpack://server/./React_Email/components/emailTailwind.jsx?");

/***/ }),

/***/ "./React Email/components/footer.jsx":
/*!*******************************************!*\
  !*** ./React Email/components/footer.jsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectDestructuringEmpty */ \"@babel/runtime/helpers/objectDestructuringEmpty\");\n/* harmony import */ var _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar url = 'https://dknhps0hwilzj.cloudfront.net/files/logos';\nfunction Footer(_ref) {\n  _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0___default()(_ref);\n  var icons = [{\n    icon: \"icons8-facebook-48+(1).png\"\n  }, {\n    icon: 'icons8-instagram-48+(1).png',\n    shinkIcon: true,\n    style: {\n      background: 'linear-gradient(115deg, #f9ce34, #ee2a7b, #6228d7)'\n    }\n  }, {\n    icon: 'icons8-pinterest-48.png'\n  }, {\n    icon: 'icons8-twitter-50.png',\n    style: {\n      background: '#1da1f2'\n    },\n    shinkIcon: true\n  }, {\n    icon: 'icons8-tiktok-48.png',\n    style: {\n      background: '#eee'\n    },\n    shinkIcon: true\n  }];\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"bg-[#333333] text-white p-5 border-[1.25rem] border-[#333333] min-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    align: \"center\",\n    className: \"w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    align: \"center\",\n    className: \" pb-4 !w-full !mx-auto !max-w-[50%] \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-center font-bold text-white\"\n  }, \"Find inspiration\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    align: \"center\",\n    className: \"w-fit text-center\"\n  }, icons.map(function (_ref2) {\n    var icon = _ref2.icon,\n      style = _ref2.style,\n      imgStyle = _ref2.imgStyle,\n      shinkIcon = _ref2.shinkIcon;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n      key: icon,\n      align: \"center\",\n      className: \"!w-fit m-0 !px-2\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n      className: \"!w-7 !h-7 !max-w-7 !max-h-7 !text-center rounded-full align-middle p-0\",\n      style: style\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Img, {\n      src: \"\".concat(url, \"/\").concat(icon),\n      style: imgStyle,\n      className: \"\".concat(shinkIcon ? '!h-4 !w-4 mx-auto' : 'w-7 h-7', \" object-contain\")\n    })));\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"!h-full !p-0 !min-h-full pl-4 text-center border-white border bg-white\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    align: \"center\",\n    className: \" !w-full !max-w-[50%] align-top\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    align: \"center\",\n    className: \"w-full !text-center !mx-auto\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-center font-bold tracking-wider text-white\"\n  }, \"Get the app\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"div\", {\n    className: \"mx-auto flex justify-center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row\n  // align=\"center\"\n  , {\n    className: \"w-fit\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"!w-[100px] !h-[28px] !box-content !pr-2\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Img, {\n    src: \"\".concat(url, \"/google-badge.png\"),\n    className: \"w-[100px] !h-[28px]\"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"!w-[100px]\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Img, {\n    src: \"\".concat(url, \"/apple-badge.png\"),\n    className: \"w-[100px] !h-[28px]\"\n  }))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"pt-10 text-xs leading-4 text-white\"\n  }, \"*GLAMO has estimated this date on the basis of your expected delivery date and the refunds window applicable to your jurisdiction. Please see website T&Cs for more details on returns and refunds, and for the refunds window applicable to your jurisdiction.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-xs leading-4 text-white\"\n  }, \"This inbox is not attended so please don\\u2019t reply to this email. This is a service email. You will receive these no matter what your marketing communication preferences are.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-xs leading-4 text-white\"\n  }, \"We\\u2019ll always keep your data safe and secure. Click here to know why we need it and how we use it.\")));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Footer);\n\n//# sourceURL=webpack://server/./React_Email/components/footer.jsx?");

/***/ }),

/***/ "./React Email/components/header.jsx":
/*!*******************************************!*\
  !*** ./React Email/components/header.jsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectDestructuringEmpty */ \"@babel/runtime/helpers/objectDestructuringEmpty\");\n/* harmony import */ var _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar clientUrl = process.env.CLIENT_URL;\nfunction Header(_ref) {\n  _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_0___default()(_ref);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \"bg-[#2d2d2d] w-full \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    align: \"center\",\n    className: \"text-center w-full \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    className: \"!text-center mx-auto \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Button, {\n    href: clientUrl,\n    className: \"text-center  py-4\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Img, {\n    src: 'https://aws-glamo-upload-bucket.s3.eu-west-2.amazonaws.com/files/logos/glamo.png',\n    className: \"w-32\"\n  })))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Header);\n\n//# sourceURL=webpack://server/./React_Email/components/header.jsx?");

/***/ }),

/***/ "./React Email/components/item.jsx":
/*!*****************************************!*\
  !*** ./React Email/components/item.jsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nfunction Item(_ref) {\n  var _product$images;\n  var variation1 = _ref.variation1,\n    variation2 = _ref.variation2,\n    product = _ref.product,\n    price = _ref.price,\n    quantity = _ref.quantity,\n    images = _ref.images,\n    title = _ref.title;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \"mb-4 !max-w-full !box-border\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    className: \"w-[100px] h-[140px]\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Img, {\n    src: (product === null || product === void 0 || (_product$images = product.images) === null || _product$images === void 0 ? void 0 : _product$images[0]) || (images === null || images === void 0 ? void 0 : images[0]),\n    className: \"border-none outline-none w-[100px] h-[140px] object-cover\"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    className: \"pl-5 align-top\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"text-s !text-wrap !whitespace-normal p-0 pb-1 m-0 font-medium\"\n  }, title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"text-s p-0 pb-1 m-0 font-semibold\"\n  }, \"\\xA3\", (price === null || price === void 0 ? void 0 : price.toFixed(2)) || price), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"text-xs p-0 pb-1 m-0 font-light !important\"\n  }, \"\".concat(variation1 !== null && variation1 !== void 0 && variation1.variation ? variation1 === null || variation1 === void 0 ? void 0 : variation1.variation : '', \" \").concat(variation2 !== null && variation2 !== void 0 && variation2.variation ? ' / ' + variation2.variation : '', \" / Qty \").concat(quantity))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Item);\n\n//# sourceURL=webpack://server/./React_Email/components/item.jsx?");

/***/ }),

/***/ "./React Email/components/morequestions.jsx":
/*!**************************************************!*\
  !*** ./React Email/components/morequestions.jsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nfunction MoreQuestions(_ref) {\n  var preview = _ref.preview;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    className: \"bg-[#dedfe4] min-w-full \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"p-5 w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"m-0 p-0 font-semibold text-base pb-2\"\n  }, \"ANY QUESTIONS?\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"m-0 p-0 pb-3 font-light\"\n  }, \"For everything else you want to know\\u2026\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Section, {\n    id: \"section-table\"\n  }, [{\n    column1: {\n      text: 'Payment, Promos & Gift Vouchers'\n    },\n    column2: {\n      text: 'Order issues'\n    }\n  }, {\n    column1: {\n      text: '\tDelivery'\n    },\n    column2: {\n      text: 'Customer Care'\n    }\n  }].map(function (_ref2, idx) {\n    var column1 = _ref2.column1,\n      column2 = _ref2.column2;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"tr\", {\n      id: \"text-row\",\n      className: \"w-full\",\n      key: idx\n    }, [column1, column2].map(function (column) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n        className: \"w-6 h-6\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Img, {\n        src: \"https://aws-glamo-upload-bucket.s3.eu-west-2.amazonaws.com/files/logos/icons8-duplicate-96.png\",\n        className: \"w-full h-full\"\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n        className: \"pl-1 max-w-[100px]\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n        className: \"text-left text-xs font-semibold !w-fit underline underline-offset-2 decoration-2 decoration-dark-gray\"\n      }, column.text)));\n    }));\n  }), ' ')));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MoreQuestions);\n\n//# sourceURL=webpack://server/./React_Email/components/morequestions.jsx?");

/***/ }),

/***/ "./React Email/components/thanks.jsx":
/*!*******************************************!*\
  !*** ./React Email/components/thanks.jsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction Thanks(_ref) {\n  var className = _ref.className;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \" bg-light-grey text-center my-4 \",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"m-0 p-0 text-xs text-center\"\n  }, \"Thanks,\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"m-0 p-0 font-semibold text-xs text-center\"\n  }, \"The GLAMO team\"));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Thanks);\n\n//# sourceURL=webpack://server/./React_Email/components/thanks.jsx?");

/***/ }),

/***/ "./React Email/components/totalContainer.jsx":
/*!***************************************************!*\
  !*** ./React Email/components/totalContainer.jsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nfunction TotalContainer(_ref) {\n  var _order$transaction_co, _order$transaction_co2;\n  var order = _ref.order,\n    showRefund = _ref.showRefund;\n  var array = [{\n    title: 'SUB-TOTAL',\n    cost: order === null || order === void 0 || (_order$transaction_co = order.transaction_cost) === null || _order$transaction_co === void 0 || (_order$transaction_co = _order$transaction_co.subtotal) === null || _order$transaction_co === void 0 ? void 0 : _order$transaction_co.toFixed(2)\n  }, {\n    title: 'DELIVERY',\n    cost: parseFloat(lodash__WEBPACK_IMPORTED_MODULE_3___default().get(order, ['transaction_cost', 'delivery_cost']) || 0).toFixed(2)\n  }, {\n    title: 'TOTAL',\n    cost: order === null || order === void 0 || (_order$transaction_co2 = order.transaction_cost) === null || _order$transaction_co2 === void 0 || (_order$transaction_co2 = _order$transaction_co2.total) === null || _order$transaction_co2 === void 0 ? void 0 : _order$transaction_co2.toFixed(2)\n  }];\n  var discount = lodash__WEBPACK_IMPORTED_MODULE_3___default().get(order, ['transaction_cost', 'promo', 'discount']);\n  if (discount > 0) {\n    array.splice(1, 0, {\n      title: 'DISCOUNT',\n      cost: parseFloat(discount).toFixed(2)\n    });\n  }\n  if (lodash__WEBPACK_IMPORTED_MODULE_3___default().get(order, 'refund.amount')) {\n    array.push({\n      title: 'REFUND',\n      cost: lodash__WEBPACK_IMPORTED_MODULE_3___default().get(order, 'refund.amount').toFixed(2)\n    });\n  }\n  return (\n    /*#__PURE__*/\n    // <Section className=\"bg-white w-full min-w-full\">\n    react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n      id: \"test12345\",\n      className: \"w-full m-0 p-0 !max-w-full\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Section, {\n      className: \"w-full\"\n    }, array.map(function (_ref2) {\n      var title = _ref2.title,\n        cost = _ref2.cost;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n      }, title == 'TOTAL' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Hr, {\n        className: \"bg-black\"\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n        className: \"w-full\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n        className: \"w-full\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n        className: \"\".concat(title == 'REFUND' ? 'text-red-700' : ' text-dark-gray', \" font-semibold p-0 m-0 text-sm  text-left tracking-wider\")\n      }, title, ' ')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n        className: \"w-full\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n        className: \"\".concat(title == 'REFUND' ? 'text-red-700' : ' text-dark-gray', \" text-right p-0 m-0 text-s flex whitespace-nowrap  tracking-wider\")\n      }, title == 'DISCOUNT' || title == 'REFUND' && '-', \"\\xA3\", cost))));\n    })))\n    //  </Section>\n  );\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TotalContainer);\n\n//# sourceURL=webpack://server/./React_Email/components/totalContainer.jsx?");

/***/ }),

/***/ "./React Email/emails/changeEmail.jsx":
/*!********************************************!*\
  !*** ./React Email/emails/changeEmail.jsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_header_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/header.jsx */ \"./React Email/components/header.jsx\");\n/* harmony import */ var _components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/emailHead.jsx */ \"./React Email/components/emailHead.jsx\");\n/* harmony import */ var _components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/emailTailwind.jsx */ \"./React Email/components/emailTailwind.jsx\");\n/* harmony import */ var _components_thanks_jsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/thanks.jsx */ \"./React Email/components/thanks.jsx\");\n/* harmony import */ var _components_footer_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/footer.jsx */ \"./React Email/components/footer.jsx\");\n\n\n\n\n\n\n\nvar CLOUDFRONT_URL = process.env.CLOUDFRONT_URL;\nfunction ChangeEmail(_ref) {\n  var firstName = _ref.firstName,\n    newEmail = _ref.newEmail;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Html, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], null, !newEmail ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Preview, null, \"This is where you\\u2019ll get emails from us now. Your email address has been updated Hey there \", firstName, \", you\\u2019ve updated your email address so now we\\u2019ll keep you posted.\") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Preview, null, \"We\\u2019ll send emails to your new account now. Your email address has been updated Hey there \", firstName, \", you\\u2019ve updated your email address to\", newEmail, \". That me\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"!bg-light-grey w-full\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Section, {\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_header_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, {\n    className: \"!p-0 !m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Column, {\n    className: \"p-5 w-full !max-w-full text-center box-border !m-0\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Img, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/icons8-person-96.png\"),\n    className: \"bg-transparent w-9 h-9 text-center mx-auto object-cover\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"font-semibold text-base tracking-wider pb-0 mb-1\"\n  }, \"YOUR EMAIL ADDRESS HAS BEEN UPDATED\"), !newEmail ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"p-0 m-0\"\n  }, \"Hey there \", firstName, \", you\\u2019ve updated your email address so now we\\u2019ll keep you posted on this account. Check back here for order updates and more.\") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"p-0 m-0\"\n  }, \"Hey there \", firstName, \", you\\u2019ve updated your email address to\", ' ', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", {\n    className: \"underline \",\n    href: \"mailto: \".concat(newEmail)\n  }, newEmail), \". That means we\\u2019ll send emails about order updates and more to that account now, instead of this one. See you on the other side!\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, {\n    className: \"!p-0 !m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Column, {\n    className: \"p-5 !w-full !m-0 \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"p-5 bg-white !w-full  !max-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"p-0 m-0 font-semibold text-base\"\n  }, \"DIDN\\u2019T DO THIS?\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, null, \"If you didn\\u2019t change your email address or need to get in touch with our Customer Care team, use the link below.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"w-full !text-center \",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Button, {\n    className: \"px-10 py-3 text-sm font-medium text-center text-white bg-[#2d2d2d] \"\n  }, \"GET IN TOUCH\"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, {\n    className: \"w-full !max-w-full !p-0 !m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Column, {\n    className: \"p-5 pb-1 w-full !m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"p-5 bg-white !max-w-full  !w-full !m-0 \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"p-0 m-0 font-semibold text-base\"\n  }, \"KEEPING YOUR ACCOUNT SAFE\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"m-0 p-0\"\n  }, \"At GLAMO, your account security is super important to us. We\\u2019ll never ask you to send your password or card details to us by email. If you receive an email claiming to be from GLAMO requesting this information, please don\\u2019t reply, but do let us know.\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Column, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_thanks_jsx__WEBPACK_IMPORTED_MODULE_5__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"pt-1\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_footer_jsx__WEBPACK_IMPORTED_MODULE_6__[\"default\"], null)))))))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChangeEmail);\n\n//# sourceURL=webpack://server/./React_Email/emails/changeEmail.jsx?");

/***/ }),

/***/ "./React Email/emails/changePassword.jsx":
/*!***********************************************!*\
  !*** ./React Email/emails/changePassword.jsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_header_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/header.jsx */ \"./React Email/components/header.jsx\");\n/* harmony import */ var _components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/emailHead.jsx */ \"./React Email/components/emailHead.jsx\");\n/* harmony import */ var _components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/emailTailwind.jsx */ \"./React Email/components/emailTailwind.jsx\");\n/* harmony import */ var _components_thanks_jsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/thanks.jsx */ \"./React Email/components/thanks.jsx\");\n/* harmony import */ var _components_footer_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/footer.jsx */ \"./React Email/components/footer.jsx\");\n\n\n\n\n\n\n\nvar CLOUDFRONT_URL = process.env.CLOUDFRONT_URL;\nfunction ChangePassword(_ref) {\n  var firstName = _ref.firstName;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Html, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Preview, null, \"All done for you. GLAMO - Discover Fashion Online Password changed Hey\", ' ', firstName, \", your password's now been changed, so you can get back to doing what you came here for. Didn't do this? If you didn't.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"!bg-light-grey w-full \",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Section, {\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_header_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, {\n    className: \"!p-0 !m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Column, {\n    className: \"p-5 w-full !max-w-full text-center box-border !m-0\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Img, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/lock.png\"),\n    className: \"bg-transparent w-7 h-7 text-center mx-auto\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"font-semibold text-base tracking-wider pb-0 mb-1\"\n  }, \"PASSWORD CHANGED\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"p-0 m-0\"\n  }, \"Hey \", firstName, \", your password\\u2019s now been changed, so you can get back to doing what you came here for.\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, {\n    className: \"!p-0 !m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Column, {\n    className: \"p-5 !w-full !m-0 \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"p-5 bg-white !w-full  !max-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"p-0 m-0 font-semibold text-base\"\n  }, \"DIDN\\u2019T DO THIS?\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, null, \"If you didn\\u2019t change your password or need to get in touch with our Customer Care team, use the link below.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"w-full !text-center \",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Button, {\n    className: \"px-10 py-3 text-sm font-medium text-center text-white bg-[#2d2d2d] \"\n  }, \"GET IN TOUCH\"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, {\n    className: \"w-full !max-w-full !p-0 !m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Column, {\n    className: \"p-5 pb-1 w-full !m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"p-5 bg-white !max-w-full  !w-full !m-0 \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"p-0 m-0 font-semibold text-base\"\n  }, \"KEEPING YOUR ACCOUNT SAFE\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    className: \"m-0 p-0\"\n  }, \"At GLAMO, your account security is super important to us. We\\u2019ll never ask you to send your password or card details to us by email. If you receive an email claiming to be from GLAMO requesting this information, please don\\u2019t reply, but do let us know.\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Column, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_thanks_jsx__WEBPACK_IMPORTED_MODULE_5__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_1__.Container, {\n    className: \"pt-1\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_footer_jsx__WEBPACK_IMPORTED_MODULE_6__[\"default\"], null)))))))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChangePassword);\n\n//# sourceURL=webpack://server/./React_Email/emails/changePassword.jsx?");

/***/ }),

/***/ "./React Email/emails/orderCancelled.jsx":
/*!***********************************************!*\
  !*** ./React Email/emails/orderCancelled.jsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"@babel/runtime/helpers/extends\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_totalContainer_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/totalContainer.jsx */ \"./React Email/components/totalContainer.jsx\");\n/* harmony import */ var _components_item_jsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/item.jsx */ \"./React Email/components/item.jsx\");\n/* harmony import */ var _components_thanks_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/thanks.jsx */ \"./React Email/components/thanks.jsx\");\n/* harmony import */ var _components_footer_jsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/footer.jsx */ \"./React Email/components/footer.jsx\");\n/* harmony import */ var _components_morequestions_jsx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/morequestions.jsx */ \"./React Email/components/morequestions.jsx\");\n/* harmony import */ var _components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/emailHead.jsx */ \"./React Email/components/emailHead.jsx\");\n/* harmony import */ var _components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/emailTailwind.jsx */ \"./React Email/components/emailTailwind.jsx\");\n/* harmony import */ var _components_header_jsx__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/header.jsx */ \"./React Email/components/header.jsx\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_13__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction OrderCancel(_ref) {\n  var _order$customer, _order$items;\n  var order = _ref.order;\n  var totalItems = lodash__WEBPACK_IMPORTED_MODULE_13___default().get(order, 'items.length');\n  var orderDate = dayjs__WEBPACK_IMPORTED_MODULE_12___default()(order === null || order === void 0 ? void 0 : order.createdAt).format('dddd DD MMMM YYYY');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Html, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Head, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_10__[\"default\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Body, {\n    className: \" w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    align: \"center\",\n    className: \"bg-[#eeeeee] max-w-[37.5rem]\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_header_jsx__WEBPACK_IMPORTED_MODULE_11__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    align: \"center\",\n    className: \"py-6\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Img, {\n    src: 'https://aws-glamo-upload-bucket.s3.eu-west-2.amazonaws.com/files/logos/icons8-box-64.png',\n    className: \"w-8 h-8\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"font-semibold text-lg p-0 py-2 m-0\"\n  }, \"YOUR ORDER HAS BEEN CANCELLED\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"w-5/6 text-center p-0 pb-1 m-0\"\n  }, \"Hi \", order === null || order === void 0 || (_order$customer = order.customer) === null || _order$customer === void 0 ? void 0 : _order$customer.firstName, \", we\\u2019ve cancelled the order below as requested and you haven\\u2019t been charged. All done!\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0\"\n  }, \"Order No.: \", order === null || order === void 0 ? void 0 : order._id), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0 leading-4\"\n  }, \"Order Date: \", orderDate))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, {\n    className: \"px-5 pt-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    className: \"p-4 bg-white\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"bg-white\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"font-semibold tracking-wider text-base pt-0 mt-0\"\n  }, totalItems, \" \", totalItems == 1 ? 'ITEM' : 'ITEMS'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, {\n    className: \"p-0 m-0\"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    className: \"bg-white \",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"px-4 pb-0 bg-white\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, {\n    className: \"bg-white\"\n  }, order === null || order === void 0 || (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items.map(function (itemProps, idx) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_item_jsx__WEBPACK_IMPORTED_MODULE_5__[\"default\"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, itemProps, {\n      key: idx\n    }));\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, {\n    className: \"bg-white box-border m-0 pb-2\"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"bg-white p-5 pt-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_totalContainer_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    order: order\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"box-border p-5 pb-2 min-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    className: \"bg-white min-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"bg-white p-4 pt-0  min-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"font-semibold text-lg\"\n  }, \"REFUND DETAILS\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-[13px] leading-4\"\n  }, \"If any payment was taken, these funds should appear on your bank statement within 5-10 working days (Please note that refund times are dictated by the card issuers and are outside our control). If a discount was applied on your original order, the amount refunded will be adjusted to allow for the revised order value and appropriate discount level. If you used a Gift Voucher on your order, you\\u2019ll be issued with a new voucher which will be locked to your account.\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_thanks_jsx__WEBPACK_IMPORTED_MODULE_6__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_morequestions_jsx__WEBPACK_IMPORTED_MODULE_8__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_footer_jsx__WEBPACK_IMPORTED_MODULE_7__[\"default\"], null))))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrderCancel);\n\n//# sourceURL=webpack://server/./React_Email/emails/orderCancelled.jsx?");

/***/ }),

/***/ "./React Email/emails/orderReceived.jsx":
/*!**********************************************!*\
  !*** ./React Email/emails/orderReceived.jsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"@babel/runtime/helpers/extends\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_totalContainer_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/totalContainer.jsx */ \"./React Email/components/totalContainer.jsx\");\n/* harmony import */ var _components_item_jsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/item.jsx */ \"./React Email/components/item.jsx\");\n/* harmony import */ var _components_thanks_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/thanks.jsx */ \"./React Email/components/thanks.jsx\");\n/* harmony import */ var _components_footer_jsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/footer.jsx */ \"./React Email/components/footer.jsx\");\n/* harmony import */ var _components_morequestions_jsx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/morequestions.jsx */ \"./React Email/components/morequestions.jsx\");\n/* harmony import */ var _components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/emailHead.jsx */ \"./React Email/components/emailHead.jsx\");\n/* harmony import */ var _components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/emailTailwind.jsx */ \"./React Email/components/emailTailwind.jsx\");\n/* harmony import */ var _components_header_jsx__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/header.jsx */ \"./React Email/components/header.jsx\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_14__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar _process$env = process.env,\n  CLOUDFRONT_URL = _process$env.CLOUDFRONT_URL,\n  CLIENT_URL = _process$env.CLIENT_URL;\nfunction OrderReceived(_ref) {\n  var _order$customer, _order$shipping_addre, _order$shipping_addre2, _order$shipping_addre3, _order$shipping_addre4, _order$shipping_addre5, _order$shipping_addre6, _order$shipping_addre7, _order$shipping_addre8, _$get, _order$payment_type, _order$payment_type2, _order$payment_type3;\n  var order = _ref.order;\n  var orderDate = dayjs__WEBPACK_IMPORTED_MODULE_12___default()(order === null || order === void 0 ? void 0 : order.createdAt).format('dddd DD MMMM YYYY');\n  var url = \"\".concat(CLOUDFRONT_URL, \"/files/logos\");\n  var logos = {\n    afterpay: 'afterpay.png',\n    amex: 'american-express.png',\n    klarna: 'klarna.png',\n    maestro: 'maestro.png',\n    mastercard: 'mastercard-alt.png',\n    paypal: 'paypal.png',\n    'union-pay': 'union-pay.png',\n    visa: 'visa.png'\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Html, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_10__[\"default\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"!bg-light-grey w-full\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, {\n    className: \"w-full\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_header_jsx__WEBPACK_IMPORTED_MODULE_11__[\"default\"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    className: \"w-full box-border  \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"text-center p-4 pb-0 w-full min-w-full\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Img, {\n    src: 'https://aws-glamo-upload-bucket.s3.eu-west-2.amazonaws.com/files/logos/icons8-box-64.png',\n    className: \"w-8 h-8 mx-auto\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"font-semibold text-lg p-0 py-2 m-0\"\n  }, \"IT\\u2019S ORDERED!\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0 pb-1\"\n  }, \"Hi \", order === null || order === void 0 || (_order$customer = order.customer) === null || _order$customer === void 0 ? void 0 : _order$customer.firstName, \", your order has been received.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0 h-fit leading-6\"\n  }, \"Order No.: \", order === null || order === void 0 ? void 0 : order._id), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0 leading-4\"\n  }, \"Order date: \", orderDate))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"p-5 w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"test bg-white p-4 py-5 w-full min-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"m-0 p-0 font-semibold tracking-wide text-base\"\n  }, \"DELIVERY DETAILS\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"m-0 p-0 py-2 font-semibold text-gray-500 tracking-wide text-base\"\n  }, ' ', \"DELIVERY ADDRESS\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"p-0 m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0\"\n  }, order === null || order === void 0 || (_order$shipping_addre = order.shipping_address) === null || _order$shipping_addre === void 0 ? void 0 : _order$shipping_addre.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0\"\n  }, order === null || order === void 0 || (_order$shipping_addre2 = order.shipping_address) === null || _order$shipping_addre2 === void 0 || (_order$shipping_addre2 = _order$shipping_addre2.address) === null || _order$shipping_addre2 === void 0 ? void 0 : _order$shipping_addre2.line1), (order === null || order === void 0 || (_order$shipping_addre3 = order.shipping_address) === null || _order$shipping_addre3 === void 0 || (_order$shipping_addre3 = _order$shipping_addre3.address) === null || _order$shipping_addre3 === void 0 ? void 0 : _order$shipping_addre3.line2) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0\"\n  }, order === null || order === void 0 || (_order$shipping_addre4 = order.shipping_address) === null || _order$shipping_addre4 === void 0 || (_order$shipping_addre4 = _order$shipping_addre4.address) === null || _order$shipping_addre4 === void 0 ? void 0 : _order$shipping_addre4.line2), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0\"\n  }, \"\".concat(order === null || order === void 0 || (_order$shipping_addre5 = order.shipping_address) === null || _order$shipping_addre5 === void 0 || (_order$shipping_addre5 = _order$shipping_addre5.address) === null || _order$shipping_addre5 === void 0 ? void 0 : _order$shipping_addre5.postal_code, \" \").concat(order === null || order === void 0 || (_order$shipping_addre6 = order.shipping_address) === null || _order$shipping_addre6 === void 0 || (_order$shipping_addre6 = _order$shipping_addre6.address) === null || _order$shipping_addre6 === void 0 ? void 0 : _order$shipping_addre6.state, \", \").concat(order === null || order === void 0 || (_order$shipping_addre7 = order.shipping_address) === null || _order$shipping_addre7 === void 0 || (_order$shipping_addre7 = _order$shipping_addre7.address) === null || _order$shipping_addre7 === void 0 ? void 0 : _order$shipping_addre7.country)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0\"\n  }, order === null || order === void 0 || (_order$shipping_addre8 = order.shipping_address) === null || _order$shipping_addre8 === void 0 ? void 0 : _order$shipping_addre8.phone))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"p-5 pt-0 w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"test bg-white p-4 py-5 w-full min-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"font-semibold text-base m-0 p-0\"\n  }, \"YOUR ORDER\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, null), (_$get = lodash__WEBPACK_IMPORTED_MODULE_14___default().get(order, 'itemsByProfile')) === null || _$get === void 0 ? void 0 : _$get.map(function (_ref2) {\n    var items = _ref2.items,\n      shippingInfo = _ref2.shippingInfo;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n      className: \"p-0 m-0 text-green-700\"\n    }, \"Estimated delivery date:\", ' ', dayjs__WEBPACK_IMPORTED_MODULE_12___default()(shippingInfo === null || shippingInfo === void 0 ? void 0 : shippingInfo.endDate).format('dddd, D MMMM, YYYY')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n      className: \"m-0 p-0 pb-3\"\n    }, \"Delivery Method:\", ' ', lodash__WEBPACK_IMPORTED_MODULE_14___default().get(shippingInfo, 'shipping.service')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, {\n      className: \"bg-white\"\n    }, items === null || items === void 0 ? void 0 : items.map(function (itemProps, idx) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_item_jsx__WEBPACK_IMPORTED_MODULE_5__[\"default\"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, itemProps, {\n        key: idx\n      }));\n    })));\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_totalContainer_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    order: order\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"p-5 pt-0 w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, {\n    className: \"bg-white p-4 py-5 w-full \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"font-semibold text-base pb-1 m-0 !important\"\n  }, \"PAYMENT DETAILS\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"m-0 p-0 font-bold text-dark-gray tracking-wider \"\n  }, \"PAYMENT TYPE\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    className: \"mt-2 \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    id: \"payment\",\n    className: \"w-12 border-2 h-8  border-black\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Img, {\n    src: \"\".concat(url, \"/\").concat((logos === null || logos === void 0 ? void 0 : logos[order === null || order === void 0 || (_order$payment_type = order.payment_type) === null || _order$payment_type === void 0 ? void 0 : _order$payment_type.toLowerCase()]) || 'credit-card-icon.png'),\n    alt: \"logo\",\n    title: \"logo\",\n    className: \"w-full bg-light-grey rounded-sm block h-full object-contain\"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"pl-4 text-sm\"\n  }, (order === null || order === void 0 || (_order$payment_type2 = order.payment_type) === null || _order$payment_type2 === void 0 || (_order$payment_type2 = _order$payment_type2[0]) === null || _order$payment_type2 === void 0 ? void 0 : _order$payment_type2.toUpperCase()) + (order === null || order === void 0 || (_order$payment_type3 = order.payment_type) === null || _order$payment_type3 === void 0 ? void 0 : _order$payment_type3.substring(1))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"p-5 py-0 !bg-light-grey w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, {\n    className: \" p-4 py-5 bg-white w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"font-semibold text-base p-0 pb-1 m-0\"\n  }, \"CHANGED YOUR MIND?\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-dark-gray font-semibold tracking-wider\"\n  }, \"CANCELLING AN ORDER\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-sm\"\n  }, \"We\\u2019re not able to make changes to your order, but you do have the option to cancel it. Find out more. Go to your order from the button below and follow the instructions.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"align-middle px-auto text-center\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Button, {\n    href: \"\".concat(CLIENT_URL, \"/order-success?order-number=\").concat(order === null || order === void 0 ? void 0 : order._id),\n    target: \"_blank\",\n    className: \"block text-center self-center no-underline mx-auto text-inherit font-semibold w-2/4 py-3 text-sm border-2 border-solid border-light-grey tracking-wider\"\n  }, \"VIEW ORDER\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-dark-gray font-semibold tracking-wider \"\n  }, \"RETURNING AN ORDER\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"text-sm\"\n  }, \"You also have the option to return any unwanted items by Monday 15 January 2024*. However, for hygiene reasons there are some items that we can\\u2019t accept back and these will be sent back to you.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"align-middle px-auto text-center\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Button, {\n    href: \"\".concat(CLIENT_URL, \"/return-information\"),\n    target: \"_blank\",\n    className: \"block text-center self-center no-underline mx-auto text-inherit font-semibold w-2/4 py-3 text-sm border-2 border-solid border-light-grey tracking-wider\"\n  }, \"RETURN INFORMATION\"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_thanks_jsx__WEBPACK_IMPORTED_MODULE_6__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_morequestions_jsx__WEBPACK_IMPORTED_MODULE_8__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_footer_jsx__WEBPACK_IMPORTED_MODULE_7__[\"default\"], null)))))))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrderReceived);\n\n//# sourceURL=webpack://server/./React_Email/emails/orderReceived.jsx?");

/***/ }),

/***/ "./React Email/emails/orderShipped.jsx":
/*!*********************************************!*\
  !*** ./React Email/emails/orderShipped.jsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"@babel/runtime/helpers/extends\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_header_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/header.jsx */ \"./React Email/components/header.jsx\");\n/* harmony import */ var _components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/emailHead.jsx */ \"./React Email/components/emailHead.jsx\");\n/* harmony import */ var _components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/emailTailwind.jsx */ \"./React Email/components/emailTailwind.jsx\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _components_item_jsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/item.jsx */ \"./React Email/components/item.jsx\");\n/* harmony import */ var _components_thanks_jsx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/thanks.jsx */ \"./React Email/components/thanks.jsx\");\n/* harmony import */ var _components_footer_jsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/footer.jsx */ \"./React Email/components/footer.jsx\");\n/* harmony import */ var _components_morequestions_jsx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/morequestions.jsx */ \"./React Email/components/morequestions.jsx\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_11__);\n\n\n\n\n\n\n\n\n\n\n\n\nfunction OrderShipped(_ref) {\n  var _$get, _order$shipping_addre, _order$shipping_addre2, _order$shipping_addre3, _order$shipping_addre4, _order$shipping_addre5, _order$shipping_addre6, _order$shipping_addre7, _order$shipping_addre8, _order$items, _order$items2, _order$items3;\n  var order = _ref.order,\n    preview = _ref.preview;\n  var orderDate = dayjs__WEBPACK_IMPORTED_MODULE_6___default()(order === null || order === void 0 ? void 0 : order.createdAt).format('dddd DD MMMM YYYY');\n  var courierLinks = {\n    'royal mail': 'https://www.royalmail.com/track-your-item#/tracking-results/',\n    ups: 'https://www.ups.com/track?track=yes&trackNums=',\n    fedex: 'https://www.fedex.com/apps/fedextrack/?action=track&trackingnumber=',\n    dhl: 'https://www.dhl.com/en/express/tracking.html?AWB=',\n    hermes: 'https://www.evri.com/track/parcel/',\n    'parcelforce worldwide': 'https://www.parcelforce.com/track-trace?trackNumber=',\n    yodel: 'https://www.yodel.co.uk/track/?parcelNumber=',\n    tnt: 'https://www.fedex.com/apps/fedextrack/?action=track&trackingnumber='\n  };\n  var isMonthDifferent = dayjs__WEBPACK_IMPORTED_MODULE_6___default()(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.min_delivery_date')).diff(dayjs__WEBPACK_IMPORTED_MODULE_6___default()(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.max_delivery_date')), 'month') >= 1;\n  var estimated_delivery = '';\n  if (dayjs__WEBPACK_IMPORTED_MODULE_6___default()(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.min_delivery_date')).diff(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.max_delivery_date'), 'day') <= 1) {\n    estimated_delivery = \"\".concat(dayjs__WEBPACK_IMPORTED_MODULE_6___default()(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.max_delivery_date')).format('dddd DD MMMM, YYYY'));\n  } else if (isMonthDifferent) {\n    estimated_delivery = \"\".concat(dayjs__WEBPACK_IMPORTED_MODULE_6___default()(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.min_delivery_date')).format('ddd DD MMMM'), \" - \").concat(dayjs__WEBPACK_IMPORTED_MODULE_6___default()(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.max_delivery_date')).format('ddd DD MMMM, YYYY'), \"}\");\n  } else {\n    estimated_delivery = \"\".concat(dayjs__WEBPACK_IMPORTED_MODULE_6___default()(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.min_delivery_date')).format('ddd DD'), \" - \").concat(dayjs__WEBPACK_IMPORTED_MODULE_6___default()(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.max_delivery_date')).format('ddd DD MMMM, YYYY'), \"}\");\n  }\n  var trackingLink = \"\".concat(courierLinks[(_$get = lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.courier')) === null || _$get === void 0 ? void 0 : _$get.toLowerCase()] || 'https://parcelsapp.com/en/tracking/').concat(lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.tracking_number'));\n  var deliveryMethods = Array.from(new Set(order === null || order === void 0 ? void 0 : order.itemsByProfile.map(function (_ref2) {\n    var shippingInfo = _ref2.shippingInfo;\n    return lodash__WEBPACK_IMPORTED_MODULE_11___default().get(shippingInfo, 'shipping.service');\n  })));\n  var TrackButton = function TrackButton() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n      className: \"mt-3 w-full text-center mx-auto\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Button, {\n      href: trackingLink,\n      className: \"tracking-wider text-center  bg-[#2d2d2d] font-semibold px-16 cursor-pointer\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n      className: \"text-white text-sm \"\n    }, \"TRACK PARCEL\")));\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Html, {\n    lang: \"en\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_5__[\"default\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Body, {\n    align: \"center\",\n    className: \"!text-center w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    align: \"center\",\n    className: \"\".concat(preview ? 'min-w-full' : 'max-w-[37.5rem]', \" !bg-light-grey \")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Section, {\n    className: \"w-full\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_header_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \"w-full box-border  !min-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    className: \"text-center p-4 w-full min-w-full\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Img, {\n    src: 'https://aws-glamo-upload-bucket.s3.eu-west-2.amazonaws.com/files/logos/icons8-box-64.png',\n    className: \"w-8 h-8 mx-auto\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"font-bold\"\n  }, \"WE\\u2019VE SENT IT!\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, null, \"Hi \", lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'customer.firstName') || '', \", your parcel is on its way and it should be with you soon!\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0\"\n  }, \"Order No.: \", order === null || order === void 0 ? void 0 : order._id), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0\"\n  }, \"Order date: \", orderDate), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0 text-green-700\"\n  }, \"Estimated delivery date: \", estimated_delivery), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(TrackButton, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \" !bg-light-grey min-w-full mb-4\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    align: \"center\",\n    className: \"!bg-light-grey min-w-full \",\n    style: {\n      padding: '0 20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    className: \"min-w-full \".concat(preview ? '!border-[1.25rem] !border-white' : '!p-5', \" !m-0 !bg-white\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"m-0 p-0 font-semibold tracking-wide text-base border-b-8 border-white\"\n  }, \"DELIVERY DETAILS\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Hr, null), ' ', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"m-0 p-0 py-2 font-semibold text-gray-500 tracking-wide text-base\"\n  }, ' ', \"DELIVERY ADDRESS\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    className: \"p-0 m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0\"\n  }, order === null || order === void 0 || (_order$shipping_addre = order.shipping_address) === null || _order$shipping_addre === void 0 ? void 0 : _order$shipping_addre.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0\"\n  }, order === null || order === void 0 || (_order$shipping_addre2 = order.shipping_address) === null || _order$shipping_addre2 === void 0 || (_order$shipping_addre2 = _order$shipping_addre2.address) === null || _order$shipping_addre2 === void 0 ? void 0 : _order$shipping_addre2.line1), (order === null || order === void 0 || (_order$shipping_addre3 = order.shipping_address) === null || _order$shipping_addre3 === void 0 || (_order$shipping_addre3 = _order$shipping_addre3.address) === null || _order$shipping_addre3 === void 0 ? void 0 : _order$shipping_addre3.line2) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0\"\n  }, order === null || order === void 0 || (_order$shipping_addre4 = order.shipping_address) === null || _order$shipping_addre4 === void 0 || (_order$shipping_addre4 = _order$shipping_addre4.address) === null || _order$shipping_addre4 === void 0 ? void 0 : _order$shipping_addre4.line2), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0\"\n  }, \"\".concat(order === null || order === void 0 || (_order$shipping_addre5 = order.shipping_address) === null || _order$shipping_addre5 === void 0 || (_order$shipping_addre5 = _order$shipping_addre5.address) === null || _order$shipping_addre5 === void 0 ? void 0 : _order$shipping_addre5.postal_code, \" \").concat(order === null || order === void 0 || (_order$shipping_addre6 = order.shipping_address) === null || _order$shipping_addre6 === void 0 || (_order$shipping_addre6 = _order$shipping_addre6.address) === null || _order$shipping_addre6 === void 0 ? void 0 : _order$shipping_addre6.state, \", \").concat(order === null || order === void 0 || (_order$shipping_addre7 = order.shipping_address) === null || _order$shipping_addre7 === void 0 || (_order$shipping_addre7 = _order$shipping_addre7.address) === null || _order$shipping_addre7 === void 0 ? void 0 : _order$shipping_addre7.country)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0\"\n  }, order === null || order === void 0 || (_order$shipping_addre8 = order.shipping_address) === null || _order$shipping_addre8 === void 0 ? void 0 : _order$shipping_addre8.phone)), deliveryMethods.length >= 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"m-0 p-0 py-2 font-semibold text-gray-500 tracking-wide text-base\"\n  }, (deliveryMethods === null || deliveryMethods === void 0 ? void 0 : deliveryMethods.length) > 1 ? 'DELIVERY METHODS' : 'DELIVERY METHOD'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0 \"\n  }, deliveryMethods.join(', ')))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \" !bg-light-grey w-full m-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    id: \"test-colum\",\n    align: \"center\",\n    className: \"!bg-light-grey  !mx-auto \",\n    style: {\n      padding: '0 20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    className: \"bg-white min-w-full p-5 \".concat(preview ? 'border-[1.25rem]  !border-white' : '')\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"font-semibold text-base m-0 p-0 border-white border-b-8\"\n  }, \"\".concat(order === null || order === void 0 || (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items.length, \" \").concat((order === null || order === void 0 || (_order$items2 = order.items) === null || _order$items2 === void 0 ? void 0 : _order$items2.length) > 1 ? 'ITEMS' : 'ITEM', \" SENT\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Hr, null), ' ', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"border-y-8 border-white m-0 text-green-700\"\n  }, \"Estimated delivery date:\", ' ', estimated_delivery), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Hr, null), ' ', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \"bg-white \",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    className: \"pt-3 pb-0 bg-white\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Section, {\n    className: \"bg-white\"\n  }, order === null || order === void 0 || (_order$items3 = order.items) === null || _order$items3 === void 0 ? void 0 : _order$items3.map(function (itemProps, idx) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_item_jsx__WEBPACK_IMPORTED_MODULE_7__[\"default\"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, itemProps, {\n      key: idx\n    }));\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Hr, null), \" \", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(TrackButton, null)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \"w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    align: \"center\",\n    className: \"w-full !mx-auto !px-5 !max-w-[37.5rem] \"\n  }, lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.note') && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    className: \" bg-light-grey text-center w-full\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"!mb-0 !pb-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"span\", {\n    className: \"font-semibold\"\n  }, \"Note from Glamo\"), ' '), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"!my-0 !py-0 text-black/70  !break-all w-full\"\n  }, lodash__WEBPACK_IMPORTED_MODULE_11___default().get(order, 'shipped.note'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_thanks_jsx__WEBPACK_IMPORTED_MODULE_8__[\"default\"], null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    align: \"center\",\n    className: \"!min-w-full w-full bg-[#dedfe4]\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_morequestions_jsx__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    preview: preview\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    align: \"center\",\n    className: \"!mx-auto !min-w-full w-full bg-[#333333]\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_footer_jsx__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null))))))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrderShipped);\n\n//# sourceURL=webpack://server/./React_Email/emails/orderShipped.jsx?");

/***/ }),

/***/ "./React Email/emails/orderSuccess.jsx":
/*!*********************************************!*\
  !*** ./React Email/emails/orderSuccess.jsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ OrderSuccess)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"@babel/runtime/helpers/extends\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _components_totalContainer_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/totalContainer.jsx */ \"./React Email/components/totalContainer.jsx\");\n/* harmony import */ var _components_item_jsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/item.jsx */ \"./React Email/components/item.jsx\");\n/* harmony import */ var _components_thanks_jsx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/thanks.jsx */ \"./React Email/components/thanks.jsx\");\n/* harmony import */ var _components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/emailTailwind.jsx */ \"./React Email/components/emailTailwind.jsx\");\n\n\n\n\n\n\n\nvar clientUrl = process.env.CLIENT_URL;\n\n\n\n\n\nvar logos = {\n  afterpay: 'afterpay.png',\n  amex: 'american-express.png',\n  klarna: 'klarna.png',\n  maestro: 'maestro.png',\n  mastercard: 'mastercard-alt.png',\n  paypal: 'paypal.png',\n  'union-pay': 'union-pay.png',\n  visa: 'visa.png'\n};\nfunction OrderSuccess(_ref) {\n  var _shipping_address$add, _shipping_address$add2, _shipping_address$add3, _shipping_address$add4, _shipping_address$add5, _shipping_address$add6, _paymentType$;\n  var firstName = _ref.firstName,\n    shipping_address = _ref.shipping_address,\n    subtotal = _ref.subtotal,\n    orderNumber = _ref.orderNumber,\n    orderDate = _ref.orderDate,\n    deliveryCost = _ref.deliveryCost,\n    total = _ref.total,\n    paymentType = _ref.paymentType,\n    deliveryName = _ref.deliveryName,\n    items = _ref.items,\n    status = _ref.status;\n  // const { firstName, shipping_address, subtotal, orderNumber, orderDate, deliveryCost, total, paymentType } = props;\n\n  var url = 'https://dknhps0hwilzj.cloudfront.net/files/logos';\n  var title = {\n    received: 'IT’S ORDERED!',\n    failed: 'YOUR ORDER HAS FAILED!',\n    shipped: \"YOUR ORDER HAS ON IT'S WAY!\",\n    cancelled: 'YOUR ORDER HAS BEEN CANCELLED!'\n  };\n  var text = {\n    received: 'your order has been received.',\n    failed: 'your order has failed.',\n    shipped: 'your order has been shipped.',\n    cancelled: 'we’ve cancelled the order below as requested and you haven’t been charged. All done!'\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Html, {\n    lang: \"en\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Head, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Body, {\n    \"data-new-gr-c-s-loaded\": \"14.1143.0\",\n    style: {\n      width: '100%',\n      fontFamily: \"arial, 'helvetica neue', helvetica, sans-serif\",\n      WebkitTextSizeAdjust: '100%',\n      MsTextSizeAdjust: '100%',\n      padding: '0',\n      margin: '0'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"div\", {\n    dir: \"ltr\",\n    className: \"es-wrapper-color\",\n    lang: \"EN\",\n    style: {\n      backgroundColor: '#f6f6f6'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    className: \"es-wrapper\",\n    width: \"100%\",\n    cellSpacing: \"0\",\n    cellPadding: \"0\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px',\n      padding: '0',\n      margin: '0',\n      width: '100%',\n      height: '100%',\n      backgroundRepeat: 'repeat',\n      backgroundPosition: 'center top',\n      backgroundColor: '#f6f6f6'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    valign: \"top\",\n    style: {\n      padding: 0,\n      margin: 0\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    className: \"es-header\",\n    cellSpacing: \"0\",\n    cellPadding: \"0\",\n    align: \"center\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px',\n      tableLayout: 'fixed !important',\n      width: '100%',\n      backgroundColor: 'transparent',\n      backgroundRepeat: 'repeat',\n      backgroundPosition: 'center top'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    style: {\n      padding: 0,\n      margin: 0\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    className: \"es-header-body\",\n    cellSpacing: \"0\",\n    cellPadding: \"0\",\n    bgcolor: \"#eee\",\n    align: \"center\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px',\n      backgroundColor: '#eeeeee',\n      width: '600px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    style: {\n      padding: '0',\n      margin: '0'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    valign: \"top\",\n    style: {\n      padding: '0',\n      margin: '0',\n      width: '600px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    bgcolor: \"#2d2d2d\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px',\n      backgroundColor: '#2d2d2d'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    style: {\n      padding: '0',\n      margin: '0'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"img\", {\n    src: \"https://fbtskzl.stripocdn.email/content/guids/CABINET_b2c54c9f4f7a6a37ee9f194178460c55773a1f517775c0801028dbe0265558ca/images/glamo_2SY.png\",\n    style: {\n      display: 'block',\n      border: '0',\n      outline: 'none',\n      textDecoration: 'none',\n      msInterpolationMode: 'bicubic',\n      width: '100px',\n      margin: '0px auto',\n      padding: '20px'\n    },\n    alt: \"Logo\"\n  }))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingTop: '20px',\n      paddingLeft: '20px',\n      paddingRight: '20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    valign: \"top\",\n    style: {\n      padding: '0',\n      margin: '0',\n      width: '560px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    style: {\n      padding: '0',\n      margin: '0'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"img\", {\n    src: \"https://fbtskzl.stripocdn.email/content/guids/CABINET_b2c54c9f4f7a6a37ee9f194178460c55773a1f517775c0801028dbe0265558ca/images/icons8box64.png\",\n    style: {\n      display: 'block',\n      border: '0',\n      outline: 'none',\n      textDecoration: 'none',\n      msInterpolationMode: 'bicubic',\n      width: '30px',\n      height: '30px',\n      margin: '0px auto'\n    },\n    alt: \"Icon\"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingTop: '15px',\n      paddingBottom: '15px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    style: {\n      margin: '0',\n      WebkitTextSizeAdjust: 'none',\n      MsTextSizeAdjust: 'none',\n      msoLineHeightRule: 'exactly',\n      fontFamily: 'arial, helvetica neue, helvetica, sans-serif',\n      lineHeight: '17px',\n      color: '#333333',\n      fontSize: '14px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"b\", null, title[status])), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, null, ' ', \"Hi \", firstName, \", \", text[status]), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, null, \"Order No.: \", orderNumber), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, null, \"Order date: \", orderDate))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingTop: '20px',\n      paddingLeft: '20px',\n      paddingRight: '20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    valign: \"top\",\n    style: {\n      padding: '0',\n      margin: '0',\n      width: '560px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    bgcolor: \"#ffffff\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingLeft: '15px',\n      paddingRight: '15px',\n      paddingTop: '20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    style: {\n      margin: '0',\n      WebkitTextSizeAdjust: 'none',\n      MsTextSizeAdjust: 'none',\n      msoLineHeightRule: 'exactly',\n      fontFamily: 'arial, helvetica neue, helvetica, sans-serif',\n      lineHeight: '21px',\n      color: '#333333',\n      fontSize: '14px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"strong\", null, \"DELIVERY DETAILS\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    style: {\n      margin: '0',\n      paddingTop: '10px',\n      paddingLeft: '15px',\n      paddingRight: '15px',\n      paddingBottom: '20px',\n      fontSize: '0'\n    },\n    bgcolor: \"#ffffff\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    border: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    style: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({\n      padding: '0',\n      margin: '0',\n      borderBottom: '2px solid #cccccc',\n      background: 'unset',\n      height: '1px',\n      width: '100%'\n    }, \"margin\", '0px')\n  }))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    bgcolor: \"#ffffff\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingLeft: '15px',\n      paddingRight: '15px',\n      paddingBottom: '25px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    // style={{\n    //   margin: '0',\n    //   WebkitTextSizeAdjust: 'none',\n    //   MsTextSizeAdjust: 'none',\n    //   msoLineHeightRule: 'exactly',\n    //   fontFamily:\n    //     'arial, helvetica neue, helvetica, sans-serif',\n    //   lineHeight: '21px',\n    //   color: '#333333',\n    //   fontSize: '14px',\n    // }}\n\n    className: \"p-0 m-0 pb-3 \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"strong\", null, \"DELIVERY ADDRESS\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    className: \"p-0 m-0 pb-1\"\n  }, shipping_address === null || shipping_address === void 0 ? void 0 : shipping_address.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    className: \"p-0 m-0 pb-1\"\n  }, shipping_address === null || shipping_address === void 0 || (_shipping_address$add = shipping_address.address) === null || _shipping_address$add === void 0 ? void 0 : _shipping_address$add.line1), (shipping_address === null || shipping_address === void 0 || (_shipping_address$add2 = shipping_address.address) === null || _shipping_address$add2 === void 0 ? void 0 : _shipping_address$add2.line2) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    className: \"p-0 m-0 pb-1\"\n  }, shipping_address === null || shipping_address === void 0 || (_shipping_address$add3 = shipping_address.address) === null || _shipping_address$add3 === void 0 ? void 0 : _shipping_address$add3.line2), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    className: \"p-0 m-0 pb-1\"\n  }, \"\".concat(shipping_address === null || shipping_address === void 0 || (_shipping_address$add4 = shipping_address.address) === null || _shipping_address$add4 === void 0 || (_shipping_address$add4 = _shipping_address$add4.postal_code) === null || _shipping_address$add4 === void 0 ? void 0 : _shipping_address$add4.toUpperCase(), \" \").concat(shipping_address === null || shipping_address === void 0 || (_shipping_address$add5 = shipping_address.address) === null || _shipping_address$add5 === void 0 ? void 0 : _shipping_address$add5.city, \", \").concat(shipping_address === null || shipping_address === void 0 || (_shipping_address$add6 = shipping_address.address) === null || _shipping_address$add6 === void 0 ? void 0 : _shipping_address$add6.country)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    className: \"p-0 m-0 pb-1\"\n  }, shipping_address === null || shipping_address === void 0 ? void 0 : shipping_address.phone))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingTop: '20px',\n      paddingLeft: '20px',\n      paddingRight: '20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    valign: \"top\",\n    style: {\n      padding: '0',\n      margin: '0',\n      width: '560px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    bgcolor: \"#ffffff\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingLeft: '15px',\n      paddingRight: '15px',\n      paddingTop: '20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    style: {\n      margin: '0',\n      WebkitTextSizeAdjust: 'none',\n      MsTextSizeAdjust: 'none',\n      msoLineHeightRule: 'exactly',\n      fontFamily: 'arial, helvetica neue, helvetica, sans-serif',\n      lineHeight: '21px',\n      color: '#333333',\n      fontSize: '14px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"strong\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"b\", null, \"YOUR ORDER\"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    style: {\n      margin: '0',\n      paddingTop: '10px',\n      paddingBottom: '10px',\n      paddingLeft: '15px',\n      paddingRight: '15px',\n      fontSize: '0'\n    },\n    bgcolor: \"#ffffff\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    border: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    style: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({\n      padding: '0',\n      margin: '0',\n      borderBottom: '2px solid #cccccc',\n      background: 'unset',\n      height: '1px',\n      width: '100%'\n    }, \"margin\", '0px')\n  }))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    bgcolor: \"#ffffff\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingLeft: '15px',\n      paddingRight: '15px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    style: {\n      margin: '0',\n      WebkitTextSizeAdjust: 'none',\n      MsTextSizeAdjust: 'none',\n      msoLineHeightRule: 'exactly',\n      fontFamily: 'arial, helvetica neue, helvetica, sans-serif',\n      lineHeight: '21px',\n      color: '#333333',\n      fontSize: '14px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"strong\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"span\", {\n    style: {\n      color: '#008000'\n    }\n  }, \"Estimated delivery date: Thursday 07 December 2023\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"p\", {\n    style: {\n      margin: '0',\n      WebkitTextSizeAdjust: 'none',\n      MsTextSizeAdjust: 'none',\n      msoLineHeightRule: 'exactly',\n      fontFamily: 'arial, helvetica neue, helvetica, sans-serif',\n      lineHeight: '21px',\n      color: '#000000',\n      fontSize: '14px'\n    }\n  }, \"Delivery method: \", deliveryName))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    style: {\n      padding: '0',\n      margin: '0'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Section, {\n    className: \"bg-white p-5 pt-6\"\n  }, items === null || items === void 0 ? void 0 : items.map(function (itemProps, idx) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_components_item_jsx__WEBPACK_IMPORTED_MODULE_7__[\"default\"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, itemProps, {\n      key: idx\n    }));\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    style: {\n      margin: '0',\n      paddingTop: '10px',\n      paddingBottom: '10px',\n      paddingLeft: '20px',\n      paddingRight: '20px',\n      fontSize: '0'\n    },\n    bgcolor: \"#ffffff\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    border: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    style: _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({\n      padding: '0',\n      margin: '0',\n      borderBottom: '1px solid #cccccc',\n      background: 'unset',\n      height: '1px',\n      width: '100%'\n    }, \"margin\", '0px')\n  }))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    style: {\n      padding: '0',\n      margin: '0'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_components_totalContainer_jsx__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    subtotal: subtotal,\n    total: total,\n    deliveryCost: deliveryCost\n  }))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingTop: '20px',\n      paddingLeft: '20px',\n      paddingRight: '20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Section, {\n    className: \"bg-white p-5\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"font-semibold text-dark-gray tracking-wider text-base pt-1 pb-2 m-0 !important\"\n  }, ' ', \"PAYMENT DETAILS\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"m-0 p-0 font-bold text-dark-gray tracking-wider \"\n  }, \"PAYMENT TYPE\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Row, {\n    className: \"mt-2 \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Column, {\n    id: \"payment\",\n    className: \"w-12 border-2 h-8  border-black\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Img, {\n    src: \"\".concat(url, \"/\").concat(logos === null || logos === void 0 ? void 0 : logos[paymentType === null || paymentType === void 0 ? void 0 : paymentType.toLowerCase()]),\n    alt: \"logo\",\n    title: \"logo\",\n    className: \"w-full bg-light-grey rounded-sm block h-full object-contain\"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Column, {\n    className: \"pl-4\"\n  }, ((_paymentType$ = paymentType[0]) === null || _paymentType$ === void 0 ? void 0 : _paymentType$.toUpperCase()) + paymentType.substring(1)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"left\",\n    style: {\n      padding: '0',\n      margin: '0',\n      paddingTop: '20px',\n      paddingLeft: '20px',\n      paddingRight: '20px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"table\", {\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    width: \"100%\",\n    style: {\n      msoTableLspace: '0pt',\n      msoTableRspace: '0pt',\n      borderCollapse: 'collapse',\n      borderSpacing: '0px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"td\", {\n    align: \"center\",\n    valign: \"top\",\n    style: {\n      padding: '0',\n      margin: '0',\n      width: '560px'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Section, {\n    className: \"bg-white p-5\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"font-semibold text-base\"\n  }, \"CHANGED YOUR MIND?\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Hr, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"text-dark-gray font-semibold tracking-wider\"\n  }, \"CANCELLING AN ORDER\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"text-sm\"\n  }, \"We\\u2019re not able to make changes to your order, but you do have the option to cancel it. Find out more. Go to your order from the button below and follow the instructions.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Container, {\n    className: \"align-middle px-auto text-center\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"a\", {\n    href: \"\".concat(clientUrl, \"/order-success?order-number=\").concat(orderNumber),\n    target: \"_blank\",\n    className: \"block text-center self-center no-underline mx-auto text-inherit font-semibold w-2/4 py-3 text-sm border-2 border-solid border-light-grey tracking-wider\"\n  }, \"VIEW ORDER\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"text-dark-gray font-semibold tracking-wider \"\n  }, \"RETURNING AN ORDER\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"text-sm\"\n  }, \"You also have the option to return any unwanted items by Monday 15 January 2024*. However, for hygiene reasons there are some items that we can\\u2019t accept back and these will be sent back to you.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Container, {\n    className: \"align-middle px-auto text-center\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"a\", {\n    href: \"\".concat(clientUrl, \"/return-information\"),\n    target: \"_blank\",\n    className: \"block text-center self-center no-underline mx-auto text-inherit font-semibold w-2/4 py-3 text-sm border-2 border-solid border-light-grey tracking-wider\"\n  }, \"RETURN INFORMATION\")))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_components_thanks_jsx__WEBPACK_IMPORTED_MODULE_8__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Container, {\n    className: \"bg-[#dedfe4] px-5 py-7 m-0 !min-w-[600px] \"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"m-0 p-0 font-semibold text-base pb-2\"\n  }, \"ANY QUESTIONS?\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n    className: \"m-0 p-0 pb-3 font-light\"\n  }, \"For everything else you want to know\\u2026\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Section, {\n    id: \"section-table\"\n  }, [{\n    column1: {\n      text: 'Payment, Promos & Gift Vouchers'\n    },\n    column2: {\n      text: 'Order issues'\n    }\n  }, {\n    column1: {\n      text: '\tDelivery'\n    },\n    column2: {\n      text: 'Customer Care'\n    }\n  }].map(function (_ref5, idx) {\n    var column1 = _ref5.column1,\n      column2 = _ref5.column2;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"tr\", {\n      id: \"text-row\",\n      className: \"w-full\",\n      key: idx\n    }, [column1, column2].map(function (column) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {\n        key: (0,uuid__WEBPACK_IMPORTED_MODULE_3__.v4)()\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Column, {\n        className: \"w-6 h-6\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Img, {\n        src: \"https://aws-glamo-upload-bucket.s3.eu-west-2.amazonaws.com/files/logos/icons8-duplicate-96.png\",\n        className: \"w-full h-full\"\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Column, {\n        className: \"pl-1 max-w-[100px]\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_4__.Text, {\n        className: \"text-left text-xs font-semibold !w-fit underline underline-offset-2 decoration-2 decoration-dark-gray\"\n      }, column.text)));\n    }));\n  }), ' ')))))))))))));\n}\n\n//# sourceURL=webpack://server/./React_Email/emails/orderSuccess.jsx?");

/***/ }),

/***/ "./React Email/emails/passwordreset.jsx":
/*!**********************************************!*\
  !*** ./React Email/emails/passwordreset.jsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/emailHead.jsx */ \"./React Email/components/emailHead.jsx\");\n/* harmony import */ var _components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/emailTailwind.jsx */ \"./React Email/components/emailTailwind.jsx\");\n/* harmony import */ var _components_header_jsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/header.jsx */ \"./React Email/components/header.jsx\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _components_thanks_jsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/thanks.jsx */ \"./React Email/components/thanks.jsx\");\n/* harmony import */ var _components_footer_jsx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/footer.jsx */ \"./React Email/components/footer.jsx\");\n\n\n\n\n\n\n\n\n\nvar CLOUDFRONT_URL = process.env.CLOUDFRONT_URL;\nfunction PasswordReset(_ref) {\n  var url = _ref.url;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Html, {\n    lang: \"en\",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Body, {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n    className: \"bg-light-grey w-[600px]\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Section, {\n    className: \"\",\n    align: \"center\",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_header_jsx__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \"p-5\",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, ' ', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n    align: \"center\",\n    className: \"pt-4 bg-transparent box-border\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Img, {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/lock.png\"),\n    className: \"bg-transparent w-7 h-7\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"font-semibold text-base tracking-wider pb-0 mb-1\",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, \"YOUR PASSWORD RESET LINK IS READY\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"p-0 m-0\",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, \"Just click the link to reset it - but be quick, it expires in 3 hours\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \"p-5 pt-0 \",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    className: \"bg-white box-border !w-full p-4 pt-0 !max-w-full\",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"font-semibold text-sm tracking-wide mb-2\",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, \"WANT TO MAKE YOUR NEW PASSWORD STRONG?\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Hr, {\n    className: \"m-0 p-0\",\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()\n  }, \"The advice right now is to make your password a combination of three memorable but random words. Obvs, your password has to be personal just to you. But, it\\u2019s best not to use anything to do with GLAMO, your family or something about you that can easily be found on social media. Pick something unique for your GLAMO account and don\\u2019t use it anywhere else!\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n    align: \"center\",\n    className: \"!align-middle !mx-auto pt-3 text-center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Button, {\n    key: (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)(),\n    href: url,\n    className: \"align-middle mx-auto bg-[#2d2d2d] text-xs tracking-wider text-white py-3 px-16 font-semibold text-center\"\n  }, \"RESET PASSWORD\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    className: \"p-5 w-full\",\n    key: uuid__WEBPACK_IMPORTED_MODULE_1__.v4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Column, {\n    className: \"p-4 pt-0 bg-white  !w-full !max-w-full\",\n    key: uuid__WEBPACK_IMPORTED_MODULE_1__.v4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    className: \"bg-white text-sm font-semibold box-border w-full mb-2\",\n    key: uuid__WEBPACK_IMPORTED_MODULE_1__.v4\n  }, \"ISSUE WITH THE LINK?\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Hr, {\n    className: \"m-0 p-0\",\n    key: uuid__WEBPACK_IMPORTED_MODULE_1__.v4\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n    key: uuid__WEBPACK_IMPORTED_MODULE_1__.v4\n  }, \"Simply copy and paste this link into your browser instead:\", ' ', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Link, {\n    href: url\n  }, url)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Row, {\n    key: uuid__WEBPACK_IMPORTED_MODULE_1__.v4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_thanks_jsx__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n    key: uuid__WEBPACK_IMPORTED_MODULE_1__.v4\n  })))))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PasswordReset);\n\n//# sourceURL=webpack://server/./React_Email/emails/passwordreset.jsx?");

/***/ }),

/***/ "./React Email/emails/returnOrder.jsx":
/*!********************************************!*\
  !*** ./React Email/emails/returnOrder.jsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"@babel/runtime/helpers/extends\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_react_email_components__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_totalContainer_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/totalContainer.jsx */ \"./React Email/components/totalContainer.jsx\");\n/* harmony import */ var _components_item_jsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/item.jsx */ \"./React Email/components/item.jsx\");\n/* harmony import */ var _components_thanks_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/thanks.jsx */ \"./React Email/components/thanks.jsx\");\n/* harmony import */ var _components_footer_jsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/footer.jsx */ \"./React Email/components/footer.jsx\");\n/* harmony import */ var _components_morequestions_jsx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/morequestions.jsx */ \"./React Email/components/morequestions.jsx\");\n/* harmony import */ var _components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/emailHead.jsx */ \"./React Email/components/emailHead.jsx\");\n/* harmony import */ var _components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/emailTailwind.jsx */ \"./React Email/components/emailTailwind.jsx\");\n/* harmony import */ var _components_header_jsx__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/header.jsx */ \"./React Email/components/header.jsx\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_12__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ReturnOrder(_ref) {\n  var _order$customer, _order$items;\n  var order = _ref.order;\n  var orderDate = dayjs__WEBPACK_IMPORTED_MODULE_12___default()(order === null || order === void 0 ? void 0 : order.createdAt).format('dddd DD MMMM YYYY');\n  var totalItems = order === null || order === void 0 ? void 0 : order.items.reduce(function (Accum, currentValue) {\n    return Accum + (currentValue === null || currentValue === void 0 ? void 0 : currentValue.quantity);\n  }, 0);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Html, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_emailHead_jsx__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_emailTailwind_jsx__WEBPACK_IMPORTED_MODULE_10__[\"default\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Body, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"!bg-light-grey w-full \",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_header_jsx__WEBPACK_IMPORTED_MODULE_11__[\"default\"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"text-center p-4 pb-0 w-full min-w-full\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Img, {\n    src: 'https://aws-glamo-upload-bucket.s3.eu-west-2.amazonaws.com/files/logos/return-box-icon.png',\n    className: \"w-8 h-8 mx-auto\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"!font-semibold text-lg p-0 py-2 m-0\"\n  }, \"REFUND SENT\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0 pb-1\"\n  }, \"Hi \", order === null || order === void 0 || (_order$customer = order.customer) === null || _order$customer === void 0 ? void 0 : _order$customer.firstName, \", we can confirm that we've received your returned item(s) and sent a refund.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0 h-fit leading-6\"\n  }, \"Order No.: \", order === null || order === void 0 ? void 0 : order._id), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0 leading-4\"\n  }, \"Order date: \", orderDate))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"p-5 w-full !max-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"p-4 py-6 bg-white w-full !max-w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"leading-4 !font-medium pb-4 m-0\"\n  }, \"The below item(s) will be refunded to your original payment method.*\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 m-0 !font-medium\"\n  }, \"For original payment with card or bank transfer, the refund should appear on your bank statement within 5-10 working days. Please note that refund times are dictated by the card issuers and are outside our control.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"p-0 py-2 m-0 !font-medium\"\n  }, \"Items returned after the 28-day returns window (and within 45 days) are refunded with an GLAMO returns voucher. This voucher has been added to your account and is ready for you to use. This 28-day window starts after your order is delivered.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"underline underline-offset-2 m-0  font-medium\"\n  }, \"Learn More - GLAMO Returns Policy.\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, {\n    className: \"px-5 pt-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    className: \"p-4 bg-white\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"bg-white\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    className: \"font-semibold tracking-wider text-base pt-0 mt-0\"\n  }, totalItems, \" \", totalItems == 1 ? 'ITEM' : 'ITEMS'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, {\n    className: \"p-0 m-0\"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, {\n    className: \"bg-white \",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"px-4 pb-0 bg-white\",\n    align: \"center\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Section, {\n    className: \"bg-white\"\n  }, order === null || order === void 0 || (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items.map(function (itemProps, idx) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_item_jsx__WEBPACK_IMPORTED_MODULE_5__[\"default\"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, itemProps, {\n      key: idx\n    }));\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Hr, {\n    className: \"bg-white box-border m-0 pb-2\"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"bg-white p-5 pt-0\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_totalContainer_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    order: order\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Column, {\n    className: \"w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_react_email_components__WEBPACK_IMPORTED_MODULE_3__.Container, {\n    className: \"w-full\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_thanks_jsx__WEBPACK_IMPORTED_MODULE_6__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_morequestions_jsx__WEBPACK_IMPORTED_MODULE_8__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_footer_jsx__WEBPACK_IMPORTED_MODULE_7__[\"default\"], null)))))))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ReturnOrder);\n\n//# sourceURL=webpack://server/./React_Email/emails/returnOrder.jsx?");

/***/ }),

/***/ "./React Email/test.js":
/*!*****************************!*\
  !*** ./React Email/test.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_order__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Models/order */ \"./Models/order.js\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _utils_nodemailer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/nodemailer */ \"./utils/nodemailer.js\");\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @react-email/render */ \"@react-email/render\");\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_react_email_render__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _emails_orderShipped_jsx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./emails/orderShipped.jsx */ \"./React Email/emails/orderShipped.jsx\");\n/* harmony import */ var _emails_passwordreset_jsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./emails/passwordreset.jsx */ \"./React Email/emails/passwordreset.jsx\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(dotenv_config_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _emails_orderCancelled_jsx__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./emails/orderCancelled.jsx */ \"./React Email/emails/orderCancelled.jsx\");\n/* harmony import */ var _emails_orderReceived_jsx__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./emails/orderReceived.jsx */ \"./React Email/emails/orderReceived.jsx\");\n/* harmony import */ var _emails_returnOrder_jsx__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./emails/returnOrder.jsx */ \"./React Email/emails/returnOrder.jsx\");\n/* harmony import */ var _emails_changePassword_jsx__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./emails/changePassword.jsx */ \"./React Email/emails/changePassword.jsx\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _emails_changeEmail_jsx__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./emails/changeEmail.jsx */ \"./React Email/emails/changeEmail.jsx\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_18__);\n\n\n\n\n\n\n\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_2___default().Router();\n\n\n\n\n\n\n\n\n\nvar _process$env = process.env,\n  SENDER = _process$env.SENDER,\n  STRIPE_KEY = _process$env.STRIPE_KEY;\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_17___default()(STRIPE_KEY);\nrouter.get('/:id', express_async_handler__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(req, res, next) {\n    var id, order, charge, emailHtml, emailTestId, mailOptions;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          id = req.params.id;\n          _context.next = 3;\n          return _Models_order__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(id, null, {\n            populate: [{\n              path: 'items.product'\n            }, {\n              path: 'customer'\n            }, {\n              path: 'itemsByProfile.items.product'\n            }],\n            lean: {\n              toObject: true\n            }\n          }).exec();\n        case 3:\n          order = _context.sent;\n          _context.next = 6;\n          return stripe.charges.retrieve(order.charge_id);\n        case 6:\n          charge = _context.sent;\n          console.log({\n            charge: charge\n          });\n          lodash__WEBPACK_IMPORTED_MODULE_18___default().set(order, 'refund.amount', charge.amount_refunded / 100);\n          emailHtml = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_6__.render)( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement(_emails_returnOrder_jsx__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n            order: order\n          })); // const emailHtml = render(<PasswordReset url={'google.com'} />);\n          // const emailHtml = render(<ChangeEmail firstName={'Kevin'} newEmail={process.env.TEST_EMAIL} />);\n          emailTestId = (0,uuid__WEBPACK_IMPORTED_MODULE_15__.v4)();\n          mailOptions = {\n            from: SENDER,\n            to: process.env.TEST_EMAIL,\n            subject: 'test email ' + emailTestId,\n            html: emailHtml\n          };\n          console.log({\n            emailTestId: emailTestId\n          });\n          // const sendEmail = await transporter.sendMail(mailOptions);\n          res.status(200).send(emailHtml);\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}()));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./React_Email/test.js?");

/***/ }),

/***/ "./Routes/adminRoute.js":
/*!******************************!*\
  !*** ./Routes/adminRoute.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/adminController.js */ \"./Controllers/adminController.js\");\n/* harmony import */ var _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Controllers/productController.js */ \"./Controllers/productController.js\");\n/* harmony import */ var _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Controllers/userController.js */ \"./Controllers/userController.js\");\n/* harmony import */ var _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Controllers/deliveryProfileController.js */ \"./Controllers/deliveryProfileController.js\");\n/* harmony import */ var _Controllers_orderController_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Controllers/orderController.js */ \"./Controllers/orderController.js\");\n/* harmony import */ var _Controllers_couponController_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Controllers/couponController.js */ \"./Controllers/couponController.js\");\n/* harmony import */ var _Controllers_categoryController_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Controllers/categoryController.js */ \"./Controllers/categoryController.js\");\n/* harmony import */ var _Controllers_settingController_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Controllers/settingController.js */ \"./Controllers/settingController.js\");\n/* harmony import */ var _stripeRoute_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./stripeRoute.js */ \"./Routes/stripeRoute.js\");\n\n\n\n\n\n\n\n\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nrouter.use('/stripe', _stripeRoute_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\nrouter.get('/user/search', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.searchUser);\nrouter.post('/user/status', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.updateUserStatus);\nrouter.get('/user/all', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.getAllUsers);\nrouter.post('/user/create', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_3__.create_user);\nrouter.post('/user/update/:id', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_3__.update_single);\nrouter.get('/user/:id', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_3__.get_single_user);\nrouter.get('/category/all', _Controllers_categoryController_js__WEBPACK_IMPORTED_MODULE_7__.get_all_category);\nrouter.get('/product/search', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.searchProducts);\nrouter.get('/product/wordSuggestion', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.ai_word_suggestion);\nrouter.get('/product/:id', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__.getProductsInfo);\nrouter.get('/product/:id/variation', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__.getVariations);\nrouter.get('/count', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.count_all);\nrouter.get('/order/:id', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.getSingleOrder);\nrouter.get('/orders', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__.getAllOrders);\nrouter.get('/coupon/all', _Controllers_couponController_js__WEBPACK_IMPORTED_MODULE_6__.get_all_coupons);\nrouter[\"delete\"]('/delete/user/:id', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_3__.delete_user);\nrouter[\"delete\"]('/delete/product/:ids', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__.delete_product);\nrouter.post('/delivery/create', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__.create_delivery_profile);\nrouter.get('/delivery/all', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__.get_all_delivery_profile);\nrouter.get('/delivery/paginate', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__.get_delivery_profile_pagination);\nrouter[\"delete\"]('/delete/delivery/:id', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__.delete_single_delivery_profile);\nrouter.get('/delivery/:id', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__.get_single_delivery_profile);\nrouter.post('/delivery/update', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__.update_delivery_profile);\nrouter.put('/delivery/update/:id', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_4__.update_single_delivery_profile);\nrouter[\"delete\"]('/delete/user/many/:id', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_3__.delete_many_user);\nrouter.post('/product/create', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__.create_new_product);\nrouter.get('/product', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__.get_all_products);\nrouter.put('/product/update/:id', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__.update_product);\nrouter.put('/order/:id/update', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.updateOrder);\nrouter.put('/order/:id/shipped', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.shipOrder);\nrouter.post('/order/:id/cancelled', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.cancelOrder);\nrouter.post('/order/mark_as_gift', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.mark_as_gift);\nrouter.post('/orders/all', _Controllers_orderController_js__WEBPACK_IMPORTED_MODULE_5__.getAdminOrders);\nrouter.post('/pdf/export', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.exportPdf);\nrouter.post('/pdf/url', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.generatePresignUrl);\nrouter.get('/pdf/test', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.testPdf);\nrouter.post('/searchOrder', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.searchOrder);\nrouter.post('/privateNote/add', _Controllers_orderController_js__WEBPACK_IMPORTED_MODULE_5__.addPrivateNote);\nrouter.post('/privateNote/edit', _Controllers_orderController_js__WEBPACK_IMPORTED_MODULE_5__.editPrivateNote);\nrouter[\"delete\"]('/privateNote/delete', _Controllers_orderController_js__WEBPACK_IMPORTED_MODULE_5__.deletePrivateNote);\nrouter.post('/products/all', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.getAllProducts);\nrouter.get('/productFiles/:id', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.getProductFiles);\nrouter.get('/product/featured/:id', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.updateProductFeature);\nrouter.post('/product/status/update', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.updateStatus);\nrouter.post('/product/title/update', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.editTitle);\nrouter.get(\"/setting\", _Controllers_settingController_js__WEBPACK_IMPORTED_MODULE_8__.get_setting);\nrouter.put('/setting/update', _Controllers_settingController_js__WEBPACK_IMPORTED_MODULE_8__.update_settings);\nrouter.post('/product/price/update', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_1__.editPrice);\nrouter.post('/product/delivery/update', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__.update_product_delivery_profile);\nrouter.put('/product/category/update', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_2__.update_product_category);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/adminRoute.js?");

/***/ }),

/***/ "./Routes/cartRoute.js":
/*!*****************************!*\
  !*** ./Routes/cartRoute.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_cartController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/cartController.js */ \"./Controllers/cartController.js\");\n/* harmony import */ var _Models_cart_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Models/cart.js */ \"./Models/cart.js\");\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nvar _generateModelSchemaR = (0,_Controllers_cartController_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_Models_cart_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"], 'cart'),\n  createDocument = _generateModelSchemaR.createDocument,\n  retrieveDocument = _generateModelSchemaR.retrieveDocument,\n  updateDocument = _generateModelSchemaR.updateDocument,\n  removeFromDocument = _generateModelSchemaR.removeFromDocument,\n  addToDocument = _generateModelSchemaR.addToDocument,\n  updateProperty = _generateModelSchemaR.updateProperty;\nrouter.post('/create', createDocument);\nrouter.put('/update/:id', updateDocument);\nrouter.get('/remove', removeFromDocument);\nrouter.post('/add', addToDocument);\nrouter.post('/updateProperty', updateProperty);\nrouter.get('/:id', retrieveDocument);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/cartRoute.js?");

/***/ }),

/***/ "./Routes/categoryRoute.js":
/*!*********************************!*\
  !*** ./Routes/categoryRoute.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_categoryController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/categoryController.js */ \"./Controllers/categoryController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\n\n// router.get('/', get_all_category);\nrouter.get('/:name', _Controllers_categoryController_js__WEBPACK_IMPORTED_MODULE_1__.get_singleCategory);\nrouter.get('/:name/:gender', _Controllers_categoryController_js__WEBPACK_IMPORTED_MODULE_1__.query_category_products_by_gender);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/categoryRoute.js?");

/***/ }),

/***/ "./Routes/couponRoute.js":
/*!*******************************!*\
  !*** ./Routes/couponRoute.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_couponController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/couponController.js */ \"./Controllers/couponController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nrouter.get('/', _Controllers_couponController_js__WEBPACK_IMPORTED_MODULE_1__.get_single_coupon);\nrouter[\"delete\"]('/delete/:id', _Controllers_couponController_js__WEBPACK_IMPORTED_MODULE_1__.delete_single_coupon);\n// router.get('/all', get_all_coupons);\n\nrouter.post('/create', _Controllers_couponController_js__WEBPACK_IMPORTED_MODULE_1__.create_coupon);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/couponRoute.js?");

/***/ }),

/***/ "./Routes/deliveryRoute.js":
/*!*********************************!*\
  !*** ./Routes/deliveryRoute.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/deliveryProfileController.js */ \"./Controllers/deliveryProfileController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nrouter.post('/many/', _Controllers_deliveryProfileController_js__WEBPACK_IMPORTED_MODULE_1__.get_many_delivery_profile);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/deliveryRoute.js?");

/***/ }),

/***/ "./Routes/giftCardRoute.js":
/*!*********************************!*\
  !*** ./Routes/giftCardRoute.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Controllers_giftCardController_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Controllers/giftCardController.js */ \"./Controllers/giftCardController.js\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_1___default().Router();\nrouter.get('/', _Controllers_giftCardController_js__WEBPACK_IMPORTED_MODULE_0__.get_single_giftCard);\nrouter.post('/create', _Controllers_giftCardController_js__WEBPACK_IMPORTED_MODULE_0__.create_giftCard);\nrouter.get('/all', _Controllers_giftCardController_js__WEBPACK_IMPORTED_MODULE_0__.get_all_giftCard);\nrouter[\"delete\"]('/delete/all', _Controllers_giftCardController_js__WEBPACK_IMPORTED_MODULE_0__.delete_all);\nrouter[\"delete\"]('/delete/:id', _Controllers_giftCardController_js__WEBPACK_IMPORTED_MODULE_0__.delete_single);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/giftCardRoute.js?");

/***/ }),

/***/ "./Routes/indexRoute.js":
/*!******************************!*\
  !*** ./Routes/indexRoute.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var urllib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! urllib */ \"urllib\");\n/* harmony import */ var urllib__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(urllib__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dotenv_config_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Controllers/adminController.js */ \"./Controllers/adminController.js\");\n/* harmony import */ var _middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../middleware/checkAuthenticated.js */ \"./middleware/checkAuthenticated.js\");\n/* harmony import */ var _Controllers_password_change_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Controllers/password-change.js */ \"./Controllers/password-change.js\");\n/* harmony import */ var _utils_searchIndex_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/searchIndex.js */ \"./utils/searchIndex.js\");\n/* harmony import */ var _cartRoute_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cartRoute.js */ \"./Routes/cartRoute.js\");\n/* harmony import */ var _wishlistRoute_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./wishlistRoute.js */ \"./Routes/wishlistRoute.js\");\n/* harmony import */ var express_status_monitor__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! express-status-monitor */ \"express-status-monitor\");\n/* harmony import */ var express_status_monitor__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(express_status_monitor__WEBPACK_IMPORTED_MODULE_10__);\n\n\n\n\n\n\n\n\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nrouter.use('/cart', _cartRoute_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]);\nrouter.use('/wishlist', _wishlistRoute_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\nrouter.get('/server-status', function (req, res) {\n  res.send('OK');\n});\nrouter.post('/admin/login', _Controllers_adminController_js__WEBPACK_IMPORTED_MODULE_4__.adminLogin);\nrouter.get('/admin/check', [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_5__.checkAdminAuthenticated, express_async_handler__WEBPACK_IMPORTED_MODULE_3___default()(function (req, res, next) {\n  res.send({\n    success: true\n  });\n})]);\nrouter.post('reset-password', _Controllers_password_change_js__WEBPACK_IMPORTED_MODULE_6__.resetPassword);\nrouter.post('forget-password', _Controllers_password_change_js__WEBPACK_IMPORTED_MODULE_6__.forgetPassword);\n\n// router.get(\n//   '/searchIndex',\n//   asyncHandler(async (req, res, next) => {\n//     const { GROUP_ID, CLUSTER_NAME, ATLAS_USER, ATLAS_USER_KEY } = process.env;\n//     const url = `https://cloud.mongodb.com/api/atlas/v2/groups/${GROUP_ID}/clusters/${CLUSTER_NAME}/fts/indexes?pretty=true`;\n\n//     const options = {\n//       digestAuth: `${ATLAS_USER}:${ATLAS_USER_KEY}`,\n//       data: { ...productSearchIndex },\n\n//       headers: {\n//         Accept: 'application/vnd.atlas.2023-02-01+json',\n//       },\n//     };\n\n//     const { data, res: response } = await urllib.request(url, options);\n\n//     res.status(200).send({ data: JSON.parse(data.toString('utf8')) });\n//   }),\n// );\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/indexRoute.js?");

/***/ }),

/***/ "./Routes/orderRoute.js":
/*!******************************!*\
  !*** ./Routes/orderRoute.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_orderController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/orderController.js */ \"./Controllers/orderController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\n\n// router.post('/create', create_order);\nrouter.post('/create-payment-intent', _Controllers_orderController_js__WEBPACK_IMPORTED_MODULE_1__.createPaymentIntent);\nrouter.get('/:id', _Controllers_orderController_js__WEBPACK_IMPORTED_MODULE_1__.getOrderDetails);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/orderRoute.js?");

/***/ }),

/***/ "./Routes/productRoute.js":
/*!********************************!*\
  !*** ./Routes/productRoute.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/productController.js */ \"./Controllers/productController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nrouter.get('/', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.get_all_products);\nrouter.get('/many/:id', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.get_many_product);\nrouter.get('/:id', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.get_single_product);\nrouter.get('/:id/visit', _Controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.increment_visit);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/productRoute.js?");

/***/ }),

/***/ "./Routes/searchRoute.js":
/*!*******************************!*\
  !*** ./Routes/searchRoute.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_searchController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/searchController.js */ \"./Controllers/searchController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nrouter.get('/', _Controllers_searchController_js__WEBPACK_IMPORTED_MODULE_1__.search_product);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/searchRoute.js?");

/***/ }),

/***/ "./Routes/stripeRoute.js":
/*!*******************************!*\
  !*** ./Routes/stripeRoute.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_stripeController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/stripeController.js */ \"./Controllers/stripeController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nrouter.post('/transactions', _Controllers_stripeController_js__WEBPACK_IMPORTED_MODULE_1__.stripeTransactions);\nrouter.post('/monthly-statement', _Controllers_stripeController_js__WEBPACK_IMPORTED_MODULE_1__.monthlyStatement);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/stripeRoute.js?");

/***/ }),

/***/ "./Routes/userRoute.js":
/*!*****************************!*\
  !*** ./Routes/userRoute.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Controllers/userController.js */ \"./Controllers/userController.js\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! passport */ \"passport\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(passport__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Controllers_authController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Controllers/authController */ \"./Controllers/authController.js\");\n\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_2___default().Router();\nrouter.use('/', _Controllers_authController__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\nrouter.get('/dummy', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.dummy_data);\nrouter.post('/create', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.create_user);\nrouter.post('/login', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.loginUser);\nrouter.get('/logout', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.userLogout);\nrouter.post('/signup', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.signUp_user);\nrouter.get('/check', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.checkUser);\nrouter.get('/userData', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.getAllUserData);\nrouter.post('/address/add', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.addUserAddress);\nrouter.put('/address/edit/:id', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.editAddress);\nrouter[\"delete\"]('/address/delete/:id', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.deleteAddress);\nrouter.put('/address/changeDefault', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.updateDefaultAddress);\nrouter.put('/changedetails', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.changeDetails);\nrouter.put('/changepreferences', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.updatePreferences);\nrouter.get('/payment-method/card/save', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.saveCustomerCard);\nrouter.get('/payment-method/paypal', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.setUpPaypal);\nrouter.get('/payment-method/klarna', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.setUpKlarna);\nrouter.post('/payment-method/add', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.addPaymentMethod);\nrouter.post('/payment-method/changedefault/:id', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.changeDefaultMethod);\nrouter[\"delete\"]('/payment-method/delete/:id', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.deletePaymentMethod);\nrouter.get('/payment-method/all', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.getPaymentMethods);\nrouter.get('/orders', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.getOrders);\nrouter.post('/change-password', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.changePassword);\nrouter.post('/cancel-order', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.cancelOrder);\nrouter.post('/payment-method/digital', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.addDigitalPaymentMethod);\nrouter.get('/wishlist', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.getWishlist);\nrouter.post('/wishlist/update', _Controllers_userController_js__WEBPACK_IMPORTED_MODULE_0__.updateWishlist);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/userRoute.js?");

/***/ }),

/***/ "./Routes/webhookRoute.js":
/*!********************************!*\
  !*** ./Routes/webhookRoute.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Controllers_WebHooks_stripeWebhooks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Controllers/WebHooks/stripeWebhooks.js */ \"./Controllers/WebHooks/stripeWebhooks.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nrouter.post('/', _Controllers_WebHooks_stripeWebhooks_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/webhookRoute.js?");

/***/ }),

/***/ "./Routes/wishlistRoute.js":
/*!*********************************!*\
  !*** ./Routes/wishlistRoute.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Models_wishlist_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Models/wishlist.js */ \"./Models/wishlist.js\");\n/* harmony import */ var _Controllers_cartController_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Controllers/cartController.js */ \"./Controllers/cartController.js\");\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0___default().Router();\nvar _generateModelSchemaR = (0,_Controllers_cartController_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_Models_wishlist_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"], 'wishlist'),\n  createDocument = _generateModelSchemaR.createDocument,\n  retrieveDocument = _generateModelSchemaR.retrieveDocument,\n  updateDocument = _generateModelSchemaR.updateDocument,\n  removeFromDocument = _generateModelSchemaR.removeFromDocument,\n  addToDocument = _generateModelSchemaR.addToDocument,\n  updateProperty = _generateModelSchemaR.updateProperty;\nrouter.post('/create', createDocument);\nrouter.put('/update/:id', updateDocument);\nrouter.get('/remove', removeFromDocument);\nrouter.post('/add', addToDocument);\nrouter.post('/updateProperty', updateProperty);\nrouter.get('/:id', retrieveDocument);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://server/./Routes/wishlistRoute.js?");

/***/ }),

/***/ "./Upload/fileFilter.js":
/*!******************************!*\
  !*** ./Upload/fileFilter.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_0__);\n\nvar fileFilter = function fileFilter(req, file, cb) {\n  if (file.mimetype.split('/')[0] === 'image') {\n    cb(null, true);\n  } else {\n    cb(new (multer__WEBPACK_IMPORTED_MODULE_0___default().MulterError)('LIMIT_UNEXPECTED_FILE'), false);\n  }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fileFilter);\n\n//# sourceURL=webpack://server/./Upload/fileFilter.js?");

/***/ }),

/***/ "./Upload/sharpify.js":
/*!****************************!*\
  !*** ./Upload/sharpify.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar sharpify = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(file, type) {\n    var obj, image, meta, compressImage, _compressImage;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          obj = {\n            format: 'png',\n            type: file.mimetype,\n            originalname: file.originalname\n          };\n          image = sharp__WEBPACK_IMPORTED_MODULE_3___default()(file.buffer); // file size is bigger than 125 kb\n          if (!(file.size / 1024 > 125)) {\n            _context.next = 12;\n            break;\n          }\n          _context.next = 5;\n          return image.metadata();\n        case 5:\n          meta = _context.sent;\n          compressImage = image.png({\n            quality: 90,\n            force: true\n          });\n          _context.next = 9;\n          return compressImage.toBuffer();\n        case 9:\n          obj.buffer = _context.sent;\n          _context.next = 20;\n          break;\n        case 12:\n          if (!(file.mimetype !== 'image/png')) {\n            _context.next = 19;\n            break;\n          }\n          _compressImage = image.png({\n            quality: 100,\n            force: true\n          });\n          _context.next = 16;\n          return _compressImage.toBuffer();\n        case 16:\n          obj.buffer = _context.sent;\n          _context.next = 20;\n          break;\n        case 19:\n          obj.buffer = file.buffer;\n        case 20:\n          return _context.abrupt(\"return\", obj);\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function sharpify(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (sharpify);\n\n//# sourceURL=webpack://server/./Upload/sharpify.js?");

/***/ }),

/***/ "./app.js":
/*!****************!*\
  !*** ./app.js ***!
  \****************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   myCache: () => (/* binding */ myCache)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express_session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express-session */ \"express-session\");\n/* harmony import */ var express_session__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express_session__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var connect_mongo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! connect-mongo */ \"connect-mongo\");\n/* harmony import */ var connect_mongo__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(connect_mongo__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var morgan__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! morgan */ \"morgan\");\n/* harmony import */ var morgan__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(morgan__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _Routes_productRoute_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Routes/productRoute.js */ \"./Routes/productRoute.js\");\n/* harmony import */ var _Routes_categoryRoute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Routes/categoryRoute.js */ \"./Routes/categoryRoute.js\");\n/* harmony import */ var _Routes_couponRoute_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Routes/couponRoute.js */ \"./Routes/couponRoute.js\");\n/* harmony import */ var _Routes_searchRoute_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Routes/searchRoute.js */ \"./Routes/searchRoute.js\");\n/* harmony import */ var _Routes_giftCardRoute_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Routes/giftCardRoute.js */ \"./Routes/giftCardRoute.js\");\n/* harmony import */ var _Routes_webhookRoute_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Routes/webhookRoute.js */ \"./Routes/webhookRoute.js\");\n/* harmony import */ var _Routes_userRoute_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Routes/userRoute.js */ \"./Routes/userRoute.js\");\n/* harmony import */ var _React_Email_test_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./React Email/test.js */ \"./React Email/test.js\");\n/* harmony import */ var _Routes_adminRoute_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Routes/adminRoute.js */ \"./Routes/adminRoute.js\");\n/* harmony import */ var _Routes_orderRoute_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Routes/orderRoute.js */ \"./Routes/orderRoute.js\");\n/* harmony import */ var _Routes_deliveryRoute_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./Routes/deliveryRoute.js */ \"./Routes/deliveryRoute.js\");\n/* harmony import */ var _errorHandler_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./errorHandler.js */ \"./errorHandler.js\");\n/* harmony import */ var _utils_passport_passport_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./utils/passport/passport.js */ \"./utils/passport/passport.js\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var _Routes_indexRoute_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./Routes/indexRoute.js */ \"./Routes/indexRoute.js\");\n/* harmony import */ var node_cache__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! node-cache */ \"node-cache\");\n/* harmony import */ var node_cache__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(node_cache__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var _middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./middleware/checkAuthenticated.js */ \"./middleware/checkAuthenticated.js\");\n/* harmony import */ var express_status_monitor__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! express-status-monitor */ \"express-status-monitor\");\n/* harmony import */ var express_status_monitor__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(express_status_monitor__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./utils/logger.js */ \"./utils/logger.js\");\n\n\n/* eslint-disable no-console */\n/* eslint-disable import/no-extraneous-dependencies */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar _process$env = process.env,\n  DBNAME = _process$env.DBNAME,\n  URL = _process$env.URL,\n  SECRET = _process$env.SECRET,\n  PASSWORD_RESET_JWT_SECRET = _process$env.PASSWORD_RESET_JWT_SECRET,\n  CLIENT_URL = _process$env.CLIENT_URL,\n  SENDER = _process$env.SENDER,\n  SALT_ROUNDS = _process$env.SALT_ROUNDS;\nvar PORT = 3000;\nvar db = function db() {\n  mongoose__WEBPACK_IMPORTED_MODULE_7___default().connect(URL, {\n    dbName: DBNAME\n  }).then( /*#__PURE__*/_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee() {\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          // connection.sessions.drop();\n          console.log('successfully database Connection');\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  })))[\"catch\"](function (error) {\n    console.log(\"error: \".concat(error));\n  });\n};\ndb();\nvar app = express__WEBPACK_IMPORTED_MODULE_2___default()();\napp.use(morgan__WEBPACK_IMPORTED_MODULE_5___default()('dev'));\nvar myCache = new (node_cache__WEBPACK_IMPORTED_MODULE_25___default())();\n// app.use(cors());\napp.set('trust proxy', true);\napp.use(cors__WEBPACK_IMPORTED_MODULE_6___default()({\n  origin: true,\n  credentials: true\n}));\napp.use(express_session__WEBPACK_IMPORTED_MODULE_3___default()({\n  secret: SECRET,\n  resave: false,\n  saveUninitialized: true,\n  store: connect_mongo__WEBPACK_IMPORTED_MODULE_4___default().create({\n    mongoUrl: URL,\n    dbName: DBNAME,\n    collectionName: 'sessions'\n  }),\n  cookie: {\n    maxAge: 1000 * 60 * 60 * 24,\n    secure: false,\n    httpOnly: false\n  } // 1 day\n}));\napp.use(_utils_passport_passport_js__WEBPACK_IMPORTED_MODULE_21__[\"default\"].initialize());\napp.use(_utils_passport_passport_js__WEBPACK_IMPORTED_MODULE_21__[\"default\"].session());\napp.use(express__WEBPACK_IMPORTED_MODULE_2___default().json());\napp.use(express__WEBPACK_IMPORTED_MODULE_2___default().urlencoded({\n  extended: true\n}));\napp.use(express_status_monitor__WEBPACK_IMPORTED_MODULE_27___default()({\n  path: '/api/status',\n  title: 'Backend Server '\n}));\napp.use('/api', _Routes_indexRoute_js__WEBPACK_IMPORTED_MODULE_24__[\"default\"]);\napp.use('/api/product', _Routes_productRoute_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\napp.use('/api/coupon', _Routes_couponRoute_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"]);\napp.use('/api/category', _Routes_categoryRoute_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"]);\napp.use('/api/search', _Routes_searchRoute_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"]);\napp.use('/api/giftcard', _Routes_giftCardRoute_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"]);\napp.use('/api/user', _Routes_userRoute_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]);\napp.use('/api/admin', [_middleware_checkAuthenticated_js__WEBPACK_IMPORTED_MODULE_26__.checkAdminAuthenticated, _Routes_adminRoute_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"]]);\napp.use('/api/order', _Routes_orderRoute_js__WEBPACK_IMPORTED_MODULE_18__[\"default\"]);\napp.use('/api/delivery', _Routes_deliveryRoute_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"]);\napp.use('/api/webhook', _Routes_webhookRoute_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"]);\n\n// test email\napp.use('/api/test', _React_Email_test_js__WEBPACK_IMPORTED_MODULE_16__[\"default\"]);\napp.use(_errorHandler_js__WEBPACK_IMPORTED_MODULE_20__[\"default\"]);\nvar httpOptions = {\n  key: fs__WEBPACK_IMPORTED_MODULE_23___default().readFileSync('./mkcert/key.pem'),\n  cert: fs__WEBPACK_IMPORTED_MODULE_23___default().readFileSync('./mkcert/cert.pem'),\n  requestCert: false,\n  rejectUnauthorized: \"development\" === 'production'\n};\nconsole.log({\n  NODE_ENV: \"development\",\n  bool: \"development\" === 'production'\n});\nvar sslServer = https__WEBPACK_IMPORTED_MODULE_22___default().createServer(httpOptions, app);\nsslServer.listen(PORT, function () {\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_28__[\"default\"].info(\"Secure server\\uD83D\\uDD11 listening on Port: \".concat(PORT));\n  // logger.error(`Secure server🔑 listening on Port: ${PORT}`);\n});\n\n//# sourceURL=webpack://server/./app.js?");

/***/ }),

/***/ "./errorHandler.js":
/*!*************************!*\
  !*** ./errorHandler.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ errorHandler)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"@babel/runtime/helpers/typeof\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_s3Service_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/s3Service.js */ \"./utils/s3Service.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/logger.js */ \"./utils/logger.js\");\n\n\n\n\n\nvar customValidationError = function customValidationError(error) {\n  var values = Object.values(error.errors).map(function (err) {\n    return err.message;\n  });\n  // return Object.values(error).map(err => err.message)\n  console.log(values);\n  return values;\n};\nfunction errorHandler(_x, _x2, _x3, _x4) {\n  return _errorHandler.apply(this, arguments);\n}\nfunction _errorHandler() {\n  _errorHandler = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(error, req, res, next) {\n    var key;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          error.statusCode = error.statusCode || 500;\n          error.status = error.status || 'error';\n          console.log(error);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].error(error, error.message);\n          if (!(error.name === 'CastError' && error.kind === 'ObjectId')) {\n            _context.next = 6;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(400).json({\n            success: false,\n            msg: 'Invalid Id format'\n          }));\n        case 6:\n          if (error.name === 'MongoServerError' && error.code == 11000) {\n            key = Object.values(error.keyValue);\n            error.message = \"\".concat(key[0], \" already exists. Please try A different \").concat(Object.keys(error.keyValue)[0], \".\");\n          }\n          if (error.name === 'ValidationError') {\n            error.message = customValidationError(error);\n          }\n          if (error.name == 'MulterError') {\n            error.message = 'Error occurs while adding or deleting images. Please contact Administrator for asssistance.';\n          }\n          if ((error === null || error === void 0 ? void 0 : error.code) == 'payment_method_provider_decline') {\n            error.message = 'A refund has already been processed for this transaction.';\n          }\n          res.status(500).json({\n            // if js an array is ann object\n            msg: _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(error.message) === 'object' ? error.message : [error.message],\n            success: false\n          });\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _errorHandler.apply(this, arguments);\n}\n\n//# sourceURL=webpack://server/./errorHandler.js?");

/***/ }),

/***/ "./middleware/checkAuthenticated.js":
/*!******************************************!*\
  !*** ./middleware/checkAuthenticated.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkAdminAuthenticated: () => (/* binding */ checkAdminAuthenticated),\n/* harmony export */   checkAuthenticated: () => (/* binding */ checkAuthenticated)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Models/user */ \"./Models/user.js\");\n\n\n\n\nvar checkAuthenticated = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()(function (req, res, next) {\n  if (req.isAuthenticated()) {\n    return next();\n  }\n  // req.session.destroy();\n  return res.status(401).clearCookie('connect.sid').send({\n    msg: 'User is not Authenticated'\n  });\n});\nvar checkAdminAuthenticated = express_async_handler__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(req, res, next) {\n    var _id, findUser;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          console.log({\n            adminAuth: req.isAuthenticated()\n          });\n          if (!req.isAuthenticated()) {\n            _context.next = 8;\n            break;\n          }\n          _id = req.user._id;\n          _context.next = 5;\n          return _Models_user__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(_id, {\n            adminAccess: 1\n          }, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 5:\n          findUser = _context.sent;\n          if (!(findUser !== null && findUser !== void 0 && findUser.adminAccess)) {\n            _context.next = 8;\n            break;\n          }\n          return _context.abrupt(\"return\", next());\n        case 8:\n          return _context.abrupt(\"return\", res.status(401).clearCookie('connect.sid').send({\n            msg: 'User is not Authenticated'\n          }));\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n//# sourceURL=webpack://server/./middleware/checkAuthenticated.js?");

/***/ }),

/***/ "./pdf/footer.jsx":
/*!************************!*\
  !*** ./pdf/footer.jsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-pdf/renderer */ \"@react-pdf/renderer\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_coupon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Models/coupon */ \"./Models/coupon.js\");\n\n\n\n\nvar CLOUDFRONT_URL = process.env.CLOUDFRONT_URL;\nfunction Footer(_ref) {\n  var _checks$coupon, _checks$coupon2, _checks$coupon3, _checks$coupon4;\n  var checks = _ref.checks;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    style: {\n      display: 'flex',\n      flexDirection: 'col',\n      flexWrap: 'nowrap',\n      // alignContent: 'center',\n\n      position: 'absolute',\n      marginTop: '10pt',\n      bottom: 0,\n      left: 0,\n      right: 0\n    }\n  }, (checks === null || checks === void 0 ? void 0 : checks.coupon) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    id: \"top\",\n    style: {\n      paddingVertical: '12pt',\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      height: '100%',\n      borderTop: '1pt solid black'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'nowrap',\n      height: '100%',\n      alignItems: 'baseline',\n      gap: '10pt'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    style: {\n      position: 'relative',\n      width: '120pt',\n      height: '41pt',\n      // maxWidth: '120pt',\n      // maxHeight: '40pt',\n      borderTop: '1pt solid black'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.Image, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/zigzagbox.png\"),\n    style: {\n      objectFit: 'cover',\n      width: '100%',\n      height: '100%',\n      position: 'relative'\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    style: {\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      zIndex: '2',\n      width: '120pt',\n      height: '41pt',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    style: {\n      fontSize: '12pt',\n      fontWeight: 'semibold'\n    }\n  }, \"\".concat(((_checks$coupon = checks.coupon) === null || _checks$coupon === void 0 ? void 0 : _checks$coupon.type) == 'fixed' ? '£' : '').concat((_checks$coupon2 = checks.coupon) === null || _checks$coupon2 === void 0 ? void 0 : _checks$coupon2.amount).concat(((_checks$coupon3 = checks.coupon) === null || _checks$coupon3 === void 0 ? void 0 : _checks$coupon3.type) != 'fixed' ? '%' : '', \" OFF\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    style: {\n      alignSelf: 'baseline',\n      paddingBottom: '5pt'\n    }\n  }, \"Enter this coupon code at checkout: \", (_checks$coupon4 = checks.coupon) === null || _checks$coupon4 === void 0 ? void 0 : _checks$coupon4.code))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    id: \"bottom\",\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'nowrap',\n      height: '60pt',\n      alignContent: 'center',\n      borderTop: '1pt solid black',\n      paddingTop: '12pt',\n      marginBottom: '12pt'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    id: \"left\",\n    style: {\n      height: '100%'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.Image, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/glamo-black-logo.png\"),\n    style: {\n      // maxWidth: '60pt',\n      // maxHeight: '50pt',\n      width: '60pt',\n      height: '100%',\n      objectFit: 'cover'\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    id: \"middle\",\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'nowrap',\n      gap: '16pt',\n      paddingLeft: '60pt'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.Image, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/paper-plane.png\"),\n    style: {\n      width: '35pt',\n      height: '35pt'\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.View, {\n    style: {\n      maxWidth: '200pt',\n      fontSize: '8pt'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Do the green thing\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_1__.Text, null, \"Reuse this paper to make origami, confetti or your next to-do list.\")))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Footer);\n\n//# sourceURL=webpack://server/./pdf/footer.jsx?");

/***/ }),

/***/ "./pdf/generateAddress.jsx":
/*!*********************************!*\
  !*** ./pdf/generateAddress.jsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var country_code_lookup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! country-code-lookup */ \"country-code-lookup\");\n/* harmony import */ var country_code_lookup__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(country_code_lookup__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-pdf/renderer */ \"@react-pdf/renderer\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nfunction GenerateAddress(_ref) {\n  var _countryLookup$byIso;\n  var name = _ref.name,\n    address = _ref.address;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2__.Text, null, name, \" \"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2__.Text, null, address === null || address === void 0 ? void 0 : address.line1), (address === null || address === void 0 ? void 0 : address.line2) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2__.Text, null, address === null || address === void 0 ? void 0 : address.line2), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2__.Text, null, \"\".concat(address === null || address === void 0 ? void 0 : address.city, \", \").concat(address === null || address === void 0 ? void 0 : address.postal_code)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_2__.Text, null, (_countryLookup$byIso = country_code_lookup__WEBPACK_IMPORTED_MODULE_1___default().byIso(address === null || address === void 0 ? void 0 : address.country)) === null || _countryLookup$byIso === void 0 ? void 0 : _countryLookup$byIso.country));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GenerateAddress);\n\n//# sourceURL=webpack://server/./pdf/generateAddress.jsx?");

/***/ }),

/***/ "./pdf/orderInformation.jsx":
/*!**********************************!*\
  !*** ./pdf/orderInformation.jsx ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _generateAddress_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./generateAddress.jsx */ \"./pdf/generateAddress.jsx\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-pdf/renderer */ \"@react-pdf/renderer\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nfunction OrderInformation(_ref) {\n  var _order$shipping_addre, _order$shipping_addre2, _order$customer, _order$customer2, _checks$note, _order$items, _order$items2, _order$items3, _order$transaction_co, _order$transaction_co2;\n  var order = _ref.order,\n    feature = _ref.feature,\n    checks = _ref.checks;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n      name: 'Kevin Jean',\n      address: {\n        line1: 'Flat 8',\n        line2: '848 Queens Road',\n        city: 'KINGSTON UPON THAMES',\n        country: 'GB',\n        postal_code: 'KT65 9XD'\n      }\n    }),\n    _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState, 2),\n    fromAddress = _useState2[0],\n    setFromAddress = _useState2[1];\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    id: \"order-information\",\n    style: {\n      marginTop: '40pt',\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'nowrap',\n      gap: '20pt',\n      width: '100%',\n      boxSizing: 'border-box'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    id: \"left\",\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '12px',\n      flex: '1.2 1 0%'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Deliver to\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_generateAddress_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n    name: (_order$shipping_addre = order.shipping_address) === null || _order$shipping_addre === void 0 ? void 0 : _order$shipping_addre.name,\n    address: (_order$shipping_addre2 = order.shipping_address) === null || _order$shipping_addre2 === void 0 ? void 0 : _order$shipping_addre2.address\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    id: \"dispatch\",\n    style: {\n      paddingBottom: '12pt',\n      borderBottom: '1pt',\n      borderBottomColor: 'black'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    className: 'whitespace-nowrap',\n    style: {\n      fontWeight: 'semibold',\n      whiteSpace: 'nowrap'\n    }\n  }, \"Scheduled to dispatch by\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, dayjs__WEBPACK_IMPORTED_MODULE_3___default()(lodash__WEBPACK_IMPORTED_MODULE_4___default().get(order, 'shipped.delivery_date')).format('DD MMM, YYYY'))), (checks === null || checks === void 0 ? void 0 : checks.dispatch_from) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    id: \"from-address\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"From\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_generateAddress_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n    name: fromAddress.name,\n    address: fromAddress.address\n  })), (feature === null || feature === void 0 ? void 0 : feature.orderNumber) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Order\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"#\", order === null || order === void 0 ? void 0 : order._id)), (feature === null || feature === void 0 ? void 0 : feature.shop) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    className: \" text-xs font-semibold \",\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Shop\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    className: \"font-normal \"\n  }, \"glamo\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Order date\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    className: \"font-normal \"\n  }, dayjs__WEBPACK_IMPORTED_MODULE_3___default()(order === null || order === void 0 ? void 0 : order.createdAt).format('DD MMM, YYYY'))), (feature === null || feature === void 0 ? void 0 : feature.buyer) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Buyer\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, order === null || order === void 0 || (_order$customer = order.customer) === null || _order$customer === void 0 ? void 0 : _order$customer.fullName), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"(\".concat((_order$customer2 = order.customer) === null || _order$customer2 === void 0 ? void 0 : _order$customer2._id, \")\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Payment method\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"Paid via \", (order === null || order === void 0 ? void 0 : order.payment_type) || (order === null || order === void 0 ? void 0 : order.paymentType))), (order === null || order === void 0 ? void 0 : order.status) == 'shipped' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Tracking\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, (order === null || order === void 0 ? void 0 : order.trackingNumber) || 'no-tracking'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"via \", order === null || order === void 0 ? void 0 : order.courier))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    id: \"right\",\n    style: {\n      flex: '4',\n      // padding: '10pt',\n      display: 'flex',\n      flexDirection: 'column'\n    }\n  }, !lodash__WEBPACK_IMPORTED_MODULE_4___default().isEmpty((_checks$note = checks.note) === null || _checks$note === void 0 ? void 0 : _checks$note.text) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    style: {\n      marginBottom: '8pt'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"A note from the shop\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      width: '100%',\n      whiteSpace: 'normal'\n    }\n  }, \"\".concat(checks.note.text))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold',\n      borderBottom: '1pt solid black',\n      paddingBottom: '8pt'\n    }\n  }, \"\".concat(order === null || order === void 0 || (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items.length, \" \").concat((order === null || order === void 0 || (_order$items2 = order.items) === null || _order$items2 === void 0 ? void 0 : _order$items2.length) > 1 ? 'items' : 'item')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    style: {\n      width: '100%'\n    }\n  }, order.items.map(function (item) {\n    var _item$product, _item$product2, _item$variation, _item$variation2, _item$variation3, _item$variation4, _item$variation5, _item$variation6, _item$price;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'nowrap',\n        borderBottom: '1pt solid black',\n        paddingVertical: '16pt',\n        width: '100%',\n        boxSizing: 'border-box'\n      }\n    }, (checks === null || checks === void 0 ? void 0 : checks.listing_photos) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n      style: {\n        height: '40pt',\n        width: '40pt',\n        boxSizing: 'border-box',\n        marginRight: '27pt'\n        // marginRight: '16pt'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Image, {\n      src: (_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product.images[0],\n      style: {\n        height: '40pt',\n        width: '40pt',\n        objectFit: 'cover',\n        objectPosition: 'center'\n      }\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n      style: {\n        paddingRight: '60pt',\n        verticalAlign: 'top',\n        boxSizing: 'border-box'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n      style: {\n        fontWeight: 'semibold',\n        width: '80%'\n      }\n    }, (_item$product2 = item.product) === null || _item$product2 === void 0 ? void 0 : _item$product2.title), (item === null || item === void 0 || (_item$variation = item.variation1) === null || _item$variation === void 0 ? void 0 : _item$variation.variation) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"\".concat(item === null || item === void 0 || (_item$variation2 = item.variation1) === null || _item$variation2 === void 0 ? void 0 : _item$variation2.title, \" : \").concat(item === null || item === void 0 || (_item$variation3 = item.variation1) === null || _item$variation3 === void 0 ? void 0 : _item$variation3.variation)), (item === null || item === void 0 || (_item$variation4 = item.variation2) === null || _item$variation4 === void 0 ? void 0 : _item$variation4.variation) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"\".concat(item === null || item === void 0 || (_item$variation5 = item.variation2) === null || _item$variation5 === void 0 ? void 0 : _item$variation5.title, \" : \").concat(item === null || item === void 0 || (_item$variation6 = item.variation2) === null || _item$variation6 === void 0 ? void 0 : _item$variation6.variation))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n      style: {\n        textAlign: 'right',\n        width: '100%'\n      }\n    }, \"\".concat(item === null || item === void 0 ? void 0 : item.quantity, \" x \\xA3\").concat(item === null || item === void 0 || (_item$price = item.price) === null || _item$price === void 0 ? void 0 : _item$price.toFixed(2))));\n  })), (checks === null || checks === void 0 ? void 0 : checks.cost_breakdown) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    id: \"footer\",\n    className: \"\",\n    style: {\n      marginVertical: '16pt',\n      width: '50%',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '4pt',\n      alignSelf: 'flex-end'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      flexWrap: 'nowrap',\n      alignItems: 'flex-start',\n      flexDirection: 'row'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text\n  // className=\"flex w-full justify-between\"\n  // style={{\n  //     display: 'flex',\n  //     justifyContent: 'space-between',\n  //     flexWrap: 'nowrap',\n  // }}\n  , null, \"item total\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      textAlign: 'right'\n    }\n  }, \"\\xA3\", (_order$items3 = order.items) === null || _order$items3 === void 0 || (_order$items3 = _order$items3.reduce(function (total, currentItem) {\n    return total += currentItem === null || currentItem === void 0 ? void 0 : currentItem.price;\n  }, 0)) === null || _order$items3 === void 0 ? void 0 : _order$items3.toFixed(2))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      flexWrap: 'nowrap',\n      alignItems: 'flex-start',\n      flexDirection: 'row'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"Subtotal\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      textAlign: 'right'\n    }\n  }, \"\\xA3\", (_order$transaction_co = order.transaction_cost) === null || _order$transaction_co === void 0 || (_order$transaction_co = _order$transaction_co.subtotal) === null || _order$transaction_co === void 0 ? void 0 : _order$transaction_co.toFixed(2))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      flexWrap: 'nowrap',\n      alignItems: 'flex-start',\n      flexDirection: 'row'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"Delivery total\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"\\xA3\", parseFloat(lodash__WEBPACK_IMPORTED_MODULE_4___default().get(order, 'transaction_cost.delivery_cost') || 0).toFixed(2))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      flexWrap: 'nowrap',\n      alignItems: 'flex-start',\n      flexDirection: 'row',\n      fontWeight: 'semibold'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"Order total\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, \"\\xA3\", (_order$transaction_co2 = order.transaction_cost) === null || _order$transaction_co2 === void 0 || (_order$transaction_co2 = _order$transaction_co2.total) === null || _order$transaction_co2 === void 0 ? void 0 : _order$transaction_co2.toFixed(2)))), (checks === null || checks === void 0 ? void 0 : checks.note_from_buyer) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.View, {\n    style: {}\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, {\n    style: {\n      fontWeight: 'semibold'\n    }\n  }, \"Note from buyer\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_5__.Text, null, checks === null || checks === void 0 ? void 0 : checks.note_from_buyer))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrderInformation);\n\n//# sourceURL=webpack://server/./pdf/orderInformation.jsx?");

/***/ }),

/***/ "./pdf/orderReceipt.jsx":
/*!******************************!*\
  !*** ./pdf/orderReceipt.jsx ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _footer_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./footer.jsx */ \"./pdf/footer.jsx\");\n/* harmony import */ var _orderInformation_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./orderInformation.jsx */ \"./pdf/orderInformation.jsx\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-pdf/renderer */ \"@react-pdf/renderer\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar CLOUDFRONT_URL = process.env.CLOUDFRONT_URL;\nfunction OrderReceipt(_ref) {\n  var _order$customer, _order$customer2, _order$customer3;\n  var order = _ref.order,\n    checks = _ref.checks;\n  var featureObj = {\n    fromAddress: false,\n    orderNumber: false,\n    shop: true,\n    buyer: false\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.View, {\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, (checks === null || checks === void 0 ? void 0 : checks.shop_info) == 'order_receipt_banner' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.View, {\n    style: {\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      flexDirection: 'row'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.Image, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/glamo-black-logo.png\"),\n    style: {\n      height: '100pt',\n      width: '200pt',\n      objectFit: 'cover'\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    style: {\n      fontSize: '14pt',\n      fontWeight: 'semibold'\n    }\n  }, \"Order #\", order === null || order === void 0 ? void 0 : order._id), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.Text, null, \"\".concat(order === null || order === void 0 || (_order$customer = order.customer) === null || _order$customer === void 0 ? void 0 : _order$customer.firstName, \" \").concat(order === null || order === void 0 || (_order$customer2 = order.customer) === null || _order$customer2 === void 0 ? void 0 : _order$customer2.lastName, \" \"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    style: {\n      fontSize: '8pt'\n    }\n  }, \"(\".concat(order === null || order === void 0 || (_order$customer3 = order.customer) === null || _order$customer3 === void 0 ? void 0 : _order$customer3._id, \")\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_orderInformation_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n    order: order,\n    feature: featureObj,\n    checks: checks\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_footer_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], null));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrderReceipt);\n\n//# sourceURL=webpack://server/./pdf/orderReceipt.jsx?");

/***/ }),

/***/ "./pdf/packingSlip.jsx":
/*!*****************************!*\
  !*** ./pdf/packingSlip.jsx ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _footer_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./footer.jsx */ \"./pdf/footer.jsx\");\n/* harmony import */ var _orderInformation_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./orderInformation.jsx */ \"./pdf/orderInformation.jsx\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-pdf/renderer */ \"@react-pdf/renderer\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nvar _process$env = process.env,\n  WEBSITE_URL = _process$env.WEBSITE_URL,\n  CLOUDFRONT_URL = _process$env.CLOUDFRONT_URL;\nfunction PackingSlip(_ref) {\n  var order = _ref.order,\n    checks = _ref.checks;\n  var featureObj = {\n    orderNumber: true,\n    shop: false,\n    buyer: true\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.View, {\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, (checks === null || checks === void 0 ? void 0 : checks.shop_info) == 'order_receipt_banner' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.View, {\n    style: {\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      flexDirection: 'row'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.Image, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/glamo-black-logo.png\"),\n    style: {\n      height: '100pt',\n      width: '200pt',\n      objectFit: 'cover'\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.View, {\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: '10pt'\n    }\n  }, (checks === null || checks === void 0 ? void 0 : checks.shop_info) == 'shop_icon' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.Image, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/logos/glamo-black-logo.png\"),\n    style: {\n      height: '40pt',\n      width: '40pt',\n      objectFit: 'cover'\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.View, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.Text, {\n    style: {\n      fontWeight: 'semibold',\n      fontSize: '16pt'\n    }\n  }, \"glamo\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_3__.Text, null, WEBSITE_URL))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_orderInformation_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n    order: order,\n    feature: featureObj,\n    checks: checks\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_footer_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n    checks: checks\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PackingSlip);\n\n//# sourceURL=webpack://server/./pdf/packingSlip.jsx?");

/***/ }),

/***/ "./pdf/pdf.jsx":
/*!*********************!*\
  !*** ./pdf/pdf.jsx ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _orderReceipt_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./orderReceipt.jsx */ \"./pdf/orderReceipt.jsx\");\n/* harmony import */ var _packingSlip_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./packingSlip.jsx */ \"./pdf/packingSlip.jsx\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @react-pdf/renderer */ \"@react-pdf/renderer\");\n/* harmony import */ var _react_pdf_renderer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nvar _process$env = process.env,\n  CLOUDFRONT_URL = _process$env.CLOUDFRONT_URL,\n  WEBSITE_URL = _process$env.WEBSITE_URL;\n_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_4__.Font.register({\n  family: 'Poppins',\n  fonts: [{\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/fonts/Poppins-Regular.ttf\"),\n    fontStyle: 'normal',\n    fontWeight: 400\n  }, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/fonts/Poppins-Medium.ttf\"),\n    fontWeight: '500'\n  }, {\n    src: \"\".concat(CLOUDFRONT_URL, \"/files/fonts/Poppins-SemiBold.ttf\"),\n    fontWeight: '600'\n  }]\n});\nfunction Pdf(_ref) {\n  var orders = _ref.orders,\n    title = _ref.title,\n    printChecks = _ref.printChecks;\n  var documentProps = {\n    title: title,\n    author: WEBSITE_URL,\n    pdfVersion: '1.7',\n    producer: WEBSITE_URL\n  };\n  var styles = {\n    page: {\n      padding: '30pt',\n      fontFamily: 'Poppins',\n      fontSize: '9pt',\n      boxSizing: 'border-box',\n      password: '123'\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_4__.Document, documentProps, orders.map(function (order) {\n    var _printChecks$packing_, _printChecks$packing_2, _printChecks$order_re, _printChecks$order_re2;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, ((_printChecks$packing_ = printChecks.packing_slip) === null || _printChecks$packing_ === void 0 ? void 0 : _printChecks$packing_.on) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_4__.Page, {\n      size: \"A4\",\n      className: 'p-5',\n      style: styles.page,\n      wrap: true\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_packingSlip_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n      order: order,\n      checks: (_printChecks$packing_2 = printChecks.packing_slip) === null || _printChecks$packing_2 === void 0 ? void 0 : _printChecks$packing_2.checks\n    })), (printChecks === null || printChecks === void 0 || (_printChecks$order_re = printChecks.order_receipt) === null || _printChecks$order_re === void 0 ? void 0 : _printChecks$order_re.on) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_react_pdf_renderer__WEBPACK_IMPORTED_MODULE_4__.Page, {\n      size: \"A4\",\n      className: 'p-5',\n      style: styles.page,\n      wrap: true\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_orderReceipt_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      order: order,\n      checks: (_printChecks$order_re2 = printChecks.order_receipt) === null || _printChecks$order_re2 === void 0 ? void 0 : _printChecks$order_re2.checks\n    })));\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Pdf);\n\n//# sourceURL=webpack://server/./pdf/pdf.jsx?");

/***/ }),

/***/ "./utils/addressValidator.js":
/*!***********************************!*\
  !*** ./utils/addressValidator.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var libphonenumber_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libphonenumber-js */ \"libphonenumber-js\");\n/* harmony import */ var libphonenumber_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(libphonenumber_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var postcode_validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! postcode-validator */ \"postcode-validator\");\n/* harmony import */ var postcode_validator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(postcode_validator__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar addressValidator = [(0,express_validator__WEBPACK_IMPORTED_MODULE_0__.check)('firstName', 'Please enter a name').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.check)('lastName', 'Please enter a name').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.check)('mobile', 'Please enter a mobile number').trim().escape().notEmpty().custom(function (value, _ref) {\n  var _req$body;\n  var req = _ref.req;\n  var isNumberValid = (0,libphonenumber_js__WEBPACK_IMPORTED_MODULE_1__.isValidPhoneNumber)(value, (_req$body = req.body) === null || _req$body === void 0 ? void 0 : _req$body.country);\n  console.log({\n    isNumberValid: isNumberValid,\n    value: value,\n    body: req.body\n  });\n  if (!isNumberValid) {\n    throw new Error('Invalid mobile number');\n  } else {\n    return true;\n  }\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.check)('address_1', 'Please enter a address').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.check)('city', 'Please enter a city').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.check)('postCode', 'Please enter a postcode').trim().escape().notEmpty().custom(function (value, _ref2) {\n  var _req$body2;\n  var req = _ref2.req;\n  var isCountryValidatorExist = (0,postcode_validator__WEBPACK_IMPORTED_MODULE_2__.postcodeValidatorExistsForCountry)((_req$body2 = req.body) === null || _req$body2 === void 0 ? void 0 : _req$body2.country);\n  if (isCountryValidatorExist) {\n    var _req$body3;\n    var isPostCodeValid = (0,postcode_validator__WEBPACK_IMPORTED_MODULE_2__.postcodeValidator)(value, (_req$body3 = req.body) === null || _req$body3 === void 0 ? void 0 : _req$body3.country);\n    if (!isPostCodeValid) {\n      throw new Error('Invalid post code');\n    } else {\n      return true;\n    }\n  } else {\n    return true;\n  }\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.check)('county', 'Please enter a county').trim().escape().notEmpty()];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (addressValidator);\n\n//# sourceURL=webpack://server/./utils/addressValidator.js?");

/***/ }),

/***/ "./utils/cart_wishlist_pipeline.js":
/*!*****************************************!*\
  !*** ./utils/cart_wishlist_pipeline.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _productAggregateStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./productAggregateStage */ \"./utils/productAggregateStage.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar todayDate = dayjs__WEBPACK_IMPORTED_MODULE_1___default()();\nvar convertWeeksToDays = function convertWeeksToDays(_ref) {\n  var field = _ref.field,\n    property = _ref.property;\n  return {\n    $cond: {\n      \"if\": {\n        $eq: [\"\".concat(property, \".type\"), 'weeks']\n      },\n      then: {\n        $multiply: [\"\".concat(property, \".\").concat(field), 7]\n      },\n      \"else\": \"\".concat(property, \".\").concat(field)\n    }\n  };\n};\nvar cart_wishlist_pipeline = [{\n  $unwind: {\n    path: '$items',\n    preserveNullAndEmptyArrays: true\n  }\n}, {\n  $lookup: {\n    from: 'deliveryprofiles',\n    localField: 'items.delivery',\n    foreignField: '_id',\n    as: 'items.deliveryInfo'\n  }\n}, {\n  $lookup: {\n    from: 'products',\n    localField: 'items.product_id',\n    foreignField: '_id',\n    as: 'items.productInfo',\n    \"let\": {\n      id: '$_id'\n    },\n    pipeline: [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()((0,_productAggregateStage__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n      stats: false\n    })), [\n    // {\n    //   $addFields: {\n    //     'variation_data.combineVariation': {\n    //       $cond: {\n    //         if: { $gte: [{ $size: '$variations' }, 2] },\n    //         // then: {\n    //         //   $map: {\n    //         //     input: { $arrayElemAt: ['$variations', 2] },\n    //         //     as: 'variation',\n    //         //     in: '$$variation.option'\n    //         //   },\n    //         // },\n\n    //         then: {\n    //           $objectToArray: {\n    //             $arrayElemAt: ['$variations.options', 2],\n    //           },\n    //         },\n    //         else: false,\n    //       },\n    //     },\n    //   },\n    // },\n\n    {\n      $unwind: {\n        path: '$variations',\n        includeArrayIndex: 'variationIndex'\n      }\n    }, {\n      $addFields: {\n        optionArray: {\n          $objectToArray: '$variations.options'\n        }\n      }\n    }, {\n      $addFields: {\n        variationOptionArray: {\n          $map: {\n            input: '$optionArray',\n            as: 'variationOption',\n            \"in\": '$$variationOption.v'\n          }\n        }\n      }\n    }, {\n      $group: {\n        _id: '$_id',\n        variations: {\n          $push: '$variations'\n        },\n        doc: {\n          $first: '$$ROOT'\n        },\n        variationList: {\n          $push: {\n            title: '$variations.name',\n            variationIndex: '$variationIndex',\n            array: '$variationOptionArray'\n          }\n        }\n      }\n    }, {\n      $replaceRoot: {\n        newRoot: {\n          $mergeObjects: ['$doc', {\n            variationList: '$variationList'\n          }]\n        }\n      }\n    }, {\n      $unset: ['variationOptionArray', 'variationIndex', 'optionArray', '_id']\n    }])\n  }\n}, {\n  $addFields: {\n    items: {\n      $mergeObjects: ['$items', {\n        $arrayElemAt: ['$items.productInfo', 0]\n      }, {\n        price: {\n          $mergeObjects: [{\n            $arrayElemAt: ['$items.productInfo.price', 0]\n          }, '$items.price']\n        }\n      }, {\n        variation_data: {\n          select: '$items.variation_data.select'\n        }\n      }]\n    }\n  }\n}, {\n  $addFields: {\n    'items.variation_data': {\n      // $arrayToObject: {\n      $reduce: {\n        input: '$items.variationList',\n        initialValue: '$items.variation_data',\n        \"in\": {\n          $cond: {\n            \"if\": {\n              $lt: ['$$this.variationIndex', 2]\n            },\n            then: {\n              $mergeObjects: ['$$value', {\n                $arrayToObject: [[{\n                  k: {\n                    $concat: ['variation', {\n                      $toString: {\n                        $add: ['$$this.variationIndex', 1]\n                      }\n                    }, '_present']\n                  },\n                  v: true\n                }, {\n                  k: {\n                    $concat: ['variation', {\n                      $toString: {\n                        $add: ['$$this.variationIndex', 1]\n                      }\n                    }, '_data']\n                  },\n                  v: '$$this'\n                }]]\n              }]\n            },\n            \"else\": {\n              $mergeObjects: ['$$value', {\n                $arrayToObject: [[{\n                  k: 'isVariationCombine',\n                  v: true\n                }]]\n              }]\n            }\n\n            // {\n            //   $mergeObjects: [\n            //     '$$value',\n            //     {\n            //       $arrayToObject: [\n            //         [\n            //           {\n            //             k: 'combineVariation',\n            //             v: {\n            //               $reduce: {\n            //                 input: '$$this.array',\n            //                 initialValue: {},\n            //                 in: {\n            //                   $mergeObjects: [\n            //                     '$$value',\n            //                     {\n            //                       $arrayToObject: [\n            //                         [\n            //                           {\n            //                             k: '$$this.variation',\n            //                             v: {\n            //                               $concatArrays: [\n            //                                 {\n            //                                   $let: {\n            //                                     vars: {\n            //                                       converted: {\n            //                                         $filter: {\n            //                                           as: 'convertedArray',\n            //                                           input: {\n            //                                             $objectToArray:\n            //                                               '$$value',\n            //                                           },\n\n            //                                           cond: {\n            //                                             $eq: [\n            //                                               '$$convertedArray.k',\n            //                                               '$$this.variation',\n            //                                             ],\n            //                                           },\n            //                                         },\n            //                                       },\n            //                                     },\n\n            //                                     in: {\n            //                                       $cond: {\n            //                                         if: {\n            //                                           $eq: [\n            //                                             {\n            //                                               $type:\n            //                                                 '$$converted.v',\n            //                                             },\n            //                                             'object',\n            //                                           ],\n            //                                         },\n            //                                         then: '$$converted.v',\n            //                                         else: [],\n            //                                       },\n            //                                     },\n            //                                   },\n            //                                 },\n\n            //                                 [\n            //                                   {\n            //                                     k: '$$this.variation2',\n            //                                     v: '$$this',\n            //                                   },\n            //                                 ],\n            //                               ],\n            //                               // $mergeObjects: [\n            //                               //   {\n            //                               //     $let: {\n            //                               //       vars: {\n            //                               //         converted: {\n            //                               //           $filter: {\n            //                               //             as: 'convertedArray',\n            //                               //             input: {\n            //                               //               $objectToArray:\n            //                               //                 '$$value',\n            //                               //             },\n\n            //                               //             cond: {\n            //                               //               $eq: [\n            //                               //                 '$$convertedArray.k',\n            //                               //                 '$$this.variation',\n            //                               //               ],\n            //                               //             },\n            //                               //           },\n            //                               //         },\n            //                               //       },\n\n            //                               //       in: {\n            //                               //         $cond: {\n            //                               //           if: {\n            //                               //             $eq: [\n            //                               //               {\n            //                               //                 $type:\n            //                               //                   '$$converted.v',\n            //                               //               },\n            //                               //               'object',\n            //                               //             ],\n            //                               //           },\n            //                               //           then: '$$converted.v',\n            //                               //           else: {},\n            //                               //         },\n            //                               //       },\n            //                               //     },\n            //                               //   },\n            //                               //   {\n            //                               //     $arrayToObject: [\n            //                               //       [\n            //                               //         {\n            //                               //           k: '$$this.variation2',\n            //                               //           v: '$$this',\n            //                               //         },\n            //                               //       ],\n            //                               //     ],\n            //                               //   },\n            //                               // ],\n            //                             },\n            //                           },\n            //                         ],\n            //                       ],\n            //                     },\n            //                   ],\n            //                 },\n            //               },\n            //             },\n            //           },\n            //         ],\n            //       ],\n            //     },\n            //   ],\n            // },\n          }\n        }\n      }\n      // },\n    }\n  }\n}, {\n  $unset: 'items.productInfo'\n}, {\n  $group: {\n    _id: '$_id',\n    items: {\n      $push: '$items'\n    },\n    original_items: {\n      $push: '$items'\n    },\n    delivery_option: {\n      $first: '$delivery_option'\n    }\n  }\n}, {\n  $unwind: {\n    path: '$items',\n    preserveNullAndEmptyArrays: true\n  }\n}, {\n  $group: {\n    _id: '$items.delivery',\n    original_items: {\n      $first: '$original_items'\n    },\n    delivery_option: {\n      $first: '$delivery_option'\n    },\n    deliveryCounts: {\n      $sum: '$items.quantity'\n    },\n    cartId: {\n      $first: '$_id'\n    },\n    profileInfo: {\n      $first: {\n        $arrayElemAt: ['$items.deliveryInfo', 0]\n      }\n    },\n    items: {\n      $push: '$items'\n    }\n  }\n}, {\n  $addFields: {\n    costArray: {\n      $concatArrays: ['$profileInfo.standard_delivery', '$profileInfo.delivery_upgrades']\n    },\n    profile_processing_times: {\n      start: convertWeeksToDays({\n        field: 'start',\n        property: '$profileInfo.processing_time'\n      }),\n      end: convertWeeksToDays({\n        field: 'end',\n        property: '$profileInfo.processing_time'\n      })\n    }\n  }\n}, {\n  $addFields: {\n    costArrayTotal: {\n      $arrayToObject: {\n        $map: {\n          input: '$costArray',\n          // as: 'delivery',\n          \"in\": {\n            $let: {\n              vars: {\n                startDate: {\n                  $dateAdd: {\n                    startDate: new Date(),\n                    unit: 'day',\n                    amount: {\n                      $add: ['$profile_processing_times.start', convertWeeksToDays({\n                        field: 'start',\n                        property: '$$this.shipping'\n                      })]\n                    }\n                  }\n                },\n                endDate: {\n                  $dateAdd: {\n                    startDate: new Date(),\n                    unit: 'day',\n                    amount: {\n                      $add: ['$profile_processing_times.end', convertWeeksToDays({\n                        field: 'end',\n                        property: '$$this.shipping'\n                      })]\n                    }\n                  }\n                }\n              },\n              \"in\": {\n                k: {\n                  $toString: '$$this._id'\n                },\n                v: {\n                  _id: '$$this._id',\n                  startDate: '$$startDate',\n                  endDate: '$$endDate',\n                  estimated_delivery: {\n                    $cond: {\n                      \"if\": {\n                        $eq: [{\n                          $dateToString: {\n                            format: '%b',\n                            date: '$$startDate'\n                          }\n                        }, {\n                          $dateToString: {\n                            format: '%b',\n                            date: '$$endDate'\n                          }\n                        }]\n                      },\n                      then: {\n                        $concat: [{\n                          $dateToString: {\n                            format: '%d',\n                            date: '$$startDate'\n                          }\n                        }, '-', {\n                          $dateToString: {\n                            format: '%d',\n                            date: '$$endDate'\n                          }\n                        }, ' ', {\n                          $dateToString: {\n                            format: '%b',\n                            date: '$$endDate'\n                          }\n                        }]\n                      },\n                      \"else\": {\n                        $concat: [{\n                          $dateToString: {\n                            format: '%b %d',\n                            date: '$$startDate'\n                          }\n                        }, '-', {\n                          $dateToString: {\n                            format: '%b %d',\n                            date: '$$endDate'\n                          }\n                        }]\n                      }\n                    }\n                  },\n                  cost: {\n                    $add: ['$$this.charges.one_item', {\n                      $multiply: ['$$this.charges.additional_item', {\n                        $subtract: ['$deliveryCounts', 1]\n                      }]\n                    }]\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}, {\n  $group: {\n    _id: '$cartId',\n    delivery_option: {\n      $first: '$delivery_option'\n    },\n    deliveryInfoObj: {\n      $addToSet: {\n        k: {\n          $toString: '$_id'\n        },\n        v: {\n          $mergeObjects: [{\n            shipping_costs: '$costArrayTotal'\n          }, '$profileInfo', {\n            itemsByProfile: '$items'\n          }]\n        }\n      }\n    },\n    items: {\n      $first: '$original_items'\n    }\n  }\n}, {\n  $replaceRoot: {\n    newRoot: {\n      $mergeObjects: ['$$ROOT', {\n        deliveryInfoObj: {\n          $arrayToObject: '$deliveryInfoObj'\n        }\n      }]\n    }\n  }\n}];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (cart_wishlist_pipeline);\n\n//# sourceURL=webpack://server/./utils/cart_wishlist_pipeline.js?");

/***/ }),

/***/ "./utils/deliveryProfileValidator.js":
/*!*******************************************!*\
  !*** ./utils/deliveryProfileValidator.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   postCodeValidator: () => (/* binding */ postCodeValidator)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var postcode_validator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! postcode-validator */ \"postcode-validator\");\n/* harmony import */ var postcode_validator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(postcode_validator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _Models_deliveryProfile__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Models/deliveryProfile */ \"./Models/deliveryProfile.js\");\n\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-continue */\n\n\n\n\nvar generateChecks = function generateChecks(_ref) {\n  var property = _ref.property;\n  return [(0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)(\"\".concat(property, \".*.destination\")).escape().trim(), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)(\"\".concat(property), 'Select a delivery service').isArray().custom(function (value, _ref2) {\n    var req = _ref2.req;\n    var resultObj = {};\n    var upgradeObj = {};\n    var _iterator = _createForOfIteratorHelper(value),\n      _step;\n    try {\n      var _loop = function _loop() {\n        var _element$charges3, _element$charges4, _element$destination;\n        var element = _step.value;\n        var checks = {\n          shipping: false,\n          charges: false\n        };\n        if (!lodash__WEBPACK_IMPORTED_MODULE_3___default().has(element, 'shipping.service') && !checks.shipping) {\n          resultObj[element._id] = _objectSpread(_objectSpread({}, resultObj[element._id]), {}, {\n            shipping: {\n              service: 'Select a delivery service'\n            }\n          });\n          checks.shipping = true;\n        }\n        if (!lodash__WEBPACK_IMPORTED_MODULE_3___default().has(element, 'shipping.start') && !checks.shipping) {\n          var _resultObj$element$_i;\n          resultObj[element._id] = _objectSpread(_objectSpread({}, resultObj[element._id]), {}, {\n            shipping: _objectSpread(_objectSpread({}, (_resultObj$element$_i = resultObj[element._id]) === null || _resultObj$element$_i === void 0 ? void 0 : _resultObj$element$_i.shipping), {}, {\n              start: 'Select delivery time.'\n            })\n          });\n          checks.shipping = true;\n        }\n        if (!lodash__WEBPACK_IMPORTED_MODULE_3___default().has(element, 'shipping.end') && !checks.shipping) {\n          var _resultObj$element$_i2;\n          resultObj[element._id] = _objectSpread(_objectSpread({}, resultObj[element._id]), {}, {\n            shipping: _objectSpread(_objectSpread({}, (_resultObj$element$_i2 = resultObj[element._id]) === null || _resultObj$element$_i2 === void 0 ? void 0 : _resultObj$element$_i2.shipping), {}, {\n              end: 'Select delivery time'\n            })\n          });\n          checks.shipping = true;\n        }\n        if (!lodash__WEBPACK_IMPORTED_MODULE_3___default().has(element, 'shipping.type') && !checks.shipping) {\n          var _resultObj$element$_i3;\n          resultObj[element._id] = _objectSpread(_objectSpread({}, resultObj[element._id]), {}, {\n            shipping: _objectSpread(_objectSpread({}, (_resultObj$element$_i3 = resultObj[element._id]) === null || _resultObj$element$_i3 === void 0 ? void 0 : _resultObj$element$_i3.shipping), {}, {\n              type: 'Select delivery type.'\n            })\n          });\n          checks.shipping = true;\n        }\n        if ((!lodash__WEBPACK_IMPORTED_MODULE_3___default().has(element, 'charges') || !lodash__WEBPACK_IMPORTED_MODULE_3___default().has(element, 'charges.one_item' || 0)) && !checks.charges) {\n          resultObj[element._id] = _objectSpread(_objectSpread({}, resultObj[element._id]), {}, {\n            charges: 'Select how much you want you charge'\n          });\n          checks.charges = true;\n        }\n        ['one_item', 'additional_item'].forEach(function (prop) {\n          var _element$charges, _element$charges2;\n          if ((element === null || element === void 0 || (_element$charges = element.charges) === null || _element$charges === void 0 ? void 0 : _element$charges[prop]) < 0 || (element === null || element === void 0 || (_element$charges2 = element.charges) === null || _element$charges2 === void 0 ? void 0 : _element$charges2[prop]) > 15865.4) {\n            resultObj[element._id] = _objectSpread(_objectSpread({}, resultObj[element._id]), {}, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({}, prop, \"Price must be between \\xA30.00 and \\xA315,865.40.\"));\n          }\n        });\n        if ((element === null || element === void 0 || (_element$charges3 = element.charges) === null || _element$charges3 === void 0 ? void 0 : _element$charges3.one_item) < (element === null || element === void 0 || (_element$charges4 = element.charges) === null || _element$charges4 === void 0 ? void 0 : _element$charges4.additional_item)) {\n          resultObj[element._id] = _objectSpread(_objectSpread({}, resultObj[element._id]), {}, {\n            additional_item: \"Price can't be greater than the One item price.\"\n          });\n        }\n        if (property === 'delivery_upgrades') {\n          var _element$upgrade;\n          if (!(element !== null && element !== void 0 && element.upgrade)) {\n            lodash__WEBPACK_IMPORTED_MODULE_3___default().set(resultObj, [element._id, 'upgrade'], 'Name must be between 1 and 128 characters');\n          } else if (lodash__WEBPACK_IMPORTED_MODULE_3___default().get(upgradeObj, [element === null || element === void 0 || (_element$upgrade = element.upgrade) === null || _element$upgrade === void 0 ? void 0 : _element$upgrade.toLowerCase(), element === null || element === void 0 ? void 0 : element.destination]) >= 1) {\n            lodash__WEBPACK_IMPORTED_MODULE_3___default().set(resultObj, [element._id, 'upgrade'], 'You already have an upgrade with this name.');\n          } else {\n            var _element$upgrade2;\n            lodash__WEBPACK_IMPORTED_MODULE_3___default().set(upgradeObj, [element === null || element === void 0 || (_element$upgrade2 = element.upgrade) === null || _element$upgrade2 === void 0 ? void 0 : _element$upgrade2.toLowerCase(), element === null || element === void 0 ? void 0 : element.destination], 1);\n          }\n        }\n        //\n\n        if ((element === null || element === void 0 || (_element$destination = element.destination) === null || _element$destination === void 0 ? void 0 : _element$destination.length) === 0) {\n          lodash__WEBPACK_IMPORTED_MODULE_3___default().set(resultObj, [element._id, 'destination'], 'Select a destination');\n        }\n      };\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        _loop();\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    console.log(upgradeObj);\n    if (lodash__WEBPACK_IMPORTED_MODULE_3___default().isEmpty(resultObj)) {\n      return true;\n    }\n    throw new Error(JSON.stringify(resultObj));\n  })];\n};\nvar postCodeValidator = function postCodeValidator() {\n  return (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('origin_post_code', 'Enter a valid postal code').escape().trim().isLength({\n    min: 1\n  }).custom(function (value, _ref3) {\n    var req = _ref3.req;\n    var country_of_origin = req.body.country_of_origin;\n    if ((0,postcode_validator__WEBPACK_IMPORTED_MODULE_4__.postcodeValidatorExistsForCountry)(country_of_origin) && !(0,postcode_validator__WEBPACK_IMPORTED_MODULE_4__.postcodeValidator)(value === null || value === void 0 ? void 0 : value.toUpperCase(), country_of_origin)) {\n      return false;\n    }\n    return true;\n  });\n};\nvar deliveryProfileValidator = [(0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('country_of_origin', 'Select a Country your dispatching from.').escape().trim().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('name', 'Profile name must be between 1 and 128 characters.').escape().trim().isLength({\n  min: 1,\n  max: 128\n}), postCodeValidator(), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('processing_time').custom(function (value) {\n  var resultObj = {};\n  if ((0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEmpty)(value) || !(value !== null && value !== void 0 && value.start) || !(value !== null && value !== void 0 && value.end)) {\n    resultObj.general = 'Select a processing time';\n    throw Error(JSON.stringify(resultObj));\n  }\n  if ((value === null || value === void 0 ? void 0 : value.start) > (value === null || value === void 0 ? void 0 : value.end)) {\n    resultObj.start = \"Start \".concat((value === null || value === void 0 ? void 0 : value.type) || 'timeframe', \" cant be greater than end \").concat((value === null || value === void 0 ? void 0 : value.type) || 'timeframe', \".\");\n    throw Error(JSON.stringify(resultObj));\n  }\n  return value;\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('delivery_upgrades.*.upgrade').escape().trim()].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(generateChecks({\n  property: 'standard_delivery'\n})), _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(generateChecks({\n  property: 'delivery_upgrades'\n})));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (deliveryProfileValidator);\n\n//# sourceURL=webpack://server/./utils/deliveryProfileValidator.js?");

/***/ }),

/***/ "./utils/errorRegenerator.js":
/*!***********************************!*\
  !*** ./utils/errorRegenerator.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ errorRegenerator)\n/* harmony export */ });\nfunction errorRegenerator(result) {\n  var newResult = {};\n  result.errors.forEach(function (_ref) {\n    var path = _ref.path,\n      msg = _ref.msg;\n    newResult[path] = msg;\n  });\n  return newResult;\n}\n\n//# sourceURL=webpack://server/./utils/errorRegenerator.js?");

/***/ }),

/***/ "./utils/generateOrderNumber.js":
/*!**************************************!*\
  !*** ./utils/generateOrderNumber.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ generateOrderNumber)\n/* harmony export */ });\n/* harmony import */ var randomstring__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! randomstring */ \"randomstring\");\n/* harmony import */ var randomstring__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(randomstring__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction generateOrderNumber() {\n  var orderNumberString = randomstring__WEBPACK_IMPORTED_MODULE_0___default().generate({\n    length: 12,\n    charset: 'alphanumeric',\n    capitalization: 'uppercase'\n  });\n  console.log('orderNumberfromstring: ', orderNumberString);\n  return orderNumberString;\n}\n\n//# sourceURL=webpack://server/./utils/generateOrderNumber.js?");

/***/ }),

/***/ "./utils/generatePaymentIntent.js":
/*!****************************************!*\
  !*** ./utils/generatePaymentIntent.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"@babel/runtime/helpers/objectWithoutProperties\");\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! express-async-handler */ \"express-async-handler\");\n/* harmony import */ var express_async_handler__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(express_async_handler__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _cart_wishlist_pipeline__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./cart_wishlist_pipeline */ \"./utils/cart_wishlist_pipeline.js\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _Models_cart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Models/cart */ \"./Models/cart.js\");\n/* harmony import */ var _variationFormat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./variationFormat */ \"./utils/variationFormat.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var randomstring__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! randomstring */ \"randomstring\");\n/* harmony import */ var randomstring__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(randomstring__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _Models_order__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../Models/order */ \"./Models/order.js\");\n/* harmony import */ var _generateOrderNumber__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./generateOrderNumber */ \"./utils/generateOrderNumber.js\");\n\n\n\n\n\nvar _excluded = [\"variation_data\", \"product_id\", \"quantity\", \"price\"];\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_12___default()(process.env.STRIPE_KEY);\n\nvar generatePaymentIntent = express_async_handler__WEBPACK_IMPORTED_MODULE_6___default()( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().mark(function _callee(req, res, next) {\n    var _req$user$_id;\n    var _req$body, cart, shipping, deliveryOption, billing, deliveryDate, total, cart_id, cartInfo, promo, userId, order_id, paymentIntent, itemsArray, itemsByProfileArray, orderObj, order;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _req$body = req.body, cart = _req$body.cart, shipping = _req$body.shipping, deliveryOption = _req$body.deliveryOption, billing = _req$body.billing, deliveryDate = _req$body.deliveryDate, total = _req$body.total, cart_id = _req$body.cart_id, cartInfo = _req$body.cartInfo, promo = _req$body.promo;\n          userId = (_req$user$_id = req.user._id) === null || _req$user$_id === void 0 ? void 0 : _req$user$_id.toString(); //   const data = await Cart.aggregate([\n          //     {\n          //       $match: {\n          //         _id: new Types.ObjectId(cart_id),\n          //       },\n          //     },\n          //     ...cart_wishlist_pipeline,\n          //     {\n          //       $project: { items: 1 },\n          //     },\n          //   ]);\n          //   const document = {\n          //     ...data[0],\n          //     items: variationFormat({ products: data[0].items }),\n          //   };\n          //   const items = variationFormat({ products: data[0].items });\n          //\n          //   let calculateTotalCost = 0;\n          //   items.forEach((item) => {\n          //     calculateTotalCost +=\n          //       _.get(item, 'price.current') * _.get(item, 'quantity');\n          //   });\n          order_id = (0,_generateOrderNumber__WEBPACK_IMPORTED_MODULE_16__[\"default\"])();\n          _context.next = 5;\n          return stripe.paymentIntents.create({\n            metadata: {\n              order_id: order_id\n            },\n            amount: parseFloat(total.withShipping) * 100,\n            currency: 'gbp',\n            customer: userId,\n            shipping: shipping,\n            payment_method_types: ['card', 'paypal', 'klarna', 'afterpay_clearpay']\n          });\n        case 5:\n          paymentIntent = _context.sent;\n          itemsArray = [];\n          itemsByProfileArray = Object.entries(cartInfo.deliveryInfoObj).map(function (_ref2) {\n            var _ref3 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_ref2, 2),\n              key = _ref3[0],\n              value = _ref3[1];\n            var itemsByProfile = value.itemsByProfile,\n              shipping_costs = value.shipping_costs,\n              standard_delivery = value.standard_delivery,\n              delivery_upgrades = value.delivery_upgrades,\n              processing_time = value.processing_time;\n            var delivery_option = lodash__WEBPACK_IMPORTED_MODULE_11___default().get(cartInfo, ['delivery_option', key]);\n            //   console.log({\n            //     shipping: { ..._.get(shipping_costs, delivery_option), profileId: key },\n            //     delivery_option,\n            //   });\n\n            var findDelivery = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(standard_delivery), _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(delivery_upgrades)).find(function (_ref4) {\n              var _id = _ref4._id;\n              return _id == delivery_option;\n            });\n            var shippingInfo = _objectSpread(_objectSpread(_objectSpread({}, findDelivery), lodash__WEBPACK_IMPORTED_MODULE_11___default().get(shipping_costs, delivery_option)), {}, {\n              processing_time: processing_time,\n              profileId: key\n            });\n            var items = itemsByProfile.map(function (_ref5) {\n              var variation_data = _ref5.variation_data,\n                product_id = _ref5.product_id,\n                quantity = _ref5.quantity,\n                price = _ref5.price,\n                rest = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default()(_ref5, _excluded);\n              return _objectSpread({\n                product: product_id,\n                quantity: quantity,\n                isVariation1Present: lodash__WEBPACK_IMPORTED_MODULE_11___default().get(variation_data, 'variation1_present') || false,\n                isVariation2Present: lodash__WEBPACK_IMPORTED_MODULE_11___default().get(variation_data, 'variation2_present') || false,\n                isVariationCombine: lodash__WEBPACK_IMPORTED_MODULE_11___default().get(variation_data, 'isVariationCOmbine') || false,\n                variation1: lodash__WEBPACK_IMPORTED_MODULE_11___default().get(variation_data, 'select.variation1'),\n                variation2: lodash__WEBPACK_IMPORTED_MODULE_11___default().get(variation_data, 'select.variation2'),\n                price: lodash__WEBPACK_IMPORTED_MODULE_11___default().get(price, 'current')\n              }, rest);\n            });\n            itemsArray.push.apply(itemsArray, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(items));\n            return {\n              items: items,\n              shippingInfo: shippingInfo\n            };\n          }); //   const profile = await DeliveryProfile.findById(deliveryOption?.id, null, {\n          //     toObject: true,\n          //     new: true,\n          //   });\n          orderObj = {\n            _id: order_id,\n            customer: userId,\n            status: 'processing',\n            shipping_address: shipping,\n            billing_address: billing,\n            transaction_cost: {\n              total: total.withShipping,\n              subtotal: total.withOutShipping,\n              promo: {\n                code: promo === null || promo === void 0 ? void 0 : promo.code,\n                discount: total === null || total === void 0 ? void 0 : total.amountOff\n              },\n              delivery_cost: total === null || total === void 0 ? void 0 : total.delivery_cost\n            },\n            itemsByProfile: itemsByProfileArray,\n            shipping_option: {\n              //   cost: total?.delivery_cost,\n              //   delivery_date: deliveryDate,\n              //   name: deliveryOption?.name,\n              //   id: deliveryOption?.id,\n              //   time: profile?.processingTime?.end,\n              //   type: profile?.processingTime?.type,\n            },\n            items: itemsArray,\n            cartId: cart_id\n          };\n          _context.next = 11;\n          return _Models_order__WEBPACK_IMPORTED_MODULE_15__[\"default\"].create(orderObj);\n        case 11:\n          order = _context.sent;\n          // console.log({ order });\n          res.status(200).send({\n            success: true,\n            clientSecret: paymentIntent.client_secret,\n            orderNumber: order_id,\n            id: paymentIntent.id\n          });\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (generatePaymentIntent);\n\n//# sourceURL=webpack://server/./utils/generatePaymentIntent.js?");

/***/ }),

/***/ "./utils/generateProduct.js":
/*!**********************************!*\
  !*** ./utils/generateProduct.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv/config.js */ \"dotenv/config.js\");\n/* harmony import */ var dotenv_config_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dotenv_config_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Upload_sharpify_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Upload/sharpify.js */ \"./Upload/sharpify.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* eslint-disable no-restricted-syntax */\n\n\n\n\nfunction generateProduct(_x, _x2) {\n  return _generateProduct.apply(this, arguments);\n}\nfunction _generateProduct() {\n  _generateProduct = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(req, id) {\n    var endPoint,\n      url,\n      counter,\n      imageArr,\n      files,\n      variations,\n      _req$body,\n      title,\n      delivery,\n      gender,\n      price,\n      stock,\n      category,\n      description,\n      parseVariations,\n      productData,\n      sharpResult,\n      _iterator,\n      _step,\n      item,\n      sharpen,\n      _args = arguments;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          endPoint = _args.length > 2 && _args[2] !== undefined ? _args[2] : 'products';\n          url = \"\".concat(process.env.CLOUDFRONT_URL, \"/\").concat(endPoint);\n          counter = 1;\n          imageArr = [];\n          files = req.files;\n          variations = req.body.variations;\n          _req$body = req.body, title = _req$body.title, delivery = _req$body.delivery, gender = _req$body.gender, price = _req$body.price, stock = _req$body.stock, category = _req$body.category, description = _req$body.description;\n          parseVariations = variations === null || variations === void 0 ? void 0 : variations.map(function (item) {\n            var data = JSON.parse(item);\n            delete data.id;\n            data.options = new Map(data.options);\n            return data;\n          });\n          productData = {\n            title: title,\n            delivery: delivery,\n            gender: gender,\n            category: category,\n            variations: parseVariations,\n            images: imageArr,\n            description: description\n          };\n          productData.stock = lodash__WEBPACK_IMPORTED_MODULE_4___default().isNaN(stock) ? null : stock;\n          lodash__WEBPACK_IMPORTED_MODULE_4___default().set(productData, 'price.current', lodash__WEBPACK_IMPORTED_MODULE_4___default().isNaN(price) ? null : price);\n          sharpResult = [];\n          _iterator = _createForOfIteratorHelper(files);\n          _context.prev = 13;\n          _iterator.s();\n        case 15:\n          if ((_step = _iterator.n()).done) {\n            _context.next = 26;\n            break;\n          }\n          item = _step.value;\n          _context.next = 19;\n          return (0,_Upload_sharpify_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(item);\n        case 19:\n          sharpen = _context.sent;\n          sharpen.fileName = counter;\n          imageArr.push(\"\".concat(url, \"/\").concat(id, \"/\").concat(sharpen.fileName, \".\").concat(sharpen.format));\n          counter += 1;\n          sharpResult.push(sharpen);\n        case 24:\n          _context.next = 15;\n          break;\n        case 26:\n          _context.next = 31;\n          break;\n        case 28:\n          _context.prev = 28;\n          _context.t0 = _context[\"catch\"](13);\n          _iterator.e(_context.t0);\n        case 31:\n          _context.prev = 31;\n          _iterator.f();\n          return _context.finish(31);\n        case 34:\n          return _context.abrupt(\"return\", {\n            productData: productData,\n            sharpResult: sharpResult\n          });\n        case 35:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[13, 28, 31, 34]]);\n  }));\n  return _generateProduct.apply(this, arguments);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (generateProduct);\n\n//# sourceURL=webpack://server/./utils/generateProduct.js?");

/***/ }),

/***/ "./utils/getBalanceTransactionsList.js":
/*!*********************************************!*\
  !*** ./utils/getBalanceTransactionsList.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n\n\nvar STRIPE_KEY = process.env.STRIPE_KEY;\nvar stripe = stripe__WEBPACK_IMPORTED_MODULE_6___default()(STRIPE_KEY);\nvar getBalanceTransactionsList = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(created) {\n    var results,\n      _newResults$data,\n      obj,\n      newResults,\n      _yield$stripe$balance,\n      data,\n      has_more,\n      lastTransaction,\n      _args = arguments;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          results = _args.length > 1 && _args[1] !== undefined ? _args[1] : {\n            refunds: {\n              amount: 0,\n              fees: 0,\n              net: 0,\n              total: 0\n            },\n            payments: {\n              amount: 0,\n              fees: 0,\n              net: 0,\n              total: 0,\n              fee_details: {}\n            },\n            data: []\n          };\n          _context.prev = 1;\n          obj = {\n            // type,\n            created: created,\n            limit: 100\n          };\n          newResults = _objectSpread({}, results);\n          console.log(obj);\n          _context.next = 7;\n          return stripe.balanceTransactions.list(obj);\n        case 7:\n          _yield$stripe$balance = _context.sent;\n          data = _yield$stripe$balance.data;\n          has_more = _yield$stripe$balance.has_more;\n          (_newResults$data = newResults.data).push.apply(_newResults$data, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(data));\n          data.forEach(function (_ref2) {\n            var amount = _ref2.amount,\n              fee = _ref2.fee,\n              net = _ref2.net,\n              type = _ref2.type,\n              fee_details = _ref2.fee_details;\n            if (type == 'refund' || type == 'payment_refund') {\n              newResults.refunds.amount += amount;\n              newResults.refunds.fees += fee;\n              newResults.refunds.net += net;\n              newResults.refunds.total += 1;\n              fee_details.forEach(function (_ref3) {\n                var feeAmount = _ref3.amount,\n                  feeType = _ref3.type,\n                  description = _ref3.description;\n                if (!lodash__WEBPACK_IMPORTED_MODULE_5___default().hasIn(newResults, ['refunds', 'fee_details', feeType, 'credit'])) {\n                  lodash__WEBPACK_IMPORTED_MODULE_5___default().set(newResults, ['refunds', 'fee_details', feeType], {\n                    credit: feeAmount,\n                    description: description\n                  });\n                } else {\n                  newResults.refunds.fee_details[feeType].credit += feeAmount;\n                }\n              });\n            }\n            if (type == 'charge' || type == 'payment') {\n              newResults.payments.amount += amount;\n              newResults.payments.fees += fee;\n              newResults.payments.net += net;\n              newResults.payments.total += 1;\n              fee_details.forEach(function (_ref4) {\n                var feeAmount = _ref4.amount,\n                  feeType = _ref4.type,\n                  description = _ref4.description;\n                if (!lodash__WEBPACK_IMPORTED_MODULE_5___default().hasIn(newResults, ['payments', 'fee_details', feeType, 'total'])) {\n                  lodash__WEBPACK_IMPORTED_MODULE_5___default().set(newResults, ['payments', 'fee_details', feeType], {\n                    total: feeAmount,\n                    description: description\n                  });\n                } else {\n                  newResults.payments.fee_details[feeType].total += feeAmount;\n                }\n              });\n            }\n          });\n          if (!has_more) {\n            _context.next = 15;\n            break;\n          }\n          lastTransaction = lodash__WEBPACK_IMPORTED_MODULE_5___default().last(data);\n          return _context.abrupt(\"return\", getBalanceTransactionsList(_objectSpread(_objectSpread({}, created), {}, {\n            lt: lastTransaction.created\n          }), newResults));\n        case 15:\n          return _context.abrupt(\"return\", results);\n        case 18:\n          _context.prev = 18;\n          _context.t0 = _context[\"catch\"](1);\n          console.error(_context.t0);\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 18]]);\n  }));\n  return function getBalanceTransactionsList(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getBalanceTransactionsList);\n\n//# sourceURL=webpack://server/./utils/getBalanceTransactionsList.js?");

/***/ }),

/***/ "./utils/logger.js":
/*!*************************!*\
  !*** ./utils/logger.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pino */ \"pino\");\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pino__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar BETTERSTACK_SOURCE_TOKEN = process.env.BETTERSTACK_SOURCE_TOKEN;\nvar transports = pino__WEBPACK_IMPORTED_MODULE_0___default().transport({\n  targets: [{\n    target: 'pino-pretty',\n    options: {\n      translateTime: 'SYS:dd-mm-yyyy HH:MM:ss',\n      ignore: 'pid,hostname'\n    }\n  }, {\n    target: '@logtail/pino',\n    options: {\n      sourceToken: BETTERSTACK_SOURCE_TOKEN\n    }\n  }]\n});\nvar logger = pino__WEBPACK_IMPORTED_MODULE_0___default()({\n  redact: {\n    paths: ['email', 'password', 'address', 'dob', 'confirmPassword'],\n    remove: true\n  }\n}, transports);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n\n//# sourceURL=webpack://server/./utils/logger.js?");

/***/ }),

/***/ "./utils/matchStageOrderAggregate.js":
/*!*******************************************!*\
  !*** ./utils/matchStageOrderAggregate.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);\n\nvar getMatchStage = function getMatchStage(_ref) {\n  var filter = _ref.filter;\n  var matchArray = [];\n  if ((filter === null || filter === void 0 ? void 0 : filter.destination) == 'EVERYWHERE_ELSE') {\n    matchArray.push({\n      'shipping_address.address.country': {\n        $nin: ['GB', 'US']\n      }\n    });\n  } else if ((filter === null || filter === void 0 ? void 0 : filter.destination) != 'ALL') {\n    matchArray.push({\n      'shipping_address.address.country': {\n        $eq: filter.destination\n      }\n    });\n  }\n  if ((filter === null || filter === void 0 ? void 0 : filter.completed_status) == 'all') {\n    matchArray.push({\n      status: {\n        $nin: ['received']\n      }\n    });\n  } else {\n    matchArray.push({\n      status: {\n        $in: [filter === null || filter === void 0 ? void 0 : filter.completed_status]\n      }\n    });\n  }\n  if (filter !== null && filter !== void 0 && filter.mark_as_gift) {\n    matchArray.push({\n      mark_as_gift: {\n        $eq: true\n      }\n    });\n  }\n  if ((filter === null || filter === void 0 ? void 0 : filter.by_date) == 'overdue') {\n    matchArray.unshift({\n      ship_date: {\n        $lt: dayjs__WEBPACK_IMPORTED_MODULE_0___default()().startOf('day').toDate()\n      }\n    });\n  } else if ((filter === null || filter === void 0 ? void 0 : filter.by_date) == 'today') {\n    matchArray.unshift({\n      ship_date: {\n        $gt: dayjs__WEBPACK_IMPORTED_MODULE_0___default()().startOf('day').toDate(),\n        $lt: dayjs__WEBPACK_IMPORTED_MODULE_0___default()().endOf('day').toDate()\n      }\n    });\n  } else if ((filter === null || filter === void 0 ? void 0 : filter.by_date) == 'tomorrow') {\n    matchArray.unshift({\n      ship_date: {\n        $gt: dayjs__WEBPACK_IMPORTED_MODULE_0___default()().add(1, 'day').startOf('day').toDate(),\n        $lt: dayjs__WEBPACK_IMPORTED_MODULE_0___default()().add(1, 'day').endOf('day').toDate()\n      }\n    });\n  } else if ((filter === null || filter === void 0 ? void 0 : filter.by_date) == 'within_a_week') {\n    matchArray.unshift({\n      ship_date: {\n        $gt: dayjs__WEBPACK_IMPORTED_MODULE_0___default()().startOf('day').toDate(),\n        $lt: dayjs__WEBPACK_IMPORTED_MODULE_0___default()().add(1, 'week').endOf('day').toDate()\n      }\n    });\n  }\n  return matchArray;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getMatchStage);\n\n//# sourceURL=webpack://server/./utils/matchStageOrderAggregate.js?");

/***/ }),

/***/ "./utils/multerUpload.js":
/*!*******************************!*\
  !*** ./utils/multerUpload.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Upload_fileFilter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Upload/fileFilter */ \"./Upload/fileFilter.js\");\n\n\nvar storage = multer__WEBPACK_IMPORTED_MODULE_0___default().memoryStorage();\nvar upload = multer__WEBPACK_IMPORTED_MODULE_0___default()({\n  storage: storage,\n  fileFilter: _Upload_fileFilter__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  limits: {\n    fileSize: 1000000000,\n    files: 6\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (upload);\n\n//# sourceURL=webpack://server/./utils/multerUpload.js?");

/***/ }),

/***/ "./utils/nodemailer.js":
/*!*****************************!*\
  !*** ./utils/nodemailer.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handlebarOptions: () => (/* binding */ handlebarOptions)\n/* harmony export */ });\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var nodemailer_express_handlebars__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nodemailer-express-handlebars */ \"nodemailer-express-handlebars\");\n/* harmony import */ var nodemailer_express_handlebars__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(nodemailer_express_handlebars__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar _process$env = process.env,\n  SMTP_USER = _process$env.SMTP_USER,\n  SMTP_PASSWORD = _process$env.SMTP_PASSWORD,\n  SMTP_HOST = _process$env.SMTP_HOST,\n  SMTP_PORT = _process$env.SMTP_PORT;\nvar transporter = nodemailer__WEBPACK_IMPORTED_MODULE_1___default().createTransport({\n  host: SMTP_HOST,\n  port: SMTP_PORT,\n  //   secure: true,\n  auth: {\n    user: SMTP_USER,\n    pass: SMTP_PASSWORD\n  }\n});\nvar handlebarOptions = {\n  viewEngine: {\n    extName: '.handlebars',\n    partialsDir: path__WEBPACK_IMPORTED_MODULE_3___default().resolve('./Email Html'),\n    defaultLayout: false\n  },\n  viewPath: path__WEBPACK_IMPORTED_MODULE_3___default().resolve('./Email Html'),\n  extName: '.handlebars'\n};\n\n// transporter.use('compile', hbs(handlebarOptions));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (transporter);\n\n//# sourceURL=webpack://server/./utils/nodemailer.js?");

/***/ }),

/***/ "./utils/orderAggregatePipeline.js":
/*!*****************************************!*\
  !*** ./utils/orderAggregatePipeline.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar orderAggregatePipeline = [{\n  $unwind: '$items'\n}, {\n  $lookup: {\n    from: 'products',\n    localField: 'items.product',\n    foreignField: '_id',\n    as: 'productLookup'\n  }\n}, {\n  $project: {\n    productLookup: {\n      variations: 0,\n      reviews: 0,\n      detail: 0,\n      category: 0,\n      gender: 0,\n      price: 0,\n      delivery: 0\n    }\n  }\n}, {\n  $addFields: {\n    'items.product': {\n      $arrayElemAt: ['$productLookup', 0]\n    }\n  }\n}, {\n  $unset: 'productLookup'\n}, {\n  $group: {\n    _id: '$_id',\n    itemsArray: {\n      $push: '$items'\n    },\n    detail: {\n      $first: '$$ROOT'\n    }\n  }\n},\n// {\n//   $sort: { _id: 1 },\n// },\n{\n  $replaceRoot: {\n    newRoot: {\n      $mergeObjects: ['$detail', {\n        items: '$itemsArray'\n      }]\n    }\n  }\n}, {\n  $group: {\n    _id: {\n      $dateToString: {\n        format: '%Y-%m-%d',\n        // date: { $toDate: '$newDate' },\n        date: '$createdAt'\n      }\n    },\n    totalDocuments: {\n      $sum: 1\n    },\n    orders: {\n      $push: '$$ROOT'\n    }\n  }\n}];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (orderAggregatePipeline);\n\n//# sourceURL=webpack://server/./utils/orderAggregatePipeline.js?");

/***/ }),

/***/ "./utils/passport/facebookStrategy.js":
/*!********************************************!*\
  !*** ./utils/passport/facebookStrategy.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var passport_facebook__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! passport-facebook */ \"passport-facebook\");\n/* harmony import */ var passport_facebook__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(passport_facebook__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_user_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Models/user.js */ \"./Models/user.js\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../app.js */ \"./app.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nvar facebookStrategyOption = {\n  clientID: process.env.FACEBOOK_CLIENT_ID,\n  clientSecret: process.env.FACEBOOK_CLIENT_SECRET,\n  callbackURL: '/api/user/login/facebook/callback',\n  state: true,\n  includeEmail: true,\n  scope: ['profile', 'email']\n};\nvar verifyCallBack = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(accessToken, refreshToken, profile, cb) {\n    var findUserByFacebookId, _profile$displayName, displayName, payload, token, id, ttl;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          console.log({\n            profile: profile\n          });\n          //   const email = profile.emails[0]?.value;\n          _context.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n            'social_accounts.facebook': profile === null || profile === void 0 ? void 0 : profile.id\n          });\n        case 3:\n          findUserByFacebookId = _context.sent;\n          if (!findUserByFacebookId) {\n            _context.next = 6;\n            break;\n          }\n          return _context.abrupt(\"return\", cb(null, findUserByFacebookId));\n        case 6:\n          if (findUserByFacebookId) {\n            _context.next = 14;\n            break;\n          }\n          displayName = (_profile$displayName = profile.displayName) === null || _profile$displayName === void 0 ? void 0 : _profile$displayName.split(' ');\n          payload = {\n            //   email,\n            social_accounts: {\n              facebook: profile === null || profile === void 0 ? void 0 : profile.id\n            },\n            lastName: displayName[1],\n            firstName: displayName[0]\n          };\n          token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign(payload, process.env.OAUTH_REGISTRATION_JWT_SECRET, {\n            expiresIn: '15m',\n            algorithm: 'HS256'\n          });\n          id = (0,uuid__WEBPACK_IMPORTED_MODULE_7__.v4)();\n          ttl = 15 * 60;\n          _app_js__WEBPACK_IMPORTED_MODULE_6__.myCache.set(id, token, ttl);\n          return _context.abrupt(\"return\", cb(null, null, id));\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function verifyCallBack(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar facebookStrategy = new (passport_facebook__WEBPACK_IMPORTED_MODULE_2___default())(facebookStrategyOption, verifyCallBack);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (facebookStrategy);\n\n//# sourceURL=webpack://server/./utils/passport/facebookStrategy.js?");

/***/ }),

/***/ "./utils/passport/googleStrategy.js":
/*!******************************************!*\
  !*** ./utils/passport/googleStrategy.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var passport_google_oidc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! passport-google-oidc */ \"passport-google-oidc\");\n/* harmony import */ var passport_google_oidc__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(passport_google_oidc__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _Models_user_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../Models/user.js */ \"./Models/user.js\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../app.js */ \"./app.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\nvar googleStrategyOption = {\n  clientID: process.env['GOOGLE_CLIENT_ID'],\n  clientSecret: process.env['GOOGLE_CLIENT_SECRET'],\n  callbackURL: '/api/user/login/google/callback',\n  scope: ['profile', 'email']\n};\nvar googleVerifyCallBack = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(issuer, profile, cb) {\n    var _profile$emails$;\n    var email, findUserByGoogleId, findUser, _profile$name, _profile$name2, payload, token, id, ttl;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          email = (_profile$emails$ = profile.emails[0]) === null || _profile$emails$ === void 0 ? void 0 : _profile$emails$.value;\n          _context.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOne({\n            'social_accounts.google': profile === null || profile === void 0 ? void 0 : profile.id\n          });\n        case 3:\n          findUserByGoogleId = _context.sent;\n          if (!findUserByGoogleId) {\n            _context.next = 6;\n            break;\n          }\n          return _context.abrupt(\"return\", cb(null, findUserByGoogleId));\n        case 6:\n          _context.next = 8;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOne({\n            email: email\n          });\n        case 8:\n          findUser = _context.sent;\n          if (!findUser) {\n            _context.next = 13;\n            break;\n          }\n          _context.next = 12;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOneAndUpdate({\n            email: email\n          }, {\n            'social_accounts.google': profile === null || profile === void 0 ? void 0 : profile.id\n          });\n        case 12:\n          return _context.abrupt(\"return\", cb(null, findUser));\n        case 13:\n          if (findUser) {\n            _context.next = 20;\n            break;\n          }\n          payload = {\n            email: email,\n            social_accounts: {\n              google: profile === null || profile === void 0 ? void 0 : profile.id\n            },\n            lastName: (_profile$name = profile.name) === null || _profile$name === void 0 ? void 0 : _profile$name.familyName,\n            firstName: (_profile$name2 = profile.name) === null || _profile$name2 === void 0 ? void 0 : _profile$name2.givenName\n          };\n          token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default().sign(payload, process.env['OAUTH_REGISTRATION_JWT_SECRET'], {\n            expiresIn: '15m',\n            algorithm: 'HS256'\n          });\n          id = (0,uuid__WEBPACK_IMPORTED_MODULE_8__.v4)();\n          ttl = 15 * 60;\n          _app_js__WEBPACK_IMPORTED_MODULE_7__.myCache.set(id, token, ttl);\n          return _context.abrupt(\"return\", cb(null, null, id));\n        case 20:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function googleVerifyCallBack(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar googleStrategy = new (passport_google_oidc__WEBPACK_IMPORTED_MODULE_3___default())(googleStrategyOption, googleVerifyCallBack);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (googleStrategy);\n\n//# sourceURL=webpack://server/./utils/passport/googleStrategy.js?");

/***/ }),

/***/ "./utils/passport/localStrategy.js":
/*!*****************************************!*\
  !*** ./utils/passport/localStrategy.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var passport_local__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! passport-local */ \"passport-local\");\n/* harmony import */ var passport_local__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(passport_local__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _Models_user_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../Models/user.js */ \"./Models/user.js\");\n\n\n\n\n\nvar verifyCallback = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(email, password, cb) {\n    var findUser, match;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOne({\n            email: email\n          });\n        case 3:\n          findUser = _context.sent;\n          if (findUser) {\n            _context.next = 6;\n            break;\n          }\n          return _context.abrupt(\"return\", cb(null, false));\n        case 6:\n          _context.next = 8;\n          return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(password, findUser.password);\n        case 8:\n          match = _context.sent;\n          if (match) {\n            _context.next = 11;\n            break;\n          }\n          return _context.abrupt(\"return\", cb(null, false));\n        case 11:\n          if (!match) {\n            _context.next = 13;\n            break;\n          }\n          return _context.abrupt(\"return\", cb(null, findUser));\n        case 13:\n          _context.next = 18;\n          break;\n        case 15:\n          _context.prev = 15;\n          _context.t0 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", cb(_context.t0));\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 15]]);\n  }));\n  return function verifyCallback(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar verificationFields = {\n  usernameField: 'email',\n  passwordField: 'password'\n};\nvar strategy = new (passport_local__WEBPACK_IMPORTED_MODULE_3___default())(verificationFields, verifyCallback);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (strategy);\n\n//# sourceURL=webpack://server/./utils/passport/localStrategy.js?");

/***/ }),

/***/ "./utils/passport/passport.js":
/*!************************************!*\
  !*** ./utils/passport/passport.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! passport */ \"passport\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(passport__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_user_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Models/user.js */ \"./Models/user.js\");\n/* harmony import */ var _localStrategy_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./localStrategy.js */ \"./utils/passport/localStrategy.js\");\n/* harmony import */ var _googleStrategy_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./googleStrategy.js */ \"./utils/passport/googleStrategy.js\");\n/* harmony import */ var _facebookStrategy_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./facebookStrategy.js */ \"./utils/passport/facebookStrategy.js\");\n/* harmony import */ var _twiiterStrategy_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./twiiterStrategy.js */ \"./utils/passport/twiiterStrategy.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../logger.js */ \"./utils/logger.js\");\n\n\n\n\n\n\n\n\n\npassport__WEBPACK_IMPORTED_MODULE_2___default().serializeUser(function (user, cb) {\n  var _user$_id;\n  return cb(null, (_user$_id = user._id) === null || _user$_id === void 0 ? void 0 : _user$_id.toString());\n});\npassport__WEBPACK_IMPORTED_MODULE_2___default().deserializeUser( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(userId, cb) {\n    var findUser;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(userId, {\n            email: 1,\n            firstName: 1,\n            lastName: 1,\n            interest: 1,\n            _id: 1,\n            id: 1\n            // adminAccess: 1,\n            // password: 0,\n            // dob: 0,\n            // address: 0,\n            // __v: 0,\n          }, {\n            lean: {\n              toObject: true\n            }\n          });\n        case 3:\n          findUser = _context.sent;\n          return _context.abrupt(\"return\", cb(null, findUser));\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          _logger_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(_context.t0);\n          return _context.abrupt(\"return\", cb(_context.t0));\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\npassport__WEBPACK_IMPORTED_MODULE_2___default().use(_localStrategy_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\npassport__WEBPACK_IMPORTED_MODULE_2___default().use(_googleStrategy_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\npassport__WEBPACK_IMPORTED_MODULE_2___default().use(_facebookStrategy_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\npassport__WEBPACK_IMPORTED_MODULE_2___default().use(_twiiterStrategy_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((passport__WEBPACK_IMPORTED_MODULE_2___default()));\n\n//# sourceURL=webpack://server/./utils/passport/passport.js?");

/***/ }),

/***/ "./utils/passport/twiiterStrategy.js":
/*!*******************************************!*\
  !*** ./utils/passport/twiiterStrategy.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var passport_twitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! passport-twitter */ \"passport-twitter\");\n/* harmony import */ var passport_twitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(passport_twitter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_user_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Models/user.js */ \"./Models/user.js\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../app.js */ \"./app.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nvar twitterStrategyOption = {\n  consumerKey: process.env.TWITTER_CONSUMER_KEY,\n  consumerSecret: process.env.TWITTER_CONSUMER_SECRET,\n  callbackURL: '/api/user/login/twitter/callback',\n  includeEmail: true\n};\nvar verifyCallBack = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(token, tokenSecret, profile, cb) {\n    var _profile$emails$;\n    var email, findUserByTwitterId, findUser, fullName, payload, jwtToken, id, ttl;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          email = (_profile$emails$ = profile.emails[0]) === null || _profile$emails$ === void 0 ? void 0 : _profile$emails$.value;\n          _context.next = 3;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n            'social_accounts.twitter': profile === null || profile === void 0 ? void 0 : profile.id\n          });\n        case 3:\n          findUserByTwitterId = _context.sent;\n          if (!findUserByTwitterId) {\n            _context.next = 6;\n            break;\n          }\n          return _context.abrupt(\"return\", cb(null, findUserByTwitterId));\n        case 6:\n          _context.next = 8;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n            email: email\n          });\n        case 8:\n          findUser = _context.sent;\n          if (!findUser) {\n            _context.next = 13;\n            break;\n          }\n          _context.next = 12;\n          return _Models_user_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOneAndUpdate({\n            email: email\n          }, {\n            'social_accounts.twitter': profile === null || profile === void 0 ? void 0 : profile.id\n          });\n        case 12:\n          return _context.abrupt(\"return\", cb(null, findUser));\n        case 13:\n          if (findUserByTwitterId) {\n            _context.next = 21;\n            break;\n          }\n          fullName = profile.displayName.split(' ');\n          payload = {\n            email: email,\n            social_accounts: {\n              twitter: profile === null || profile === void 0 ? void 0 : profile.id\n            },\n            lastName: fullName[1],\n            firstName: fullName[0]\n          };\n          jwtToken = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign(payload, process.env.OAUTH_REGISTRATION_JWT_SECRET, {\n            expiresIn: '15m',\n            algorithm: 'HS256'\n          });\n          id = (0,uuid__WEBPACK_IMPORTED_MODULE_7__.v4)();\n          ttl = 15 * 60;\n          _app_js__WEBPACK_IMPORTED_MODULE_6__.myCache.set(id, jwtToken, ttl);\n          return _context.abrupt(\"return\", cb(null, null, id));\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function verifyCallBack(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar twitterStrategy = new (passport_twitter__WEBPACK_IMPORTED_MODULE_2___default().Strategy)(twitterStrategyOption, verifyCallBack);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (twitterStrategy);\n\n//# sourceURL=webpack://server/./utils/passport/twiiterStrategy.js?");

/***/ }),

/***/ "./utils/productAggregateStage.js":
/*!****************************************!*\
  !*** ./utils/productAggregateStage.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction productAggregateStage(_ref) {\n  var stats = _ref.stats;\n  return [{\n    $unwind: {\n      path: '$variations',\n      includeArrayIndex: 'variationNumber'\n    }\n  }, {\n    $addFields: {\n      variationOptions: {\n        $objectToArray: '$variations.options'\n      }\n    }\n  }, {\n    $addFields: {\n      priceArray: {\n        $cond: {\n          \"if\": {\n            $eq: ['$variations.priceHeader.on', true]\n          },\n          then: {\n            $map: {\n              input: '$variationOptions',\n              as: 'option',\n              \"in\": {\n                $toDouble: '$$option.v.price'\n              }\n            }\n          },\n          \"else\": '$$REMOVE'\n        }\n      },\n      stockArray: {\n        $cond: {\n          \"if\": {\n            $eq: ['$variations.quantityHeader.on', true]\n          },\n          then: {\n            $map: {\n              input: '$variationOptions',\n              as: 'option',\n              \"in\": {\n                $cond: {\n                  \"if\": {\n                    $eq: ['$$option.v.visible', true]\n                  },\n                  then: {\n                    $toInt: '$$option.v.stock'\n                  },\n                  \"else\": 0\n                }\n              }\n            }\n          },\n          \"else\": '$$REMOVE'\n        }\n      }\n    }\n  }, {\n    $group: {\n      _id: '$_id',\n      doc: {\n        $first: '$$ROOT'\n      },\n      variationsArray: {\n        $push: '$variations'\n      },\n      stockArrays: {\n        $push: {\n          $cond: {\n            \"if\": {\n              $and: [{\n                $eq: ['$variations.quantityHeader.on', true]\n              }, {\n                $eq: ['$variations.combine', true]\n              }]\n            },\n            then: {\n              $cond: {\n                \"if\": {\n                  $eq: ['$variationNumber', 2]\n                },\n                then: {\n                  min: {\n                    $toInt: {\n                      $min: '$stockArray'\n                    }\n                  },\n                  max: {\n                    $toInt: {\n                      $max: '$stockArray'\n                    }\n                  },\n                  array: '$stockArray',\n                  total: {\n                    $sum: '$stockArray'\n\n                    // {\n                    //   $map: {\n                    //     input: '$stockArray',\n                    //     as: 'item',\n                    //     in: { $toInt: '$$item' },\n                    //   },\n                    // },\n                  }\n                },\n                \"else\": '$$REMOVE'\n              }\n            },\n            \"else\": {\n              $cond: {\n                \"if\": {\n                  $eq: ['$variations.quantityHeader.on', true]\n                },\n                then: {\n                  min: {\n                    $toInt: {\n                      $min: '$stockArray'\n                    }\n                  },\n                  max: {\n                    $toInt: {\n                      $max: '$stockArray'\n                    }\n                  },\n                  array: '$stockArray',\n                  total: {\n                    $sum: '$stockArray'\n                  }\n                },\n                \"else\": '$$REMOVE'\n              }\n            }\n          }\n        }\n      },\n      priceArrays: {\n        $push: {\n          $cond: {\n            \"if\": {\n              $and: [{\n                $eq: ['$variations.priceHeader.on', true]\n              }, {\n                $eq: ['$variations.combine', true]\n              }]\n            },\n            then: {\n              $cond: {\n                \"if\": {\n                  $eq: ['$variationNumber', 2]\n                },\n                then: {\n                  min: {\n                    $min: '$priceArray'\n                  },\n                  max: {\n                    $max: '$priceArray'\n                  }\n                },\n                \"else\": '$$REMOVE'\n              }\n            },\n            \"else\": {\n              $cond: {\n                \"if\": {\n                  $eq: ['$variations.priceHeader.on', true]\n                },\n                then: {\n                  min: {\n                    $min: '$priceArray'\n                  },\n                  max: {\n                    $max: '$priceArray'\n                  }\n                },\n                \"else\": '$$REMOVE'\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    $replaceRoot: {\n      newRoot: {\n        $mergeObjects: ['$doc', {\n          additional_data: {\n            price: {\n              $cond: {\n                \"if\": {\n                  $gt: [{\n                    $size: '$priceArrays'\n                  }, 0]\n                },\n                then: {\n                  $arrayElemAt: ['$priceArrays', 0]\n                },\n                \"else\": {\n                  min: {\n                    $toDouble: '$doc.price.current'\n                  },\n                  max: {\n                    $toDouble: '$doc.price.current'\n                  }\n                }\n              }\n            },\n            stock: {\n              $cond: {\n                \"if\": {\n                  $gt: [{\n                    $size: '$stockArrays'\n                  }, 0]\n                },\n                then: {\n                  $arrayElemAt: ['$stockArrays', 0]\n                },\n                \"else\": {\n                  min: '$doc.stock',\n                  max: '$doc.stock',\n                  total: '$doc.stock'\n                }\n              }\n            }\n          }\n        }, {\n          variations: '$variationsArray'\n        }]\n      }\n    }\n  }, {\n    $lookup: {\n      from: 'orders',\n      localField: '_id',\n      foreignField: 'items.product',\n      as: 'orders_docs',\n      // let: { total_sales: 0, total_sales_amount: 0.0 },\n      \"let\": {\n        productId: '$_id'\n      },\n      pipeline: [{\n        $match: {\n          status: {\n            $ne: 'processing'\n          }\n        }\n      }, {\n        $addFields: {\n          prices: {\n            $sum: {\n              $map: {\n                input: '$items',\n                as: 'item',\n                \"in\": {\n                  $cond: {\n                    \"if\": {\n                      $eq: ['$$item.product', '$$productId']\n                    },\n                    then: '$$item.price',\n                    \"else\": '$$REMOVE'\n                  }\n                }\n              }\n            }\n          }\n        }\n      }, {\n        $project: {\n          _id: 1,\n          status: 1,\n          prices: 1\n\n          // price: {\n          //   items: {\n          //     $elemMatch: { product: '$$productId' },\n          //   },\n          // },\n        }\n      }]\n    }\n  }, {\n    $addFields: {\n      stats: {\n        $cond: {\n          \"if\": {\n            $eq: [stats, true]\n          },\n          then: {\n            revenue: {\n              $toDouble: {\n                $sum: '$orders_docs.prices'\n              }\n            },\n            sales: {\n              $toInt: {\n                $size: '$orders_docs'\n              }\n            }\n          },\n          \"else\": '$$REMOVE'\n        }\n      }\n    }\n  }, {\n    $unset: ['orders_docs', 'variationOptions', 'priceArrays', 'stockArrays', 'priceArray', 'stockArray', 'variationNumber']\n  }];\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (productAggregateStage);\n\n//# sourceURL=webpack://server/./utils/productAggregateStage.js?");

/***/ }),

/***/ "./utils/productSearchStage.jsx":
/*!**************************************!*\
  !*** ./utils/productSearchStage.jsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction productSearchStage(searchText) {\n  var should = [{\n    autocomplete: {\n      query: searchText,\n      path: 'title'\n    }\n  }];\n  try {\n    var objectId = new mongoose.Types.ObjectId(searchText);\n    should.push({\n      equals: {\n        value: objectId,\n        path: '_id'\n      }\n    });\n  } catch (error) {\n    console.error('parse string to objectId failed: ', error === null || error === void 0 ? void 0 : error.message);\n  }\n  var searchStage = {\n    $search: {\n      index: 'products_search_index',\n      compound: {\n        should: should\n      }\n    }\n  };\n  return searchStage;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (productSearchStage);\n\n//# sourceURL=webpack://server/./utils/productSearchStage.jsx?");

/***/ }),

/***/ "./utils/productValidator.js":
/*!***********************************!*\
  !*** ./utils/productValidator.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction customVariationValidator(_ref) {\n  var value = _ref.value,\n    minValue = _ref.minValue,\n    maxValue = _ref.maxValue,\n    msg = _ref.msg,\n    checker = _ref.checker;\n  var parseValue = value;\n  console.log({\n    checker: checker,\n    parseValue: parseValue,\n    value: value\n  });\n  if (checker) {\n    return true;\n  }\n  if (parseValue < minValue || parseValue > maxValue || !parseValue) {\n    console.log('error throwing');\n    throw new Error(msg);\n  }\n  return parseValue;\n}\nvar productValidator = [(0,express_validator__WEBPACK_IMPORTED_MODULE_0__.check)('files').custom(function (value, _ref2) {\n  var req = _ref2.req;\n  console.log({\n    value: value\n  });\n  if (req.files.length < 1) {\n    throw new Error('Please add at least one photo.');\n  }\n  return true;\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.body)('title', 'Please add a title.').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.body)('category', 'Please select from one of the categories.').trim().escape().notEmpty().custom(function (value) {\n  if (value === 'undefined') {\n    throw new Error();\n  }\n  return true;\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.body)('gender', 'Please select from one of the genders.').trim().escape().notEmpty().isIn(['men', 'women']), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.body)('price', 'Please enter a valid price.').notEmpty().trim().escape().toFloat().optional({\n  nullable: true\n}).custom(function (value, _ref3) {\n  var req = _ref3.req;\n  var newVariation = lodash__WEBPACK_IMPORTED_MODULE_1___default().map(req.body.variations, function (array) {\n    return JSON.parse(array);\n  });\n  return customVariationValidator({\n    value: value,\n    minValue: 0.17,\n    maxValue: 42933.2,\n    msg: 'Price must be between £0.17 and £42,933.20.',\n    checker: lodash__WEBPACK_IMPORTED_MODULE_1___default().some(newVariation, {\n      priceHeader: {\n        on: true\n      }\n    })\n  });\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_0__.body)('stock', 'Please enter a valid stock.').notEmpty().trim().escape().toInt().optional({\n  nullable: true\n}).custom(function (value, _ref4) {\n  var req = _ref4.req;\n  var newVariation = lodash__WEBPACK_IMPORTED_MODULE_1___default().map(req.body.variations, function (array) {\n    return JSON.parse(array);\n  });\n  return customVariationValidator({\n    value: value,\n    minValue: 0,\n    maxValue: 999,\n    msg: 'Quantity must be between 0 and 999.',\n    checker: lodash__WEBPACK_IMPORTED_MODULE_1___default().some(newVariation, {\n      quantityHeader: {\n        on: true\n      }\n    })\n  });\n}),\n// .notEmpty(),\n\n(0,express_validator__WEBPACK_IMPORTED_MODULE_0__.body)('description', 'Please Enter a description').escape().trim().notEmpty(),\n// body('detail', 'Please add some details.')\n//   .trim()\n//   .escape()\n//   .isArray({ min: 1 })\n//   .custom(async (value) => {\n//     const everyValue = value.every((item) => item === '\\n' || item === '');\n\n//     if (everyValue === true) {\n//       throw new Error();\n//     }\n//   }),\n(0,express_validator__WEBPACK_IMPORTED_MODULE_0__.body)('delivery', 'Add a delivery option to this listing').trim().notEmpty().not().equals('undefined').escape()\n\n// .custom((value) => {\n//   console.log({ delivery: value });\n\n//   return value;\n// }),\n];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (productValidator);\n\n//# sourceURL=webpack://server/./utils/productValidator.js?");

/***/ }),

/***/ "./utils/s3Service.js":
/*!****************************!*\
  !*** ./utils/s3Service.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   generateSignedUrl: () => (/* binding */ generateSignedUrl),\n/* harmony export */   s3Delete: () => (/* binding */ s3Delete),\n/* harmony export */   s3Get: () => (/* binding */ s3Get),\n/* harmony export */   s3PdfUpload: () => (/* binding */ s3PdfUpload)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/lib-storage */ \"@aws-sdk/lib-storage\");\n/* harmony import */ var _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/s3-request-presigner */ \"@aws-sdk/s3-request-presigner\");\n/* harmony import */ var _aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nvar s3Client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.S3Client();\nvar generateSignedUrl = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(filePath) {\n    var params, command, url;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          params = {\n            Bucket: process.env.AWS_BUCKET_NAME,\n            Key: filePath\n          };\n          command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.GetObjectCommand(params);\n          _context.next = 4;\n          return (0,_aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_3__.getSignedUrl)(s3Client, command);\n        case 4:\n          url = _context.sent;\n          return _context.abrupt(\"return\", url);\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function generateSignedUrl(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar s3PdfUpload = /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2(_ref2) {\n    var pdfStream, fileName, params, parallelUploads3, response;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          pdfStream = _ref2.pdfStream, fileName = _ref2.fileName;\n          _context2.prev = 1;\n          params = {\n            Bucket: process.env.AWS_BUCKET_NAME,\n            Key: \"files/pdf/\".concat(fileName),\n            Body: pdfStream,\n            ContentType: 'application/pdf'\n          };\n          parallelUploads3 = new _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_2__.Upload({\n            client: s3Client,\n            params: params\n          });\n          parallelUploads3.on('httpUploadProgress', function (progress) {\n            console.log(progress);\n          });\n          _context2.next = 7;\n          return parallelUploads3.done();\n        case 7:\n          response = _context2.sent;\n          return _context2.abrupt(\"return\", response);\n        case 11:\n          _context2.prev = 11;\n          _context2.t0 = _context2[\"catch\"](1);\n          console.error('error at s3PdfUpload', _context2.t0);\n        case 14:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 11]]);\n  }));\n  return function s3PdfUpload(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar s3Upload = /*#__PURE__*/function () {\n  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee3(_ref4) {\n    var files, isProfile, folderId, endPoint, params, results;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          files = _ref4.files, isProfile = _ref4.isProfile, folderId = _ref4.folderId, endPoint = _ref4.endPoint;\n          console.log({\n            endPoint: endPoint\n          });\n          params = files.map(function (file) {\n            var result = {\n              Bucket: process.env.AWS_BUCKET_NAME,\n              Key: isProfile ? \"\".concat(endPoint, \"/\").concat(file.id, \".\").concat(file.format) : \"\".concat(endPoint, \"/\").concat(folderId, \"/\").concat(file.fileName, \".\").concat(file.format),\n              Body: file.buffer,\n              ContentDisposition: 'inline',\n              ContentType: 'image/png',\n              ResponseCacheControl: 'no-cache',\n              CacheControl: 'no-cache'\n            };\n            return result;\n          });\n          _context3.next = 5;\n          return Promise.all(params.map(function (param) {\n            var command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.PutObjectCommand(param);\n            return s3Client.send(command);\n          }));\n        case 5:\n          results = _context3.sent;\n          return _context3.abrupt(\"return\", results);\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function s3Upload(_x3) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar s3Delete = /*#__PURE__*/function () {\n  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee4(prefix, id) {\n    var client, params, listCommand, response, listParams, result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.S3Client({});\n          params = {\n            Bucket: process.env.AWS_BUCKET_NAME,\n            Prefix: \"\".concat(prefix, \"/\").concat(id)\n          };\n          listCommand = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.ListObjectsV2Command(params);\n          _context4.next = 5;\n          return client.send(listCommand);\n        case 5:\n          response = _context4.sent;\n          if (response.Contents) {\n            _context4.next = 8;\n            break;\n          }\n          return _context4.abrupt(\"return\", 'empty response Content or Keys');\n        case 8:\n          listParams = [];\n          response.Contents.forEach(function (_ref7) {\n            var Key = _ref7.Key;\n            if (Key !== \"products/\".concat(id, \"/1.png\")) {\n              listParams.push({\n                Bucket: process.env.AWS_BUCKET_NAME,\n                Key: Key\n              });\n            }\n          });\n          _context4.next = 12;\n          return Promise.all(listParams.map(function (param) {\n            var deleteCommand = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.DeleteObjectCommand(param);\n            return client.send(deleteCommand);\n          }));\n        case 12:\n          result = _context4.sent;\n          return _context4.abrupt(\"return\", result);\n        case 14:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function s3Delete(_x4, _x5) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar s3Get = /*#__PURE__*/function () {\n  var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee6(id) {\n    var client, params, listCommand, response, keys, result;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.S3Client();\n          params = {\n            Bucket: process.env.AWS_BUCKET_NAME,\n            Prefix: \"products/\".concat(id)\n          };\n          listCommand = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.ListObjectsV2Command(params);\n          _context6.next = 6;\n          return client.send(listCommand);\n        case 6:\n          response = _context6.sent;\n          if (!(!(response !== null && response !== void 0 && response.Contents) > 0)) {\n            _context6.next = 9;\n            break;\n          }\n          return _context6.abrupt(\"return\");\n        case 9:\n          keys = response.Contents.map(function (item) {\n            return item.Key;\n          });\n          _context6.next = 12;\n          return Promise.all(keys.map( /*#__PURE__*/function () {\n            var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee5(item) {\n              var newParams, getCommand, getResponse;\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee5$(_context5) {\n                while (1) switch (_context5.prev = _context5.next) {\n                  case 0:\n                    newParams = {\n                      Bucket: process.env.AWS_BUCKET_NAME,\n                      Key: item\n                    };\n                    getCommand = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_4__.GetObjectCommand(newParams);\n                    _context5.next = 4;\n                    return client.send(getCommand);\n                  case 4:\n                    getResponse = _context5.sent;\n                    return _context5.abrupt(\"return\", {\n                      key: item.split('/')[2],\n                      data: getResponse\n                    });\n                  case 6:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }, _callee5);\n            }));\n            return function (_x7) {\n              return _ref9.apply(this, arguments);\n            };\n          }()));\n        case 12:\n          result = _context6.sent;\n          return _context6.abrupt(\"return\", result);\n        case 16:\n          _context6.prev = 16;\n          _context6.t0 = _context6[\"catch\"](0);\n          console.log('error: ', _context6.t0);\n        case 19:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 16]]);\n  }));\n  return function s3Get(_x6) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (s3Upload);\n\n//# sourceURL=webpack://server/./utils/s3Service.js?");

/***/ }),

/***/ "./utils/searchIndex.js":
/*!******************************!*\
  !*** ./utils/searchIndex.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   orderSearchIndex: () => (/* binding */ orderSearchIndex),\n/* harmony export */   productSearchIndex: () => (/* binding */ productSearchIndex)\n/* harmony export */ });\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n\nvar orderSearchIndex = {\n  collectionName: 'orders',\n  database: process.env.DBNAME,\n  name: 'orders_search_index',\n  type: 'search',\n  analyzer: 'lucene.standard',\n  mappings: {\n    dynamic: false,\n    fields: {\n      _id: {\n        type: 'autocomplete'\n      },\n      customer: {\n        type: 'autocomplete'\n      },\n      shipping_address: {\n        type: 'document',\n        fields: {\n          name: {\n            type: 'autocomplete'\n          }\n        }\n      }\n    }\n  }\n};\nvar productSearchIndex = {\n  collectionName: 'products',\n  database: process.env.DBNAME,\n  name: 'products_search_index',\n  type: 'search',\n  mappings: {\n    dynamic: false,\n    fields: {\n      title: {\n        type: 'autocomplete'\n      }\n    }\n  },\n  searchAnalyzer: 'lucene.standard'\n};\n\n\n//# sourceURL=webpack://server/./utils/searchIndex.js?");

/***/ }),

/***/ "./utils/shipDateStage.js":
/*!********************************!*\
  !*** ./utils/shipDateStage.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar shipDateStage = {\n  $addFields: {\n    ship_date: {\n      $max: {\n        $map: {\n          input: '$itemsByProfile',\n          as: 'profile',\n          \"in\": {\n            $dateAdd: {\n              startDate: '$createdAt',\n              unit: {\n                $substrBytes: ['$$profile.shippingInfo.processing_time.type', 0, {\n                  $subtract: [{\n                    $strLenCP: '$$profile.shippingInfo.processing_time.type'\n                  }, 1]\n                }]\n              },\n              amount: '$$profile.shippingInfo.processing_time.end'\n            }\n          }\n        }\n      }\n    }\n  }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (shipDateStage);\n\n//# sourceURL=webpack://server/./utils/shipDateStage.js?");

/***/ }),

/***/ "./utils/sortCOmbineVariations.js":
/*!****************************************!*\
  !*** ./utils/sortCOmbineVariations.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* eslint-disable no-restricted-syntax */\nfunction sortCombineVariation(options) {\n  var minPriceValue = Infinity;\n  console.log('im in here');\n  var variationObj = {};\n  var map = new Map();\n  var variation2Map = new Map();\n  var variation1 = {\n    array: []\n  };\n  var variation2 = {\n    array: []\n  };\n  var _iterator = _createForOfIteratorHelper(options),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_step.value, 2),\n        key = _step$value[0],\n        value = _step$value[1];\n      minPriceValue = Math.min(value.price, minPriceValue);\n      if (!variation2Map.has(value.variation2)) {\n        var newObj = {\n          variation: value.variation2,\n          id: key\n        };\n        variation2.array.push(newObj);\n        variation2Map.set(value.variation2, newObj);\n      }\n      if (!map.has(value.variation)) {\n        variation1.array.push({\n          variation: value.variation,\n          id: key\n        });\n        var newVariationObj = _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({}, value.variation2, {\n          id: value.id,\n          stock: value.stock,\n          price: value.price,\n          visible: value.visible\n        });\n        variationObj[value.variation] = newVariationObj;\n        map.set(value.variation, newVariationObj);\n      } else {\n        var getItemFromMap = map.get(value.variation);\n        var _newVariationObj2 = _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({}, value.variation2, {\n          id: value.id,\n          stock: value.stock,\n          price: value.price,\n          visible: value.visible\n        });\n        var updatedVariationObject = Object.assign(getItemFromMap, _newVariationObj2);\n        map.set(value.variation, updatedVariationObject);\n      }\n    }\n\n    //   newData.price.current = minPriceValue;\n\n    //   newData.combineVariation = variationObj;\n    //   newData.testObj = testObj;\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return {\n    variationObj: variationObj,\n    minPriceValue: minPriceValue,\n    variation1: variation1,\n    variation2: variation2\n  };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (sortCombineVariation);\n\n//# sourceURL=webpack://server/./utils/sortCOmbineVariations.js?");

/***/ }),

/***/ "./utils/userValidators.js":
/*!*********************************!*\
  !*** ./utils/userValidators.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! express-validator */ \"express-validator\");\n/* harmony import */ var express_validator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(express_validator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Models_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Models/user */ \"./Models/user.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nvar userValidators = [(0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('email', 'Please enter a valid email address.').trim().escape().notEmpty().custom( /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(value) {\n    var findUser;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _Models_user__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n            email: value\n          });\n        case 2:\n          findUser = _context.sent;\n          if (!findUser) {\n            _context.next = 5;\n            break;\n          }\n          throw new Error('User Already Exists. Please try using a different email address.');\n        case 5:\n          return _context.abrupt(\"return\", true);\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}()), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('password', 'Password must be between 10 to 20 characters.').trim().notEmpty().escape().trim().isLength({\n  min: 10,\n  max: 20\n}), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('firstName', 'Please enter an valid first name.').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('lastName', 'Please enter an valid last name.').trim().escape().notEmpty(), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('email', 'Please enter a valid email.').trim().escape().notEmpty().isEmail(), (0,express_validator__WEBPACK_IMPORTED_MODULE_2__.check)('dob', 'Please enter an valid date').custom(function (value) {\n  var userDob = dayjs__WEBPACK_IMPORTED_MODULE_4___default()(value);\n  var todayDate = dayjs__WEBPACK_IMPORTED_MODULE_4___default()();\n  var difference = todayDate.diff(userDob, 'year');\n  if (difference < 18) {\n    throw new Error('You must be 18 or older to use Glamo.');\n  }\n  return true;\n})];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (userValidators);\n\n//# sourceURL=webpack://server/./utils/userValidators.js?");

/***/ }),

/***/ "./utils/variationFormat.js":
/*!**********************************!*\
  !*** ./utils/variationFormat.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"@babel/runtime/helpers/objectWithoutProperties\");\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n\n\nvar _excluded = [\"variationList\"],\n  _excluded2 = [\"variation\", \"variation2\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\nfunction variationFormat(_ref) {\n  var products = _ref.products;\n  return Array.from(products).map(function (_ref2) {\n    var variationList = _ref2.variationList,\n      Props = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(_ref2, _excluded);\n    if (lodash__WEBPACK_IMPORTED_MODULE_2___default().get(Props, 'variation_data.isVariationCombine') == true) {\n      var combineVariation = {};\n      variationList[2].array.forEach(function (_ref3) {\n        var variation = _ref3.variation,\n          variation2 = _ref3.variation2,\n          newProps = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(_ref3, _excluded2);\n        // console.log({variation, variation2, newProps})\n        if (!combineVariation.hasOwnProperty(variation)) {\n          combineVariation[variation] = {};\n        }\n\n        // combineVariation[variation][variation2] = {newProps};\n\n        lodash__WEBPACK_IMPORTED_MODULE_2___default().set(combineVariation, [variation, variation2], _objectSpread({\n          variation: variation2\n        }, newProps));\n      });\n\n      //Props.combineVariation = combineVariation;\n      //console.log(combineVariation)\n      lodash__WEBPACK_IMPORTED_MODULE_2___default().set(Props, ['variation_data', 'combineVariation'], combineVariation);\n    }\n    // const newProps = _.cloneDeep(remainingProps);\n    // console.log({ variation_data });\n    // for (let i = 0; i < variationList?.length; i++) {\n    //   if (i < 2) {\n    //     _.set(\n    //       newProps,\n    //       ['variation_data', `variation${i + 1}_data`],\n    //       variationList[i],\n    //     );\n\n    //     _.set(\n    //       newProps,\n    //       ['variation_data', `variation${i + 1}_present`],\n    //       true,\n    //     );\n    //   } else {\n    //     const combineVariation = {};\n\n    //     variationList[i].array.forEach(\n    //       ({ variation, variation2, ...newProps }) => {\n    //         if (!combineVariation.hasOwnProperty(variation)) {\n    //           combineVariation[variation] = {};\n    //         }\n\n    //         // combineVariation[variation][variation2] = newProps;\n\n    //         _.set(combineVariation, [variation, variation2], newProps);\n    //       },\n    //     );\n\n    //     newProps.combineVariation = combineVariation;\n\n    //     _.set(\n    //       newProps,\n    //       ['variation_data', 'combineVariation'],\n    //       combineVariation,\n    //     );\n    //     _.set(newProps, ['variation_data', 'isVariationCombine'], true);\n    //   }\n    // }\n\n    return Props;\n  });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (variationFormat);\n\n//# sourceURL=webpack://server/./utils/variationFormat.js?");

/***/ }),

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "@aws-sdk/lib-storage":
/*!***************************************!*\
  !*** external "@aws-sdk/lib-storage" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/lib-storage");

/***/ }),

/***/ "@aws-sdk/s3-request-presigner":
/*!************************************************!*\
  !*** external "@aws-sdk/s3-request-presigner" ***!
  \************************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/s3-request-presigner");

/***/ }),

/***/ "@babel/runtime/helpers/asyncToGenerator":
/*!**********************************************************!*\
  !*** external "@babel/runtime/helpers/asyncToGenerator" ***!
  \**********************************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/helpers/asyncToGenerator");

/***/ }),

/***/ "@babel/runtime/helpers/defineProperty":
/*!********************************************************!*\
  !*** external "@babel/runtime/helpers/defineProperty" ***!
  \********************************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/helpers/defineProperty");

/***/ }),

/***/ "@babel/runtime/helpers/extends":
/*!*************************************************!*\
  !*** external "@babel/runtime/helpers/extends" ***!
  \*************************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/helpers/extends");

/***/ }),

/***/ "@babel/runtime/helpers/objectDestructuringEmpty":
/*!******************************************************************!*\
  !*** external "@babel/runtime/helpers/objectDestructuringEmpty" ***!
  \******************************************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/helpers/objectDestructuringEmpty");

/***/ }),

/***/ "@babel/runtime/helpers/objectWithoutProperties":
/*!*****************************************************************!*\
  !*** external "@babel/runtime/helpers/objectWithoutProperties" ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/helpers/objectWithoutProperties");

/***/ }),

/***/ "@babel/runtime/helpers/slicedToArray":
/*!*******************************************************!*\
  !*** external "@babel/runtime/helpers/slicedToArray" ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/helpers/slicedToArray");

/***/ }),

/***/ "@babel/runtime/helpers/toConsumableArray":
/*!***********************************************************!*\
  !*** external "@babel/runtime/helpers/toConsumableArray" ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/helpers/toConsumableArray");

/***/ }),

/***/ "@babel/runtime/helpers/typeof":
/*!************************************************!*\
  !*** external "@babel/runtime/helpers/typeof" ***!
  \************************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/helpers/typeof");

/***/ }),

/***/ "@babel/runtime/regenerator":
/*!*********************************************!*\
  !*** external "@babel/runtime/regenerator" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("@babel/runtime/regenerator");

/***/ }),

/***/ "@react-email/components":
/*!******************************************!*\
  !*** external "@react-email/components" ***!
  \******************************************/
/***/ ((module) => {

module.exports = require("@react-email/components");

/***/ }),

/***/ "@react-email/render":
/*!**************************************!*\
  !*** external "@react-email/render" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("@react-email/render");

/***/ }),

/***/ "@react-pdf/renderer":
/*!**************************************!*\
  !*** external "@react-pdf/renderer" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("@react-pdf/renderer");

/***/ }),

/***/ "aws-sdk":
/*!**************************!*\
  !*** external "aws-sdk" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("aws-sdk");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "connect-mongo":
/*!********************************!*\
  !*** external "connect-mongo" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("connect-mongo");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("cors");

/***/ }),

/***/ "country-code-lookup":
/*!**************************************!*\
  !*** external "country-code-lookup" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("country-code-lookup");

/***/ }),

/***/ "dayjs":
/*!************************!*\
  !*** external "dayjs" ***!
  \************************/
/***/ ((module) => {

module.exports = require("dayjs");

/***/ }),

/***/ "dayjs/plugin/customParseFormat.js":
/*!****************************************************!*\
  !*** external "dayjs/plugin/customParseFormat.js" ***!
  \****************************************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/customParseFormat.js");

/***/ }),

/***/ "dayjs/plugin/minMax":
/*!**************************************!*\
  !*** external "dayjs/plugin/minMax" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/minMax");

/***/ }),

/***/ "dayjs/plugin/relativeTime.js":
/*!***********************************************!*\
  !*** external "dayjs/plugin/relativeTime.js" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/relativeTime.js");

/***/ }),

/***/ "dayjs/plugin/timezone.js":
/*!*******************************************!*\
  !*** external "dayjs/plugin/timezone.js" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/timezone.js");

/***/ }),

/***/ "dayjs/plugin/utc.js":
/*!**************************************!*\
  !*** external "dayjs/plugin/utc.js" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/utc.js");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "dotenv/config":
/*!********************************!*\
  !*** external "dotenv/config" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("dotenv/config");

/***/ }),

/***/ "dotenv/config.js":
/*!***********************************!*\
  !*** external "dotenv/config.js" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("dotenv/config.js");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("express");

/***/ }),

/***/ "express-async-handler":
/*!****************************************!*\
  !*** external "express-async-handler" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("express-async-handler");

/***/ }),

/***/ "express-session":
/*!**********************************!*\
  !*** external "express-session" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("express-session");

/***/ }),

/***/ "express-status-monitor":
/*!*****************************************!*\
  !*** external "express-status-monitor" ***!
  \*****************************************/
/***/ ((module) => {

module.exports = require("express-status-monitor");

/***/ }),

/***/ "express-validator":
/*!************************************!*\
  !*** external "express-validator" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("express-validator");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "libphonenumber-js":
/*!************************************!*\
  !*** external "libphonenumber-js" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("libphonenumber-js");

/***/ }),

/***/ "lodash":
/*!*************************!*\
  !*** external "lodash" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("lodash");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "morgan":
/*!*************************!*\
  !*** external "morgan" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("morgan");

/***/ }),

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "node-cache":
/*!*****************************!*\
  !*** external "node-cache" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node-cache");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "nodemailer-express-handlebars":
/*!************************************************!*\
  !*** external "nodemailer-express-handlebars" ***!
  \************************************************/
/***/ ((module) => {

module.exports = require("nodemailer-express-handlebars");

/***/ }),

/***/ "nodemon":
/*!**************************!*\
  !*** external "nodemon" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("nodemon");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("openai");

/***/ }),

/***/ "passport":
/*!***************************!*\
  !*** external "passport" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("passport");

/***/ }),

/***/ "passport-facebook":
/*!************************************!*\
  !*** external "passport-facebook" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("passport-facebook");

/***/ }),

/***/ "passport-google-oidc":
/*!***************************************!*\
  !*** external "passport-google-oidc" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("passport-google-oidc");

/***/ }),

/***/ "passport-local":
/*!*********************************!*\
  !*** external "passport-local" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("passport-local");

/***/ }),

/***/ "passport-twitter":
/*!***********************************!*\
  !*** external "passport-twitter" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("passport-twitter");

/***/ }),

/***/ "pino":
/*!***********************!*\
  !*** external "pino" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("pino");

/***/ }),

/***/ "postcode-validator":
/*!*************************************!*\
  !*** external "postcode-validator" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("postcode-validator");

/***/ }),

/***/ "randomstring":
/*!*******************************!*\
  !*** external "randomstring" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("randomstring");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ "react-router-dom":
/*!***********************************!*\
  !*** external "react-router-dom" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("react-router-dom");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "stripe":
/*!*************************!*\
  !*** external "stripe" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stripe");

/***/ }),

/***/ "urllib":
/*!*************************!*\
  !*** external "urllib" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("urllib");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("uuid");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./app.js");
/******/ 	
/******/ })()
;